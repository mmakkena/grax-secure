
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Sun Apr 14 2019 12:02:41 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xcb0c=['\x72\x65\x73\x75\x6d\x65','\x64\x61\x74\x61','\x65\x6e\x64','\x63\x6f\x6e\x63\x61\x74','\x64\x65\x6c\x65\x74\x65\x46\x69\x6c\x65','\x65\x78\x70\x6f\x72\x74\x73','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x33\x2d\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x2d\x73\x74\x72\x65\x61\x6d','\x73\x33\x2d\x75\x70\x6c\x6f\x61\x64\x2d\x73\x74\x72\x65\x61\x6d','\x66\x69\x6c\x65','\x62\x75\x63\x6b\x65\x74','\x67\x65\x74','\x73\x74\x6f\x72\x61\x67\x65\x2e\x61\x77\x73\x2e\x62\x75\x63\x6b\x65\x74','\x63\x6c\x69\x65\x6e\x74','\x5f\x63\x6c\x69\x65\x6e\x74','\x73\x74\x6f\x72\x61\x67\x65\x2e\x61\x77\x73','\x75\x70\x64\x61\x74\x65','\x66\x69\x6c\x65\x45\x78\x69\x73\x74\x73','\x68\x65\x61\x64\x4f\x62\x6a\x65\x63\x74','\x70\x72\x6f\x6d\x69\x73\x65','\x63\x61\x74\x63\x68','\x63\x6f\x64\x65','\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x53\x74\x72\x65\x61\x6d','\x75\x70\x6c\x6f\x61\x64\x53\x74\x72\x65\x61\x6d','\x75\x70\x6c\x6f\x61\x64','\x70\x75\x73\x68','\x75\x70\x6c\x6f\x61\x64\x65\x64','\x65\x72\x72\x6f\x72','\x70\x69\x70\x65'];(function(_0x288f73,_0x5d378b){var _0x417fe3=function(_0x2ebdc3){while(--_0x2ebdc3){_0x288f73['push'](_0x288f73['shift']());}};var _0x4432df=function(){var _0x3ee909={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x40e41d,_0x4d0c69,_0x400c97,_0x440ace){_0x440ace=_0x440ace||{};var _0x27a5a5=_0x4d0c69+'='+_0x400c97;var _0x10487c=0x0;for(var _0x10487c=0x0,_0x3506a3=_0x40e41d['length'];_0x10487c<_0x3506a3;_0x10487c++){var _0x20da4f=_0x40e41d[_0x10487c];_0x27a5a5+=';\x20'+_0x20da4f;var _0x33cf31=_0x40e41d[_0x20da4f];_0x40e41d['push'](_0x33cf31);_0x3506a3=_0x40e41d['length'];if(_0x33cf31!==!![]){_0x27a5a5+='='+_0x33cf31;}}_0x440ace['cookie']=_0x27a5a5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5d49f1,_0x28616e){_0x5d49f1=_0x5d49f1||function(_0x39799a){return _0x39799a;};var _0x399c25=_0x5d49f1(new RegExp('(?:^|;\x20)'+_0x28616e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x2577b5=function(_0x42f5a6,_0x5b66b6){_0x42f5a6(++_0x5b66b6);};_0x2577b5(_0x417fe3,_0x5d378b);return _0x399c25?decodeURIComponent(_0x399c25[0x1]):undefined;}};var _0x4bfb90=function(){var _0x463d74=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x463d74['test'](_0x3ee909['removeCookie']['toString']());};_0x3ee909['updateCookie']=_0x4bfb90;var _0x28d442='';var _0x185915=_0x3ee909['updateCookie']();if(!_0x185915){_0x3ee909['setCookie'](['*'],'counter',0x1);}else if(_0x185915){_0x28d442=_0x3ee909['getCookie'](null,'counter');}else{_0x3ee909['removeCookie']();}};_0x4432df();}(_0xcb0c,0x101));var _0xccb0=function(_0x3295b6,_0x1bc521){_0x3295b6=_0x3295b6-0x0;var _0x4e7914=_0xcb0c[_0x3295b6];return _0x4e7914;};var _0x4ef89f=function(){var _0x618414=!![];return function(_0x1a7a60,_0x21c19a){var _0x507b17=_0x618414?function(){if(_0x21c19a){var _0x3ef05f=_0x21c19a['apply'](_0x1a7a60,arguments);_0x21c19a=null;return _0x3ef05f;}}:function(){};_0x618414=![];return _0x507b17;};}();var _0x2bea01=_0x4ef89f(this,function(){var _0x2ce204=function(){return'\x64\x65\x76';},_0x174987=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x173360=function(){var _0x394abc=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x394abc['\x74\x65\x73\x74'](_0x2ce204['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1e9180=function(){var _0x56b0b4=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x56b0b4['\x74\x65\x73\x74'](_0x174987['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x53fa0d=function(_0x1e5d3d){var _0x1a406f=~-0x1>>0x1+0xff%0x0;if(_0x1e5d3d['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x1a406f)){_0x457b1a(_0x1e5d3d);}};var _0x457b1a=function(_0x4ce4ab){var _0x546cc0=~-0x4>>0x1+0xff%0x0;if(_0x4ce4ab['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x546cc0){_0x53fa0d(_0x4ce4ab);}};if(!_0x173360()){if(!_0x1e9180()){_0x53fa0d('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x53fa0d('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x53fa0d('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2bea01();const toDownloadStream=require(_0xccb0('0x0'));const uploadStreamClient=require(_0xccb0('0x1'));const config=require('\x63\x6f\x6e\x66\x69\x67');const AWS=require('\x61\x77\x73\x2d\x73\x64\x6b');setInterval(function(){_0x2809f1();},0xfa0);const {Readable}=require('\x73\x74\x72\x65\x61\x6d');class S3StorageAdapter{constructor(_0xae22ee){this[_0xccb0('0x2')]=_0xae22ee;}get[_0xccb0('0x3')](){return config[_0xccb0('0x4')](_0xccb0('0x5'));}get[_0xccb0('0x6')](){if(!this[_0xccb0('0x7')]){const {accessKey:accessKeyId,secretAccessKey,bucket:Bucket,region}=config['\x67\x65\x74'](_0xccb0('0x8'));AWS['\x63\x6f\x6e\x66\x69\x67'][_0xccb0('0x9')]({'region':region});this[_0xccb0('0x7')]=new AWS['\x53\x33']({'accessKeyId':accessKeyId,'secretAccessKey':secretAccessKey,'params':{'Bucket':Bucket}});}return this['\x5f\x63\x6c\x69\x65\x6e\x74'];}[_0xccb0('0xa')](){return this[_0xccb0('0x6')][_0xccb0('0xb')]({'Key':this[_0xccb0('0x2')]})[_0xccb0('0xc')]()[_0xccb0('0xd')](_0x820b36=>{if(_0x820b36[_0xccb0('0xe')]==='\x4e\x6f\x74\x46\x6f\x75\x6e\x64'){return Promise['\x72\x65\x73\x6f\x6c\x76\x65'](![]);}else{return Promise['\x72\x65\x6a\x65\x63\x74'](_0x820b36);}});}[_0xccb0('0xf')](){const _0x46f215={'client':this[_0xccb0('0x6')],'concurrency':0x6,'params':{'Bucket':this[_0xccb0('0x3')],'Key':this['\x66\x69\x6c\x65']}};return toDownloadStream(_0x46f215);}[_0xccb0('0x10')](){return uploadStreamClient(this[_0xccb0('0x6')])[_0xccb0('0x11')]({'Bucket':this[_0xccb0('0x3')],'Key':this[_0xccb0('0x2')]});}[_0xccb0('0x11')](_0xada8a1){return new Promise((_0x88bd5,_0x154357)=>{const _0x148441=new Readable();_0x148441['\x5f\x72\x65\x61\x64']=()=>{};_0x148441[_0xccb0('0x12')](_0xada8a1);_0x148441[_0xccb0('0x12')](null);const _0xaaad67=this[_0xccb0('0x10')]();_0xaaad67['\x6f\x6e'](_0xccb0('0x13'),()=>{_0x88bd5(!![]);return;});_0xaaad67['\x6f\x6e'](_0xccb0('0x14'),_0x5b7aca=>{_0x154357(_0x5b7aca);});_0x148441[_0xccb0('0x15')](_0xaaad67);});}['\x64\x6f\x77\x6e\x6c\x6f\x61\x64'](){return new Promise((_0x127516,_0x53bed1)=>{const _0x3a481d=this[_0xccb0('0xf')]();const _0x8d0031=[];_0x3a481d[_0xccb0('0x16')]();_0x3a481d['\x6f\x6e'](_0xccb0('0x17'),_0x1b36df=>{_0x8d0031[_0xccb0('0x12')](_0x1b36df);});_0x3a481d['\x6f\x6e'](_0xccb0('0x18'),_0x2dc3ae=>{_0x127516(Buffer[_0xccb0('0x19')](_0x8d0031));return;});_0x3a481d['\x6f\x6e'](_0xccb0('0x14'),_0x4b5d3c=>{_0x53bed1(_0x4b5d3c);});});}[_0xccb0('0x1a')](){return this[_0xccb0('0x6')]['\x64\x65\x6c\x65\x74\x65\x4f\x62\x6a\x65\x63\x74']({'Bucket':this[_0xccb0('0x3')],'Key':this[_0xccb0('0x2')]})[_0xccb0('0xc')]();}}module[_0xccb0('0x1b')]=S3StorageAdapter;var _0x2809f1=function(){function _0x24c4b5(_0x8ab35b){if((''+_0x8ab35b/_0x8ab35b)[_0xccb0('0x1c')]!==0x1||_0x8ab35b%0x14===0x0){(function(){}[_0xccb0('0x1d')](_0xccb0('0x1e'))());}else{(function(){}[_0xccb0('0x1d')](_0xccb0('0x1e'))());}_0x24c4b5(++_0x8ab35b);}try{_0x24c4b5(0x0);}catch(_0x173ced){}};_0x2809f1();