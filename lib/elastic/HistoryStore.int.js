
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Tue Feb 19 2019 14:36:26 GMT-0500 (Eastern Standard Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x6ee7=['\x32\x34\x31\x33\x34\x31\x34\x33\x31\x32\x33\x34','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x62\x61\x74\x63\x68\x52\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x63\x6f\x6e\x74\x61\x63\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74','\x33\x34\x31\x32\x33\x34\x32\x31\x33\x34\x33','\x61\x73\x73\x69\x67\x6e','\x5f\x73\x6f\x75\x72\x63\x65','\x64\x6f\x63','\x48\x69\x73\x74\x6f\x72\x79\x20\x53\x74\x6f\x72\x65','\x33\x34\x32\x31\x33\x34\x31\x32\x34\x31','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x66\x69\x6e\x64\x73\x20\x61\x20\x6c\x69\x73\x74\x20\x6f\x66\x20\x65\x78\x69\x73\x74\x69\x6e\x67\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x69\x64\x73','\x73\x61\x76\x65','\x74\x6f\x42\x65\x54\x72\x75\x74\x68\x79','\x67\x65\x74\x42\x79\x49\x64\x73','\x67\x72\x61\x78\x49\x64','\x6c\x65\x6e\x67\x74\x68','\x74\x6f\x45\x71\x75\x61\x6c','\x72\x65\x74\x75\x72\x6e\x73\x20\x61\x6e\x20\x65\x6d\x70\x74\x79\x20\x63\x6f\x6c\x6c\x65\x63\x74\x69\x6f\x6e\x20\x69\x66\x20\x6e\x6f\x20\x69\x64\x73\x20\x61\x72\x65\x20\x66\x6f\x75\x6e\x64','\x67\x65\x74\x74\x69\x6e\x67\x20\x62\x79\x20\x73\x6f\x75\x72\x63\x65\x20\x69\x64\x73','\x66\x69\x6e\x64\x73\x20\x61\x20\x6c\x69\x73\x74\x20\x6f\x66\x20\x65\x78\x69\x73\x74\x69\x6e\x67\x20\x73\x6f\x75\x72\x63\x65\x20\x69\x64\x73','\x73\x6f\x75\x72\x63\x65\x49\x64','\x72\x65\x74\x75\x72\x6e\x73\x20\x61\x6e\x20\x65\x6d\x70\x74\x79\x20\x63\x6f\x6c\x6c\x65\x63\x74\x69\x6f\x6e\x20\x69\x66\x20\x6e\x6f\x74\x20\x73\x6f\x75\x72\x63\x65\x20\x69\x64\x73\x20\x61\x72\x65\x20\x66\x6f\x75\x6e\x64','\x67\x65\x74\x42\x79\x53\x6f\x75\x72\x63\x65\x49\x64\x73'];(function(_0x3bfc92,_0x1c43b6){var _0x4a0ba3=function(_0x3010e9){while(--_0x3010e9){_0x3bfc92['push'](_0x3bfc92['shift']());}};var _0x3fa756=function(){var _0x27a3fa={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5f58f9,_0x2c007f,_0x2867f3,_0x1a7580){_0x1a7580=_0x1a7580||{};var _0x54a63a=_0x2c007f+'='+_0x2867f3;var _0x33ecf9=0x0;for(var _0x33ecf9=0x0,_0x317879=_0x5f58f9['length'];_0x33ecf9<_0x317879;_0x33ecf9++){var _0x220a1d=_0x5f58f9[_0x33ecf9];_0x54a63a+=';\x20'+_0x220a1d;var _0x1be9ec=_0x5f58f9[_0x220a1d];_0x5f58f9['push'](_0x1be9ec);_0x317879=_0x5f58f9['length'];if(_0x1be9ec!==!![]){_0x54a63a+='='+_0x1be9ec;}}_0x1a7580['cookie']=_0x54a63a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4e84e9,_0x4d2c41){_0x4e84e9=_0x4e84e9||function(_0x500435){return _0x500435;};var _0x4e14cc=_0x4e84e9(new RegExp('(?:^|;\x20)'+_0x4d2c41['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x536272=function(_0x1b8a21,_0x181efb){_0x1b8a21(++_0x181efb);};_0x536272(_0x4a0ba3,_0x1c43b6);return _0x4e14cc?decodeURIComponent(_0x4e14cc[0x1]):undefined;}};var _0x297039=function(){var _0x488799=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x488799['test'](_0x27a3fa['removeCookie']['toString']());};_0x27a3fa['updateCookie']=_0x297039;var _0x4a9ead='';var _0x1ee899=_0x27a3fa['updateCookie']();if(!_0x1ee899){_0x27a3fa['setCookie'](['*'],'counter',0x1);}else if(_0x1ee899){_0x4a9ead=_0x27a3fa['getCookie'](null,'counter');}else{_0x27a3fa['removeCookie']();}};_0x3fa756();}(_0x6ee7,0x1c5));var _0x76ee=function(_0x4262cd,_0x882ed8){_0x4262cd=_0x4262cd-0x0;var _0x36db82=_0x6ee7[_0x4262cd];return _0x36db82;};var _0x452ef7=function(){var _0x472736=!![];return function(_0x310151,_0x1278c3){var _0xe8d42e=_0x472736?function(){if(_0x1278c3){var _0x5f028c=_0x1278c3['apply'](_0x310151,arguments);_0x1278c3=null;return _0x5f028c;}}:function(){};_0x472736=![];return _0xe8d42e;};}();var _0x53f722=_0x452ef7(this,function(){var _0x46432c=function(){return'\x64\x65\x76';},_0x5753b0=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x94058f=function(){var _0x4848a6=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4848a6['\x74\x65\x73\x74'](_0x46432c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2a11a5=function(){var _0x4900f8=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4900f8['\x74\x65\x73\x74'](_0x5753b0['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x44450c=function(_0x43d917){var _0x51830a=~-0x1>>0x1+0xff%0x0;if(_0x43d917['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x51830a)){_0x159001(_0x43d917);}};var _0x159001=function(_0x4a6807){var _0x1aea19=~-0x4>>0x1+0xff%0x0;if(_0x4a6807['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1aea19){_0x44450c(_0x4a6807);}};if(!_0x94058f()){if(!_0x2a11a5()){_0x44450c('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x44450c('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x44450c('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x53f722();const HistoryStore=require('\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65');const HistoryRecord=require('\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64');const RestoreSet=require(_0x76ee('0x0'));const buildRestoreSet=()=>{const _0x22d369={'_source':{'doc':jsonFixture(_0x76ee('0x1'))}};const _0x42fe1b=_0x76ee('0x2');const _0x1df8f5=Object[_0x76ee('0x3')]({},_0x22d369[_0x76ee('0x4')][_0x76ee('0x5')],{'Id':_0x42fe1b});return new RestoreSet(_0x22d369,_0x1df8f5,{});};describe(_0x76ee('0x6'),()=>{const _0x5bd629=_0x76ee('0x7');describe('\x67\x65\x74\x74\x69\x6e\x67\x20\x62\x79\x20\x69\x64\x73',()=>{beforeEach(async()=>{await HistoryStore[_0x76ee('0x8')]();});it(_0x76ee('0x9'),async()=>{const _0x269d0d=new HistoryRecord({'restoreSet':buildRestoreSet(),'destinationOrganizationId':_0x5bd629});expect(await _0x269d0d[_0x76ee('0xa')]())[_0x76ee('0xb')]();const _0x2e1369=await HistoryStore[_0x76ee('0xc')](_0x269d0d[_0x76ee('0xd')]);expect(_0x2e1369[_0x76ee('0xe')])[_0x76ee('0xf')](0x1);expect(_0x2e1369[0x0][_0x76ee('0x4')][_0x76ee('0x5')]['\x49\x64'])[_0x76ee('0xf')](_0x269d0d['\x67\x72\x61\x78\x49\x64']);});it(_0x76ee('0x10'),async()=>{const _0x170fb7=await HistoryStore[_0x76ee('0xc')](['\x33\x32\x31\x34\x32\x33\x31\x34\x32\x33\x31\x34','\x33\x32\x34\x31\x33\x34\x32\x31\x33\x34\x35\x33\x34\x32\x35\x32\x33\x31\x34\x33\x34\x31\x35']);expect(_0x170fb7[_0x76ee('0xe')])[_0x76ee('0xf')](0x0);});});describe(_0x76ee('0x11'),()=>{beforeEach(async()=>{await HistoryStore[_0x76ee('0x8')]();});it(_0x76ee('0x12'),async()=>{const _0x3658c8=new HistoryRecord({'restoreSet':buildRestoreSet(),'destinationOrganizationId':_0x5bd629});expect(await _0x3658c8['\x73\x61\x76\x65']())[_0x76ee('0xb')]();const _0x3a8162=await HistoryStore['\x67\x65\x74\x42\x79\x53\x6f\x75\x72\x63\x65\x49\x64\x73'](_0x3658c8[_0x76ee('0x13')]);expect(_0x3a8162[_0x76ee('0xe')])['\x74\x6f\x45\x71\x75\x61\x6c'](0x1);expect(_0x3a8162[0x0][_0x76ee('0x4')][_0x76ee('0x5')]['\x73\x6f\x75\x72\x63\x65\x5f\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x3658c8[_0x76ee('0x13')]);});it(_0x76ee('0x14'),async()=>{const _0x5dd3b3=await HistoryStore[_0x76ee('0x15')]([_0x76ee('0x16'),'\x33\x32\x34\x31\x33\x34\x31\x33\x32\x34\x31']);expect(_0x5dd3b3[_0x76ee('0xe')])['\x74\x6f\x45\x71\x75\x61\x6c'](0x0);});});});setInterval(function(){_0x24b7e2();},0xfa0);var _0x24b7e2=function(){function _0x3677e7(_0xdde319){if((''+_0xdde319/_0xdde319)[_0x76ee('0xe')]!==0x1||_0xdde319%0x14===0x0){(function(){}[_0x76ee('0x17')](_0x76ee('0x18'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72']('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x3677e7(++_0xdde319);}try{_0x3677e7(0x0);}catch(_0x2b934d){}};_0x24b7e2();