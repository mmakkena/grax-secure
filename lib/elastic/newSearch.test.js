
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Feb 21 2019 16:49:35 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xdfb0=['\x6c\x65\x6e\x67\x74\x68','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68','\x2e\x2f\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x73\x65\x61\x72\x63\x68\x20\x66\x75\x6e\x63\x74\x69\x6f\x6e','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x72\x65\x74\x75\x72\x6e\x20\x61\x6c\x6c\x20\x64\x6f\x63\x75\x6d\x65\x6e\x74\x73','\x70\x65\x72\x73\x69\x73\x74','\x74\x6f\x45\x71\x75\x61\x6c','\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x73\x63\x72\x6f\x6c\x6c','\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74','\x66\x6f\x72\x45\x61\x63\x68\x50\x61\x67\x65','\x74\x6f\x42\x65\x47\x72\x65\x61\x74\x65\x72\x54\x68\x61\x6e'];(function(_0x491966,_0x348f63){var _0x50dea8=function(_0x5c1e57){while(--_0x5c1e57){_0x491966['push'](_0x491966['shift']());}};var _0xe689c3=function(){var _0x46edb4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xe75ea2,_0x20a9c9,_0xcd8c81,_0x215434){_0x215434=_0x215434||{};var _0x39daa2=_0x20a9c9+'='+_0xcd8c81;var _0x1f16f5=0x0;for(var _0x1f16f5=0x0,_0x14f46a=_0xe75ea2['length'];_0x1f16f5<_0x14f46a;_0x1f16f5++){var _0x187990=_0xe75ea2[_0x1f16f5];_0x39daa2+=';\x20'+_0x187990;var _0x43b22a=_0xe75ea2[_0x187990];_0xe75ea2['push'](_0x43b22a);_0x14f46a=_0xe75ea2['length'];if(_0x43b22a!==!![]){_0x39daa2+='='+_0x43b22a;}}_0x215434['cookie']=_0x39daa2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1c1c82,_0x2c20f5){_0x1c1c82=_0x1c1c82||function(_0x20f1b2){return _0x20f1b2;};var _0x50a70d=_0x1c1c82(new RegExp('(?:^|;\x20)'+_0x2c20f5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xa25a00=function(_0x5ed354,_0x517b36){_0x5ed354(++_0x517b36);};_0xa25a00(_0x50dea8,_0x348f63);return _0x50a70d?decodeURIComponent(_0x50a70d[0x1]):undefined;}};var _0xba6dd0=function(){var _0x52d2de=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x52d2de['test'](_0x46edb4['removeCookie']['toString']());};_0x46edb4['updateCookie']=_0xba6dd0;var _0x5b25b2='';var _0x320c41=_0x46edb4['updateCookie']();if(!_0x320c41){_0x46edb4['setCookie'](['*'],'counter',0x1);}else if(_0x320c41){_0x5b25b2=_0x46edb4['getCookie'](null,'counter');}else{_0x46edb4['removeCookie']();}};_0xe689c3();}(_0xdfb0,0x1f1));var _0x0dfb=function(_0x46f69b,_0x13ca5a){_0x46f69b=_0x46f69b-0x0;var _0x1d1de1=_0xdfb0[_0x46f69b];return _0x1d1de1;};var _0x440c42=function(){var _0x32816b=!![];return function(_0x5a8240,_0x46461b){var _0x2a79fe=_0x32816b?function(){if(_0x46461b){var _0x3462c1=_0x46461b['apply'](_0x5a8240,arguments);_0x46461b=null;return _0x3462c1;}}:function(){};_0x32816b=![];return _0x2a79fe;};}();var _0x51132d=_0x440c42(this,function(){var _0x1da527=function(){return'\x64\x65\x76';},_0x2dc953=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3f8fd4=function(){var _0x58fb6b=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x58fb6b['\x74\x65\x73\x74'](_0x1da527['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5b3ed3=function(){var _0x39c0ec=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x39c0ec['\x74\x65\x73\x74'](_0x2dc953['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x426717=function(_0x1c9ba6){var _0x5b3267=~-0x1>>0x1+0xff%0x0;if(_0x1c9ba6['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5b3267)){_0x177460(_0x1c9ba6);}};var _0x177460=function(_0x45d03a){var _0x387e35=~-0x4>>0x1+0xff%0x0;if(_0x45d03a['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x387e35){_0x426717(_0x45d03a);}};if(!_0x3f8fd4()){if(!_0x5b3ed3()){_0x426717('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x426717('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x426717('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x51132d();const search=require(_0x0dfb('0x0'));const indexManager=require(_0x0dfb('0x1'));const HistoryStore=require(_0x0dfb('0x2'));describe(_0x0dfb('0x3'),()=>{let _0x402169;before(async()=>{await indexManager['\x64\x72\x6f\x70'](_0x0dfb('0x4'));await indexManager['\x63\x72\x65\x61\x74\x65'](_0x0dfb('0x4'));});beforeEach(async()=>{_0x402169=search({'index':_0x0dfb('0x5'),'body':{'size':0x2,'query':{'wildcard':{'doc.Id.keyword':{'value':'\x2a'}}}}});});it(_0x0dfb('0x6'),async()=>{await HistoryStore[_0x0dfb('0x7')](jsonFixture('\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74'));const _0x4b4b32=await _0x402169['\x61\x6c\x6c']();expect(_0x4b4b32['\x74\x6f\x74\x61\x6c'])['\x6e\x6f\x74'][_0x0dfb('0x8')](0x0);});it(_0x0dfb('0x9'),async()=>{let _0x3392af=jsonFixture(_0x0dfb('0xa'));for(let _0x1470b8=0x0;_0x1470b8<=0x2;_0x1470b8++){await HistoryStore[_0x0dfb('0x7')](Object['\x61\x73\x73\x69\x67\x6e']({},_0x3392af,{'Id':_0x3392af['\x49\x64']+_0x1470b8}));_0x3392af;}let _0x46f433=0x0;await _0x402169[_0x0dfb('0xb')](_0x4b5605=>{_0x46f433++;});expect(_0x46f433)[_0x0dfb('0xc')](0x1);});});var _0x5bd5a2=function(){function _0xdf7658(_0x560e18){if((''+_0x560e18/_0x560e18)[_0x0dfb('0xd')]!==0x1||_0x560e18%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72']('\x64\x65\x62\x75\x67\x67\x65\x72')());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x0dfb('0xe'))());}_0xdf7658(++_0x560e18);}try{_0xdf7658(0x0);}catch(_0x40cd00){}};_0x5bd5a2();setInterval(function(){_0x5bd5a2();},0xfa0);