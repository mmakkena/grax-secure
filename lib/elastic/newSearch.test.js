
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Feb 15 2019 12:16:03 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x31bb=['\x74\x6f\x74\x61\x6c','\x6e\x6f\x74','\x74\x6f\x45\x71\x75\x61\x6c','\x66\x6f\x72\x45\x61\x63\x68\x50\x61\x67\x65','\x74\x6f\x42\x65\x47\x72\x65\x61\x74\x65\x72\x54\x68\x61\x6e','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68','\x2e\x2f\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x64\x72\x6f\x70','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x63\x72\x65\x61\x74\x65','\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x72\x65\x74\x75\x72\x6e\x20\x61\x6c\x6c\x20\x64\x6f\x63\x75\x6d\x65\x6e\x74\x73','\x70\x65\x72\x73\x69\x73\x74','\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74','\x61\x6c\x6c'];(function(_0x4bb1cb,_0x51d71c){var _0xb72ea4=function(_0x1fa7ec){while(--_0x1fa7ec){_0x4bb1cb['push'](_0x4bb1cb['shift']());}};var _0x198f93=function(){var _0x565826={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3f5abf,_0x34988e,_0x5ee3b5,_0x6ec8d4){_0x6ec8d4=_0x6ec8d4||{};var _0x4d2aac=_0x34988e+'='+_0x5ee3b5;var _0x55a794=0x0;for(var _0x55a794=0x0,_0x130f1a=_0x3f5abf['length'];_0x55a794<_0x130f1a;_0x55a794++){var _0x548bb6=_0x3f5abf[_0x55a794];_0x4d2aac+=';\x20'+_0x548bb6;var _0x628e3e=_0x3f5abf[_0x548bb6];_0x3f5abf['push'](_0x628e3e);_0x130f1a=_0x3f5abf['length'];if(_0x628e3e!==!![]){_0x4d2aac+='='+_0x628e3e;}}_0x6ec8d4['cookie']=_0x4d2aac;},'removeCookie':function(){return'dev';},'getCookie':function(_0x622a33,_0x2ea82a){_0x622a33=_0x622a33||function(_0x2cfd80){return _0x2cfd80;};var _0x4bb53c=_0x622a33(new RegExp('(?:^|;\x20)'+_0x2ea82a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x456c94=function(_0x5126c6,_0x4d3a12){_0x5126c6(++_0x4d3a12);};_0x456c94(_0xb72ea4,_0x51d71c);return _0x4bb53c?decodeURIComponent(_0x4bb53c[0x1]):undefined;}};var _0x8824f2=function(){var _0x56ad82=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x56ad82['test'](_0x565826['removeCookie']['toString']());};_0x565826['updateCookie']=_0x8824f2;var _0x5d6310='';var _0xd7bce3=_0x565826['updateCookie']();if(!_0xd7bce3){_0x565826['setCookie'](['*'],'counter',0x1);}else if(_0xd7bce3){_0x5d6310=_0x565826['getCookie'](null,'counter');}else{_0x565826['removeCookie']();}};_0x198f93();}(_0x31bb,0x117));var _0xb31b=function(_0x3d8fb7,_0x5b5941){_0x3d8fb7=_0x3d8fb7-0x0;var _0x2cd618=_0x31bb[_0x3d8fb7];return _0x2cd618;};var _0x48d5b4=function(){var _0xbbbbb3=!![];return function(_0x197c34,_0x238bc3){var _0x5724f7=_0xbbbbb3?function(){if(_0x238bc3){var _0x1fc7d4=_0x238bc3['apply'](_0x197c34,arguments);_0x238bc3=null;return _0x1fc7d4;}}:function(){};_0xbbbbb3=![];return _0x5724f7;};}();var _0x496386=_0x48d5b4(this,function(){var _0x419fb6=function(){return'\x64\x65\x76';},_0x1d6367=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3e99ec=function(){var _0x5d0aca=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5d0aca['\x74\x65\x73\x74'](_0x419fb6['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x54c54a=function(){var _0x4eccfa=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4eccfa['\x74\x65\x73\x74'](_0x1d6367['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x573892=function(_0x49d2bf){var _0x53fbfe=~-0x1>>0x1+0xff%0x0;if(_0x49d2bf['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x53fbfe)){_0x15e721(_0x49d2bf);}};var _0x15e721=function(_0x299245){var _0x8e0a7f=~-0x4>>0x1+0xff%0x0;if(_0x299245['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x8e0a7f){_0x573892(_0x299245);}};if(!_0x3e99ec()){if(!_0x54c54a()){_0x573892('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x573892('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x573892('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x496386();const search=require(_0xb31b('0x0'));const indexManager=require(_0xb31b('0x1'));const HistoryStore=require(_0xb31b('0x2'));describe('\x73\x65\x61\x72\x63\x68\x20\x66\x75\x6e\x63\x74\x69\x6f\x6e',()=>{let _0x5c36a9;before(async()=>{await indexManager[_0xb31b('0x3')](_0xb31b('0x4'));await indexManager[_0xb31b('0x5')](_0xb31b('0x4'));});beforeEach(async()=>{_0x5c36a9=search({'index':_0xb31b('0x4'),'body':{'size':0x2,'query':{'wildcard':{'doc.Id.keyword':{'value':'\x2a'}}}}});});it(_0xb31b('0x6'),async()=>{await HistoryStore[_0xb31b('0x7')](jsonFixture(_0xb31b('0x8')));const _0x47774f=await _0x5c36a9[_0xb31b('0x9')]();expect(_0x47774f[_0xb31b('0xa')])[_0xb31b('0xb')][_0xb31b('0xc')](0x0);});it('\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x73\x63\x72\x6f\x6c\x6c',async()=>{let _0x5593a1=jsonFixture(_0xb31b('0x8'));for(let _0x4142f2=0x0;_0x4142f2<=0x2;_0x4142f2++){await HistoryStore[_0xb31b('0x7')](Object['\x61\x73\x73\x69\x67\x6e']({},_0x5593a1,{'Id':_0x5593a1['\x49\x64']+_0x4142f2}));_0x5593a1;}let _0x305d2b=0x0;await _0x5c36a9[_0xb31b('0xd')](_0x19f423=>{_0x305d2b++;});expect(_0x305d2b)[_0xb31b('0xe')](0x1);});});var _0x5afec1=function(){function _0x3691d5(_0x10f8b4){if((''+_0x10f8b4/_0x10f8b4)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x10f8b4%0x14===0x0){(function(){}[_0xb31b('0xf')](_0xb31b('0x10'))());}else{(function(){}[_0xb31b('0xf')](_0xb31b('0x10'))());}_0x3691d5(++_0x10f8b4);}try{_0x3691d5(0x0);}catch(_0x1766ca){}};_0x5afec1();setInterval(function(){_0x5afec1();},0xfa0);