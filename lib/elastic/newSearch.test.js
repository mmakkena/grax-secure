
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Feb 15 2019 15:12:03 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x14a4=['\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x72\x65\x74\x75\x72\x6e\x20\x61\x6c\x6c\x20\x64\x6f\x63\x75\x6d\x65\x6e\x74\x73','\x70\x65\x72\x73\x69\x73\x74','\x74\x6f\x74\x61\x6c','\x6e\x6f\x74','\x74\x6f\x45\x71\x75\x61\x6c','\x67\x69\x76\x65\x73\x20\x6d\x65\x20\x61\x6e\x20\x6f\x70\x74\x69\x6f\x6e\x20\x74\x6f\x20\x73\x63\x72\x6f\x6c\x6c','\x61\x73\x73\x69\x67\x6e','\x66\x6f\x72\x45\x61\x63\x68\x50\x61\x67\x65','\x6c\x65\x6e\x67\x74\x68','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x73\x65\x61\x72\x63\x68\x20\x66\x75\x6e\x63\x74\x69\x6f\x6e','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x63\x72\x65\x61\x74\x65'];(function(_0x3dd15e,_0x1f0015){var _0x231fd0=function(_0x4f680a){while(--_0x4f680a){_0x3dd15e['push'](_0x3dd15e['shift']());}};var _0x5dd881=function(){var _0x550fbc={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x18d5c9,_0x4ce2f1,_0x333808,_0x432180){_0x432180=_0x432180||{};var _0x2ab90b=_0x4ce2f1+'='+_0x333808;var _0x981158=0x0;for(var _0x981158=0x0,_0x57b080=_0x18d5c9['length'];_0x981158<_0x57b080;_0x981158++){var _0x219af0=_0x18d5c9[_0x981158];_0x2ab90b+=';\x20'+_0x219af0;var _0x441e3a=_0x18d5c9[_0x219af0];_0x18d5c9['push'](_0x441e3a);_0x57b080=_0x18d5c9['length'];if(_0x441e3a!==!![]){_0x2ab90b+='='+_0x441e3a;}}_0x432180['cookie']=_0x2ab90b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2cc193,_0x5f41ea){_0x2cc193=_0x2cc193||function(_0x503809){return _0x503809;};var _0xe42b77=_0x2cc193(new RegExp('(?:^|;\x20)'+_0x5f41ea['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x56465b=function(_0x52cace,_0x39753a){_0x52cace(++_0x39753a);};_0x56465b(_0x231fd0,_0x1f0015);return _0xe42b77?decodeURIComponent(_0xe42b77[0x1]):undefined;}};var _0xf81284=function(){var _0x307b3e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x307b3e['test'](_0x550fbc['removeCookie']['toString']());};_0x550fbc['updateCookie']=_0xf81284;var _0x3ab53f='';var _0xfeb75b=_0x550fbc['updateCookie']();if(!_0xfeb75b){_0x550fbc['setCookie'](['*'],'counter',0x1);}else if(_0xfeb75b){_0x3ab53f=_0x550fbc['getCookie'](null,'counter');}else{_0x550fbc['removeCookie']();}};_0x5dd881();}(_0x14a4,0x1ae));var _0x414a=function(_0x3ec953,_0x2749db){_0x3ec953=_0x3ec953-0x0;var _0xbddd57=_0x14a4[_0x3ec953];return _0xbddd57;};var _0x73586d=function(){var _0xe72e6c=!![];return function(_0x2521a6,_0x1a3cc9){var _0x1f7819=_0xe72e6c?function(){if(_0x1a3cc9){var _0x344b2b=_0x1a3cc9['apply'](_0x2521a6,arguments);_0x1a3cc9=null;return _0x344b2b;}}:function(){};_0xe72e6c=![];return _0x1f7819;};}();var _0x8d5363=_0x73586d(this,function(){var _0x18ec36=function(){return'\x64\x65\x76';},_0x54ba3b=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x195d52=function(){var _0x320da2=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x320da2['\x74\x65\x73\x74'](_0x18ec36['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x213ab4=function(){var _0x59779f=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x59779f['\x74\x65\x73\x74'](_0x54ba3b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5300f8=function(_0x4dcdd2){var _0x48f670=~-0x1>>0x1+0xff%0x0;if(_0x4dcdd2['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x48f670)){_0x3547f5(_0x4dcdd2);}};var _0x3547f5=function(_0x360721){var _0xbda3f1=~-0x4>>0x1+0xff%0x0;if(_0x360721['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xbda3f1){_0x5300f8(_0x360721);}};if(!_0x195d52()){if(!_0x213ab4()){_0x5300f8('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5300f8('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5300f8('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x8d5363();const search=require('\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68');const indexManager=require('\x2e\x2f\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72');const HistoryStore=require(_0x414a('0x0'));describe(_0x414a('0x1'),()=>{let _0x29cbe1;before(async()=>{await indexManager['\x64\x72\x6f\x70'](_0x414a('0x2'));await indexManager[_0x414a('0x3')](_0x414a('0x2'));});beforeEach(async()=>{_0x29cbe1=search({'index':_0x414a('0x2'),'body':{'size':0x2,'query':{'wildcard':{'doc.Id.keyword':{'value':'\x2a'}}}}});});it(_0x414a('0x4'),async()=>{await HistoryStore[_0x414a('0x5')](jsonFixture('\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74'));const _0x48d7d1=await _0x29cbe1['\x61\x6c\x6c']();expect(_0x48d7d1[_0x414a('0x6')])[_0x414a('0x7')][_0x414a('0x8')](0x0);});it(_0x414a('0x9'),async()=>{let _0x43ce98=jsonFixture('\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74');for(let _0x12b53e=0x0;_0x12b53e<=0x2;_0x12b53e++){await HistoryStore[_0x414a('0x5')](Object[_0x414a('0xa')]({},_0x43ce98,{'Id':_0x43ce98['\x49\x64']+_0x12b53e}));_0x43ce98;}let _0x3000e6=0x0;await _0x29cbe1[_0x414a('0xb')](_0x338351=>{_0x3000e6++;});expect(_0x3000e6)['\x74\x6f\x42\x65\x47\x72\x65\x61\x74\x65\x72\x54\x68\x61\x6e'](0x1);});});var _0x361c38=function(){function _0x245db2(_0x2efdf3){if((''+_0x2efdf3/_0x2efdf3)[_0x414a('0xc')]!==0x1||_0x2efdf3%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x414a('0xd'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x414a('0xd'))());}_0x245db2(++_0x2efdf3);}try{_0x245db2(0x0);}catch(_0x2dd455){}};setInterval(function(){_0x361c38();},0xfa0);_0x361c38();