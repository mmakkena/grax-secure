
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Tue Feb 19 2019 14:06:23 GMT-0500 (Eastern Standard Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x102b=['\x2e\x2f\x67\x65\x74\x43\x6c\x69\x65\x6e\x74','\x2e\x2f\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x2e\x2f\x69\x6e\x64\x65\x78\x69\x66\x79','\x2e\x2f\x74\x79\x70\x69\x66\x79','\x2e\x2e\x2f\x75\x74\x69\x6c\x2f\x63\x6f\x6d\x70\x75\x74\x65\x47\x72\x61\x78\x49\x64','\x63\x6c\x69\x65\x6e\x74','\x5f\x63\x6c\x69\x65\x6e\x74','\x69\x6e\x64\x65\x78\x4e\x61\x6d\x65','\x67\x65\x74\x42\x79\x49\x64\x73','\x61\x6c\x6c','\x67\x65\x74\x42\x79\x47\x72\x61\x78\x49\x64\x73','\x73\x65\x61\x72\x63\x68','\x61\x73\x73\x69\x67\x6e','\x70\x65\x72\x73\x69\x73\x74','\x69\x6e\x64\x65\x78','\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x64\x72\x6f\x70','\x63\x72\x65\x61\x74\x65','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x65\x78\x70\x6f\x72\x74\x73','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68','\x2e\x2e\x2f\x75\x74\x69\x6c\x2f\x6d\x61\x6b\x65\x41\x72\x72\x61\x79'];(function(_0x1f530d,_0x18a19e){var _0x22103f=function(_0x2664c5){while(--_0x2664c5){_0x1f530d['push'](_0x1f530d['shift']());}};var _0x55113e=function(){var _0x90610={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5d4ee0,_0x5c9b66,_0x31cade,_0xb981db){_0xb981db=_0xb981db||{};var _0x2b42cd=_0x5c9b66+'='+_0x31cade;var _0x11d758=0x0;for(var _0x11d758=0x0,_0x49224a=_0x5d4ee0['length'];_0x11d758<_0x49224a;_0x11d758++){var _0x123d0c=_0x5d4ee0[_0x11d758];_0x2b42cd+=';\x20'+_0x123d0c;var _0x1b3546=_0x5d4ee0[_0x123d0c];_0x5d4ee0['push'](_0x1b3546);_0x49224a=_0x5d4ee0['length'];if(_0x1b3546!==!![]){_0x2b42cd+='='+_0x1b3546;}}_0xb981db['cookie']=_0x2b42cd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x202126,_0x4e9ca6){_0x202126=_0x202126||function(_0x39bd38){return _0x39bd38;};var _0x492aa6=_0x202126(new RegExp('(?:^|;\x20)'+_0x4e9ca6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x35345d=function(_0x9c1513,_0x5092b3){_0x9c1513(++_0x5092b3);};_0x35345d(_0x22103f,_0x18a19e);return _0x492aa6?decodeURIComponent(_0x492aa6[0x1]):undefined;}};var _0x47e7a1=function(){var _0x49e9fc=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x49e9fc['test'](_0x90610['removeCookie']['toString']());};_0x90610['updateCookie']=_0x47e7a1;var _0x286140='';var _0x49b412=_0x90610['updateCookie']();if(!_0x49b412){_0x90610['setCookie'](['*'],'counter',0x1);}else if(_0x49b412){_0x286140=_0x90610['getCookie'](null,'counter');}else{_0x90610['removeCookie']();}};_0x55113e();}(_0x102b,0x9a));var _0xb102=function(_0x7aab16,_0x50f1fe){_0x7aab16=_0x7aab16-0x0;var _0x2aad0f=_0x102b[_0x7aab16];return _0x2aad0f;};var _0x2f3a5c=function(){var _0x3ff2f9=!![];return function(_0x544ba1,_0x3b0913){var _0x554288=_0x3ff2f9?function(){if(_0x3b0913){var _0x4cf8c5=_0x3b0913['apply'](_0x544ba1,arguments);_0x3b0913=null;return _0x4cf8c5;}}:function(){};_0x3ff2f9=![];return _0x554288;};}();var _0x1eb480=_0x2f3a5c(this,function(){var _0x440ae3=function(){return'\x64\x65\x76';},_0x129784=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x40b5fe=function(){var _0x44d268=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x44d268['\x74\x65\x73\x74'](_0x440ae3['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3cde2c=function(){var _0x6cd1c3=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x6cd1c3['\x74\x65\x73\x74'](_0x129784['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2273f3=function(_0x5af7f9){var _0x559baa=~-0x1>>0x1+0xff%0x0;if(_0x5af7f9['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x559baa)){_0x50f51f(_0x5af7f9);}};var _0x50f51f=function(_0x4a8a27){var _0xca6b07=~-0x4>>0x1+0xff%0x0;if(_0x4a8a27['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xca6b07){_0x2273f3(_0x4a8a27);}};if(!_0x40b5fe()){if(!_0x3cde2c()){_0x2273f3('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2273f3('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2273f3('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1eb480();const search=require(_0xb102('0x0'));const makeArray=require(_0xb102('0x1'));const getClient=require(_0xb102('0x2'));const indexManager=require(_0xb102('0x3'));const indexify=require(_0xb102('0x4'));setInterval(function(){_0x525f34();},0xfa0);const typify=require(_0xb102('0x5'));const computeGraxId=require(_0xb102('0x6'));class DataLakeIndexStore{constructor(_0x67d31a){this['\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65']=_0x67d31a;}get[_0xb102('0x7')](){if(!this[_0xb102('0x8')]){this[_0xb102('0x8')]=getClient();}return this[_0xb102('0x8')];}get[_0xb102('0x9')](){return indexify(this['\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65']);}async[_0xb102('0xa')](_0x5f325e,_0x53e821={}){let _0xee2164=makeArray(_0x5f325e);return await this['\x73\x65\x61\x72\x63\x68'](Object['\x61\x73\x73\x69\x67\x6e']({},{'body':{'size':0x1f4,'query':{'bool':{'must':{'terms':{'doc.Id.keyword':_0xee2164}}}}}},_0x53e821))[_0xb102('0xb')]();}async[_0xb102('0xc')](_0x482100,_0x45a4f8={}){let _0x38c5b8=makeArray(_0x482100);return await this[_0xb102('0xd')]({'body':{'size':0x1f4,'query':{'bool':Object[_0xb102('0xe')]({},{'must':{'terms':{'doc.graxid.keyword':_0x38c5b8}}},_0x45a4f8)}}})[_0xb102('0xb')]();}async[_0xb102('0xf')](_0x3d6aef){return this['\x63\x6c\x69\x65\x6e\x74'][_0xb102('0x10')]({'index':this['\x69\x6e\x64\x65\x78\x4e\x61\x6d\x65'],'type':typify(this[_0xb102('0x11')]),'id':computeGraxId({'id':_0x3d6aef['\x49\x64'],'organizationId':_0x3d6aef[_0xb102('0x12')]}),'refresh':!![],'body':{'doc':_0x3d6aef}});}async['\x64\x72\x6f\x70\x49\x6e\x64\x65\x78'](){return indexManager[_0xb102('0x13')](this[_0xb102('0x11')]);}async['\x63\x72\x65\x61\x74\x65\x49\x6e\x64\x65\x78'](){return indexManager[_0xb102('0x14')](this[_0xb102('0x11')]);}async[_0xb102('0x15')](){await this['\x64\x72\x6f\x70\x49\x6e\x64\x65\x78']();await this['\x63\x72\x65\x61\x74\x65\x49\x6e\x64\x65\x78']();}['\x73\x65\x61\x72\x63\x68'](_0x464cdf){return search(Object[_0xb102('0xe')]({'index':this[_0xb102('0x9')]},_0x464cdf));}}module[_0xb102('0x16')]=DataLakeIndexStore;var _0x525f34=function(){function _0x52c8c0(_0x58d1e4){if((''+_0x58d1e4/_0x58d1e4)[_0xb102('0x17')]!==0x1||_0x58d1e4%0x14===0x0){(function(){}[_0xb102('0x18')](_0xb102('0x19'))());}else{(function(){}[_0xb102('0x18')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x52c8c0(++_0x58d1e4);}try{_0x52c8c0(0x0);}catch(_0x57dc37){}};_0x525f34();