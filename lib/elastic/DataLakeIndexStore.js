
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Sun Apr 14 2019 12:02:41 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xc277=['\x64\x72\x6f\x70','\x63\x72\x65\x61\x74\x65\x49\x6e\x64\x65\x78','\x64\x65\x6c\x65\x74\x65\x42\x79\x51\x75\x65\x72\x79','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x65\x78\x70\x6f\x72\x74\x73','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68','\x2e\x2e\x2f\x75\x74\x69\x6c\x2f\x6d\x61\x6b\x65\x41\x72\x72\x61\x79','\x2e\x2f\x67\x65\x74\x43\x6c\x69\x65\x6e\x74','\x2e\x2f\x49\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x2e\x2f\x69\x6e\x64\x65\x78\x69\x66\x79','\x2e\x2f\x74\x79\x70\x69\x66\x79','\x63\x6c\x69\x65\x6e\x74','\x5f\x63\x6c\x69\x65\x6e\x74','\x69\x6e\x64\x65\x78\x4e\x61\x6d\x65','\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65','\x61\x73\x73\x69\x67\x6e','\x73\x65\x61\x72\x63\x68','\x61\x6c\x6c','\x70\x65\x72\x73\x69\x73\x74','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x64\x72\x6f\x70\x49\x6e\x64\x65\x78'];(function(_0x458590,_0x34878a){var _0xd4abc5=function(_0x4ae893){while(--_0x4ae893){_0x458590['push'](_0x458590['shift']());}};var _0x2a26e4=function(){var _0x24e9dd={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3651d4,_0x557c73,_0x2ba484,_0x1e6e0e){_0x1e6e0e=_0x1e6e0e||{};var _0x1395af=_0x557c73+'='+_0x2ba484;var _0x1bdf19=0x0;for(var _0x1bdf19=0x0,_0x40e682=_0x3651d4['length'];_0x1bdf19<_0x40e682;_0x1bdf19++){var _0x56668f=_0x3651d4[_0x1bdf19];_0x1395af+=';\x20'+_0x56668f;var _0x826f06=_0x3651d4[_0x56668f];_0x3651d4['push'](_0x826f06);_0x40e682=_0x3651d4['length'];if(_0x826f06!==!![]){_0x1395af+='='+_0x826f06;}}_0x1e6e0e['cookie']=_0x1395af;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1a091e,_0x4505b3){_0x1a091e=_0x1a091e||function(_0x261284){return _0x261284;};var _0x1eee61=_0x1a091e(new RegExp('(?:^|;\x20)'+_0x4505b3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5a6441=function(_0x4bc967,_0x37d35c){_0x4bc967(++_0x37d35c);};_0x5a6441(_0xd4abc5,_0x34878a);return _0x1eee61?decodeURIComponent(_0x1eee61[0x1]):undefined;}};var _0x24f57f=function(){var _0x4dd870=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4dd870['test'](_0x24e9dd['removeCookie']['toString']());};_0x24e9dd['updateCookie']=_0x24f57f;var _0x3c5fb7='';var _0x100d27=_0x24e9dd['updateCookie']();if(!_0x100d27){_0x24e9dd['setCookie'](['*'],'counter',0x1);}else if(_0x100d27){_0x3c5fb7=_0x24e9dd['getCookie'](null,'counter');}else{_0x24e9dd['removeCookie']();}};_0x2a26e4();}(_0xc277,0x98));var _0x7c27=function(_0x4022a8,_0xd4419f){_0x4022a8=_0x4022a8-0x0;var _0x3138e7=_0xc277[_0x4022a8];return _0x3138e7;};var _0x5c2475=function(){var _0x53f2fd=!![];return function(_0x5d1c08,_0x206ba8){var _0x2b13c5=_0x53f2fd?function(){if(_0x206ba8){var _0x1297a1=_0x206ba8['apply'](_0x5d1c08,arguments);_0x206ba8=null;return _0x1297a1;}}:function(){};_0x53f2fd=![];return _0x2b13c5;};}();var _0x597594=_0x5c2475(this,function(){var _0x2d52fe=function(){return'\x64\x65\x76';},_0x4d6fec=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5c68fa=function(){var _0x192c5a=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x192c5a['\x74\x65\x73\x74'](_0x2d52fe['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x30f598=function(){var _0x46a064=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x46a064['\x74\x65\x73\x74'](_0x4d6fec['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x377415=function(_0x205ede){var _0x418af9=~-0x1>>0x1+0xff%0x0;if(_0x205ede['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x418af9)){_0x501371(_0x205ede);}};var _0x501371=function(_0x5cb08e){var _0x583a65=~-0x4>>0x1+0xff%0x0;if(_0x5cb08e['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x583a65){_0x377415(_0x5cb08e);}};if(!_0x5c68fa()){if(!_0x30f598()){_0x377415('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x377415('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x377415('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x597594();const search=require(_0x7c27('0x0'));const makeArray=require(_0x7c27('0x1'));const getClient=require(_0x7c27('0x2'));const IndexManager=require(_0x7c27('0x3'));const indexify=require(_0x7c27('0x4'));const typify=require(_0x7c27('0x5'));const computeGraxId=require('\x2e\x2e\x2f\x75\x74\x69\x6c\x2f\x63\x6f\x6d\x70\x75\x74\x65\x47\x72\x61\x78\x49\x64');class DataLakeIndexStore{constructor(_0x110ef0){this['\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65']=_0x110ef0;}get[_0x7c27('0x6')](){if(!this[_0x7c27('0x7')]){this[_0x7c27('0x7')]=getClient();}return this['\x5f\x63\x6c\x69\x65\x6e\x74'];}get[_0x7c27('0x8')](){return indexify(this[_0x7c27('0x9')]);}async['\x67\x65\x74\x42\x79\x49\x64\x73'](_0x5a2b8c,_0x3a8b18={}){let _0x145d09=makeArray(_0x5a2b8c);return await this['\x73\x65\x61\x72\x63\x68'](Object[_0x7c27('0xa')]({},{'body':{'size':0x1f4,'query':{'bool':{'must':{'terms':{'doc.Id.keyword':_0x145d09}}}}}},_0x3a8b18))['\x61\x6c\x6c']();}async['\x67\x65\x74\x42\x79\x47\x72\x61\x78\x49\x64\x73'](_0x4acd58,_0x44c4a3={}){let _0x4e676c=makeArray(_0x4acd58);return await this[_0x7c27('0xb')]({'body':{'size':0x1f4,'query':{'bool':Object[_0x7c27('0xa')]({},{'must':{'terms':{'doc.graxid.keyword':_0x4e676c}}},_0x44c4a3)}}})[_0x7c27('0xc')]();}async[_0x7c27('0xd')](_0x445492){return this[_0x7c27('0x6')]['\x69\x6e\x64\x65\x78']({'index':this[_0x7c27('0x8')],'type':typify(this[_0x7c27('0x9')]),'id':computeGraxId({'id':_0x445492['\x49\x64'],'organizationId':_0x445492[_0x7c27('0xe')]}),'refresh':!![],'body':{'doc':_0x445492}});}async[_0x7c27('0xf')](){const _0x25038f=new IndexManager();return _0x25038f[_0x7c27('0x10')](this[_0x7c27('0x9')]);}async[_0x7c27('0x11')](){const _0x5308ac=new IndexManager();return _0x5308ac['\x63\x72\x65\x61\x74\x65'](this['\x6f\x62\x6a\x65\x63\x74\x54\x79\x70\x65']);}async['\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78'](){await this[_0x7c27('0xf')]();await this[_0x7c27('0x11')]();}[_0x7c27('0xb')](_0x4b69b2){return search(Object[_0x7c27('0xa')]({'index':this['\x69\x6e\x64\x65\x78\x4e\x61\x6d\x65']},_0x4b69b2));}async[_0x7c27('0x12')](_0xe091e8){return this['\x63\x6c\x69\x65\x6e\x74']['\x64\x65\x6c\x65\x74\x65\x42\x79\x51\x75\x65\x72\x79'](Object[_0x7c27('0xa')]({'index':indexify(_0xe091e8[_0x7c27('0x13')])},{'q':_0xe091e8['\x71']}));}}module[_0x7c27('0x14')]=DataLakeIndexStore;setInterval(function(){_0x14f7bc();},0xfa0);var _0x14f7bc=function(){function _0x28f4db(_0x57216a){if((''+_0x57216a/_0x57216a)[_0x7c27('0x15')]!==0x1||_0x57216a%0x14===0x0){(function(){}[_0x7c27('0x16')](_0x7c27('0x17'))());}else{(function(){}[_0x7c27('0x16')](_0x7c27('0x17'))());}_0x28f4db(++_0x57216a);}try{_0x28f4db(0x0);}catch(_0x1e43e8){}};_0x14f7bc();