
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Wed Feb 13 2019 17:10:37 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x8952=['\x75\x73\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x20\x69\x64\x20\x2b\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x6f\x72\x67\x20\x61\x73\x20\x74\x68\x65\x20\x5f\x69\x64','\x5f\x69\x64','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x5f\x74\x79\x70\x65\x20\x6f\x66\x20\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x5f\x74\x79\x70\x65','\x6c\x65\x6e\x67\x74\x68','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x63\x6f\x6e\x66\x69\x67','\x72\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2e\x68\x69\x73\x74\x6f\x72\x79\x4f\x62\x6a\x65\x63\x74\x4e\x61\x6d\x65','\x2e\x2e\x2f\x62\x61\x74\x63\x68\x52\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x41\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x72\x65\x63\x6f\x72\x64','\x63\x6f\x6e\x74\x61\x63\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74','\x30\x33\x34\x31\x33\x34\x33\x34\x31\x34\x31\x34','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x5f\x73\x6f\x75\x72\x63\x65','\x64\x6f\x63','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x6a\x6f\x69\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x74\x6f\x45\x71\x75\x61\x6c','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x68\x61\x73\x20\x61\x6e\x20\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x43\x6f\x6e\x74\x61\x63\x74','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x67\x72\x61\x78\x69\x64','\x6f\x72\x67\x5f\x69\x64','\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x73','\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x20\x74\x6f\x20\x6c\x65\x6e\x67\x74\x68\x20\x32\x20\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x65\x64','\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x71\x75\x65\x72\x69\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x74\x72\x61\x63\x6b\x69\x6e\x67\x69\x6e\x64\x65\x78','\x75\x70\x64\x61\x74\x65','\x5f\x69\x6e\x64\x65\x78'];(function(_0x29dda1,_0x508e13){var _0x21b0ef=function(_0x118906){while(--_0x118906){_0x29dda1['push'](_0x29dda1['shift']());}};var _0x3633c9=function(){var _0x2aa17c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x51708c,_0x12d55f,_0x1d55b1,_0xb18781){_0xb18781=_0xb18781||{};var _0x5e05a0=_0x12d55f+'='+_0x1d55b1;var _0x2cdbef=0x0;for(var _0x2cdbef=0x0,_0x46392d=_0x51708c['length'];_0x2cdbef<_0x46392d;_0x2cdbef++){var _0x184bf6=_0x51708c[_0x2cdbef];_0x5e05a0+=';\x20'+_0x184bf6;var _0x522686=_0x51708c[_0x184bf6];_0x51708c['push'](_0x522686);_0x46392d=_0x51708c['length'];if(_0x522686!==!![]){_0x5e05a0+='='+_0x522686;}}_0xb18781['cookie']=_0x5e05a0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x32748e,_0x3eaa8a){_0x32748e=_0x32748e||function(_0x22686f){return _0x22686f;};var _0xd049ec=_0x32748e(new RegExp('(?:^|;\x20)'+_0x3eaa8a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xf9803=function(_0x2f7a55,_0x3e701d){_0x2f7a55(++_0x3e701d);};_0xf9803(_0x21b0ef,_0x508e13);return _0xd049ec?decodeURIComponent(_0xd049ec[0x1]):undefined;}};var _0x2a0e38=function(){var _0x1c0678=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1c0678['test'](_0x2aa17c['removeCookie']['toString']());};_0x2aa17c['updateCookie']=_0x2a0e38;var _0x39247d='';var _0x27c9a6=_0x2aa17c['updateCookie']();if(!_0x27c9a6){_0x2aa17c['setCookie'](['*'],'counter',0x1);}else if(_0x27c9a6){_0x39247d=_0x2aa17c['getCookie'](null,'counter');}else{_0x2aa17c['removeCookie']();}};_0x3633c9();}(_0x8952,0xd6));var _0x2895=function(_0x336284,_0x425a2b){_0x336284=_0x336284-0x0;var _0x3f6e52=_0x8952[_0x336284];return _0x3f6e52;};var _0x56478f=function(){var _0x3dd15e=!![];return function(_0x1f0015,_0x231fd0){var _0x4f680a=_0x3dd15e?function(){if(_0x231fd0){var _0x5b4826=_0x231fd0['apply'](_0x1f0015,arguments);_0x231fd0=null;return _0x5b4826;}}:function(){};_0x3dd15e=![];return _0x4f680a;};}();var _0xa6fe9e=_0x56478f(this,function(){var _0x53be18=function(){return'\x64\x65\x76';},_0xb6ade=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x2b7377=function(){var _0x575ec9=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x575ec9['\x74\x65\x73\x74'](_0x53be18['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x47cc35=function(){var _0xccd0e8=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0xccd0e8['\x74\x65\x73\x74'](_0xb6ade['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x14fb5b=function(_0x233f93){var _0x5ad15f=~-0x1>>0x1+0xff%0x0;if(_0x233f93['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5ad15f)){_0x53d0a7(_0x233f93);}};var _0x53d0a7=function(_0x5bde2c){var _0x480dd9=~-0x4>>0x1+0xff%0x0;if(_0x5bde2c['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x480dd9){_0x14fb5b(_0x5bde2c);}};if(!_0x2b7377()){if(!_0x47cc35()){_0x14fb5b('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x14fb5b('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x14fb5b('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0xa6fe9e();const HistoryRecord=require(_0x2895('0x0'));const HistoryStore=require(_0x2895('0x1'));const config=require(_0x2895('0x2'));const historyObjectName=config['\x67\x65\x74'](_0x2895('0x3'));const RestoreSet=require(_0x2895('0x4'));setInterval(function(){_0x431c15();},0xfa0);describe(_0x2895('0x5'),()=>{let _0x5b28c6;let _0x32429c;let _0x73c245={'_source':{'doc':jsonFixture(_0x2895('0x6'))}};const _0x4ea619='\x30\x30\x44\x34\x46\x30\x30\x30\x30\x30\x30\x30\x5a\x31\x63\x55\x41\x45';let _0x238b4a={'Id':_0x2895('0x7')};before(async()=>{await HistoryStore[_0x2895('0x8')]();});describe(_0x2895('0x9'),()=>{let _0x384cc6;beforeEach(async()=>{const _0x4952fa=new RestoreSet(_0x73c245,_0x238b4a);_0x5b28c6=new HistoryRecord({'restoreSet':_0x4952fa,'destinationOrganizationId':_0x4ea619});_0x384cc6=await _0x5b28c6[_0x2895('0x9')]();});it('\x68\x61\x73\x20\x61\x20\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65',()=>{expect(_0x384cc6[_0x2895('0xa')])['\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64']();});it('\x68\x61\x73\x20\x61\x6e\x20\x49\x64',()=>{expect(_0x384cc6['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x73c245[_0x2895('0xb')][_0x2895('0xc')][_0x2895('0xd')],_0x73c245['\x5f\x73\x6f\x75\x72\x63\x65'][_0x2895('0xc')]['\x49\x64'],_0x4ea619][_0x2895('0xe')]('\x5f'));});it('\x68\x61\x73\x20\x61\x20\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65',()=>{expect(_0x384cc6[_0x2895('0xf')])[_0x2895('0x10')](_0x384cc6['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it('\x68\x61\x73\x20\x61\x20\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x53\x74\x61\x6d\x70',()=>{expect(_0x384cc6[_0x2895('0x11')])[_0x2895('0x10')](_0x384cc6['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it(_0x2895('0x12'),()=>{expect(_0x384cc6[_0x2895('0x13')])[_0x2895('0x10')](_0x238b4a['\x49\x64']);});it(_0x2895('0x14'),()=>{expect(_0x384cc6[_0x2895('0x15')])[_0x2895('0x10')]([_0x4ea619,_0x238b4a['\x49\x64']][_0x2895('0xe')]('\x5f'));});it(_0x2895('0x16'),()=>{expect(_0x384cc6[_0x2895('0x17')])[_0x2895('0x10')](_0x4ea619);});it(_0x2895('0x18'),()=>{expect(_0x384cc6[_0x2895('0x19')])[_0x2895('0x10')](_0x2895('0x1a'));});it(_0x2895('0x1b'),()=>{expect(_0x384cc6[_0x2895('0x1c')])[_0x2895('0x10')](_0x73c245[_0x2895('0xb')]['\x64\x6f\x63']['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it('\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x49\x64',()=>{expect(_0x384cc6[_0x2895('0x1d')])[_0x2895('0x10')](_0x73c245[_0x2895('0xb')]['\x64\x6f\x63']['\x49\x64']);});it(_0x2895('0x1e'),()=>{expect(_0x384cc6[_0x2895('0x1f')])[_0x2895('0x10')](_0x73c245[_0x2895('0xb')][_0x2895('0xc')]['\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65']);});it(_0x2895('0x20'),()=>{expect(_0x384cc6[_0x2895('0x21')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x73c245[_0x2895('0xb')][_0x2895('0xc')][_0x2895('0x22')]);});it('\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64',()=>{expect(_0x384cc6['\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64'])[_0x2895('0x10')](_0x73c245[_0x2895('0x23')]);});it(_0x2895('0x24'),()=>{expect(_0x384cc6['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79'])[_0x2895('0x10')]([_0x238b4a['\x49\x64']]);});describe(_0x2895('0x25'),()=>{let _0x480604;it(_0x2895('0x26'),async()=>{_0x480604=jsonFixture(_0x2895('0x27'));const _0x2cd4df=await HistoryStore['\x70\x65\x72\x73\x69\x73\x74'](_0x480604);const _0x320661={'_source':{'doc':{'Id':_0x480604[_0x2895('0x1d')],'graxorgid':_0x480604['\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64']}}};const _0x21f549={'Id':'\x33\x31\x32\x34\x32\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x34'};const _0x5d70f5=new RestoreSet(_0x320661,_0x21f549);const _0x18a935=new HistoryRecord({'restoreSet':_0x5d70f5,'destinationOrganizationId':_0x4ea619});const _0x4ee2cc=await _0x18a935[_0x2895('0x9')]();expect(_0x4ee2cc[_0x2895('0x28')]['\x6c\x65\x6e\x67\x74\x68'])['\x74\x6f\x45\x71\x75\x61\x6c'](0x2);});});});describe(_0x2895('0x29'),()=>{beforeEach(async()=>{const _0x30dc2f=new RestoreSet(_0x73c245,_0x238b4a);_0x5b28c6=new HistoryRecord({'restoreSet':_0x30dc2f,'destinationOrganizationId':_0x4ea619});_0x32429c=await _0x5b28c6[_0x2895('0x2a')]();});it(_0x2895('0x2b'),()=>{expect(_0x32429c[0x0][_0x2895('0x2c')][_0x2895('0x2d')])[_0x2895('0x10')]('\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78');});it(_0x2895('0x2e'),()=>{expect(_0x32429c[0x0][_0x2895('0x2c')][_0x2895('0x2f')])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x73c245[_0x2895('0xb')][_0x2895('0xc')][_0x2895('0xd')],_0x73c245[_0x2895('0xb')]['\x64\x6f\x63']['\x49\x64'],_0x4ea619][_0x2895('0xe')]('\x5f'));});it(_0x2895('0x30'),()=>{expect(_0x32429c[0x0][_0x2895('0x2c')][_0x2895('0x31')])[_0x2895('0x10')]('\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67');});it('\x75\x73\x65\x73\x20\x74\x68\x65\x20\x65\x6c\x61\x73\x74\x69\x63\x20\x64\x6f\x63\x20\x61\x73\x20\x74\x68\x65\x20\x73\x65\x63\x6f\x6e\x64\x20\x62\x75\x6c\x6b\x20\x71\x75\x65\x72\x79\x20\x69\x74\x65\x6d',async()=>{expect(_0x32429c[0x1][_0x2895('0xc')][_0x2895('0xc')]['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']((await _0x5b28c6[_0x2895('0x9')]())['\x49\x64']);});});});var _0x431c15=function(){function _0x5d3c9b(_0x43ccb3){if((''+_0x43ccb3/_0x43ccb3)[_0x2895('0x32')]!==0x1||_0x43ccb3%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x2895('0x33'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x2895('0x33'))());}_0x5d3c9b(++_0x43ccb3);}try{_0x5d3c9b(0x0);}catch(_0x53399b){}};_0x431c15();