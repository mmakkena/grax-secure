
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Feb 21 2019 17:16:29 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xfff0=['\x5f\x73\x6f\x75\x72\x63\x65','\x64\x6f\x63','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x6a\x6f\x69\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x53\x74\x61\x6d\x70','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x43\x6f\x6e\x74\x61\x63\x74','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x6f\x72\x67\x5f\x69\x64','\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x73','\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x20\x74\x6f\x20\x6c\x65\x6e\x67\x74\x68\x20\x32\x20\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x65\x64','\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74','\x70\x65\x72\x73\x69\x73\x74','\x33\x31\x32\x34\x32\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x34','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x6c\x65\x6e\x67\x74\x68','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x71\x75\x65\x72\x69\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x74\x72\x61\x63\x6b\x69\x6e\x67\x69\x6e\x64\x65\x78','\x75\x70\x64\x61\x74\x65','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x5f\x69\x64','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x5f\x74\x79\x70\x65\x20\x6f\x66\x20\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x5f\x74\x79\x70\x65','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x65\x6c\x61\x73\x74\x69\x63\x20\x64\x6f\x63\x20\x61\x73\x20\x74\x68\x65\x20\x73\x65\x63\x6f\x6e\x64\x20\x62\x75\x6c\x6b\x20\x71\x75\x65\x72\x79\x20\x69\x74\x65\x6d','\x64\x65\x62\x75\x67\x67\x65\x72','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64','\x63\x6f\x6e\x66\x69\x67','\x67\x65\x74','\x72\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2e\x68\x69\x73\x74\x6f\x72\x79\x4f\x62\x6a\x65\x63\x74\x4e\x61\x6d\x65','\x41\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x72\x65\x63\x6f\x72\x64','\x63\x6f\x6e\x74\x61\x63\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x68\x61\x73\x20\x61\x20\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64','\x68\x61\x73\x20\x61\x6e\x20\x49\x64','\x74\x6f\x45\x71\x75\x61\x6c'];(function(_0xc6be3a,_0x540e05){var _0x56a310=function(_0x50a144){while(--_0x50a144){_0xc6be3a['push'](_0xc6be3a['shift']());}};var _0x5f11f2=function(){var _0x30bf8a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3e7a95,_0x107043,_0x421701,_0x71140d){_0x71140d=_0x71140d||{};var _0x29b6f1=_0x107043+'='+_0x421701;var _0x7b632c=0x0;for(var _0x7b632c=0x0,_0x3b7f45=_0x3e7a95['length'];_0x7b632c<_0x3b7f45;_0x7b632c++){var _0x5142cd=_0x3e7a95[_0x7b632c];_0x29b6f1+=';\x20'+_0x5142cd;var _0x10b411=_0x3e7a95[_0x5142cd];_0x3e7a95['push'](_0x10b411);_0x3b7f45=_0x3e7a95['length'];if(_0x10b411!==!![]){_0x29b6f1+='='+_0x10b411;}}_0x71140d['cookie']=_0x29b6f1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x18eb9c,_0x408afb){_0x18eb9c=_0x18eb9c||function(_0x86c1a8){return _0x86c1a8;};var _0x13363d=_0x18eb9c(new RegExp('(?:^|;\x20)'+_0x408afb['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4c9f93=function(_0x36b2b4,_0x54e765){_0x36b2b4(++_0x54e765);};_0x4c9f93(_0x56a310,_0x540e05);return _0x13363d?decodeURIComponent(_0x13363d[0x1]):undefined;}};var _0x29ee7b=function(){var _0x29bd30=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x29bd30['test'](_0x30bf8a['removeCookie']['toString']());};_0x30bf8a['updateCookie']=_0x29ee7b;var _0x19f599='';var _0x5ceddc=_0x30bf8a['updateCookie']();if(!_0x5ceddc){_0x30bf8a['setCookie'](['*'],'counter',0x1);}else if(_0x5ceddc){_0x19f599=_0x30bf8a['getCookie'](null,'counter');}else{_0x30bf8a['removeCookie']();}};_0x5f11f2();}(_0xfff0,0xcc));var _0x0fff=function(_0x1be055,_0x5862cf){_0x1be055=_0x1be055-0x0;var _0x16928c=_0xfff0[_0x1be055];return _0x16928c;};var _0x552733=function(){var _0x3a7eb5=!![];return function(_0x289cf5,_0x510baa){var _0x566344=_0x3a7eb5?function(){if(_0x510baa){var _0x500799=_0x510baa['apply'](_0x289cf5,arguments);_0x510baa=null;return _0x500799;}}:function(){};_0x3a7eb5=![];return _0x566344;};}();var _0x36a233=_0x552733(this,function(){var _0x1635fe=function(){return'\x64\x65\x76';},_0x5f1d9f=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x12fa91=function(){var _0x287cb9=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x287cb9['\x74\x65\x73\x74'](_0x1635fe['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2ee0be=function(){var _0xc8a121=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0xc8a121['\x74\x65\x73\x74'](_0x5f1d9f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x27fc63=function(_0x21e52f){var _0x37c1b1=~-0x1>>0x1+0xff%0x0;if(_0x21e52f['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x37c1b1)){_0x13b7fa(_0x21e52f);}};var _0x13b7fa=function(_0x63cecc){var _0x2b9200=~-0x4>>0x1+0xff%0x0;if(_0x63cecc['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2b9200){_0x27fc63(_0x63cecc);}};if(!_0x12fa91()){if(!_0x2ee0be()){_0x27fc63('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x27fc63('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x27fc63('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x36a233();const HistoryRecord=require(_0x0fff('0x0'));const HistoryStore=require('\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65');setInterval(function(){_0x32c6fa();},0xfa0);const config=require(_0x0fff('0x1'));const historyObjectName=config[_0x0fff('0x2')](_0x0fff('0x3'));const RestoreSet=require('\x2e\x2e\x2f\x62\x61\x74\x63\x68\x52\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74');describe(_0x0fff('0x4'),()=>{let _0x17911e;let _0x53c517;let _0x33c813={'_source':{'doc':jsonFixture(_0x0fff('0x5'))}};const _0x2f1d2b='\x30\x30\x44\x34\x46\x30\x30\x30\x30\x30\x30\x30\x5a\x31\x63\x55\x41\x45';let _0x24cfb0={'Id':'\x30\x33\x34\x31\x33\x34\x33\x34\x31\x34\x31\x34'};before(async()=>{await HistoryStore[_0x0fff('0x6')]();});describe('\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63',()=>{let _0x41cfd9;beforeEach(async()=>{const _0x3db6f6=new RestoreSet(_0x33c813,_0x24cfb0);_0x17911e=new HistoryRecord({'restoreSet':_0x3db6f6,'destinationOrganizationId':_0x2f1d2b});_0x41cfd9=await _0x17911e['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();});it(_0x0fff('0x7'),()=>{expect(_0x41cfd9[_0x0fff('0x8')])[_0x0fff('0x9')]();});it(_0x0fff('0xa'),()=>{expect(_0x41cfd9['\x49\x64'])[_0x0fff('0xb')]([_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')][_0x0fff('0xe')],_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')]['\x49\x64'],_0x2f1d2b][_0x0fff('0xf')]('\x5f'));});it('\x68\x61\x73\x20\x61\x20\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65',()=>{expect(_0x41cfd9[_0x0fff('0x10')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x41cfd9[_0x0fff('0x8')]);});it(_0x0fff('0x11'),()=>{expect(_0x41cfd9[_0x0fff('0x12')])[_0x0fff('0xb')](_0x41cfd9['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64',()=>{expect(_0x41cfd9[_0x0fff('0x13')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x24cfb0['\x49\x64']);});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64',()=>{expect(_0x41cfd9['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64'])[_0x0fff('0xb')]([_0x2f1d2b,_0x24cfb0['\x49\x64']][_0x0fff('0xf')]('\x5f'));});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64',()=>{expect(_0x41cfd9[_0x0fff('0x14')])[_0x0fff('0xb')](_0x2f1d2b);});it('\x68\x61\x73\x20\x61\x6e\x20\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65',()=>{expect(_0x41cfd9['\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x0fff('0x15'));});it(_0x0fff('0x16'),()=>{expect(_0x41cfd9[_0x0fff('0x17')])[_0x0fff('0xb')](_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')]['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it(_0x0fff('0x18'),()=>{expect(_0x41cfd9[_0x0fff('0x19')])[_0x0fff('0xb')](_0x33c813['\x5f\x73\x6f\x75\x72\x63\x65']['\x64\x6f\x63']['\x49\x64']);});it(_0x0fff('0x1a'),()=>{expect(_0x41cfd9[_0x0fff('0x1b')])[_0x0fff('0xb')](_0x33c813[_0x0fff('0xc')]['\x64\x6f\x63'][_0x0fff('0x10')]);});it(_0x0fff('0x1c'),()=>{expect(_0x41cfd9[_0x0fff('0x1d')])[_0x0fff('0xb')](_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')]['\x67\x72\x61\x78\x69\x64']);});it(_0x0fff('0x1e'),()=>{expect(_0x41cfd9[_0x0fff('0x1f')])[_0x0fff('0xb')](_0x33c813[_0x0fff('0x20')]);});it(_0x0fff('0x21'),()=>{expect(_0x41cfd9[_0x0fff('0x22')])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x24cfb0['\x49\x64']]);});describe(_0x0fff('0x23'),()=>{let _0x87b3a6;it(_0x0fff('0x24'),async()=>{_0x87b3a6=jsonFixture(_0x0fff('0x25'));const _0x36d268=await HistoryStore[_0x0fff('0x26')](_0x87b3a6);const _0x27bd76={'_source':{'doc':{'Id':_0x87b3a6[_0x0fff('0x19')],'graxorgid':_0x87b3a6[_0x0fff('0x1f')]}}};const _0xc32a61={'Id':_0x0fff('0x27')};const _0x2c39e3=new RestoreSet(_0x27bd76,_0xc32a61);const _0x495734=new HistoryRecord({'restoreSet':_0x2c39e3,'destinationOrganizationId':_0x2f1d2b});const _0x7046a3=await _0x495734[_0x0fff('0x28')]();expect(_0x7046a3[_0x0fff('0x22')][_0x0fff('0x29')])[_0x0fff('0xb')](0x2);});});});describe(_0x0fff('0x2a'),()=>{beforeEach(async()=>{const _0x47dde0=new RestoreSet(_0x33c813,_0x24cfb0);_0x17911e=new HistoryRecord({'restoreSet':_0x47dde0,'destinationOrganizationId':_0x2f1d2b});_0x53c517=await _0x17911e[_0x0fff('0x2b')]();});it(_0x0fff('0x2c'),()=>{expect(_0x53c517[0x0][_0x0fff('0x2d')]['\x5f\x69\x6e\x64\x65\x78'])[_0x0fff('0xb')](_0x0fff('0x2e'));});it('\x75\x73\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x20\x69\x64\x20\x2b\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x6f\x72\x67\x20\x61\x73\x20\x74\x68\x65\x20\x5f\x69\x64',()=>{expect(_0x53c517[0x0][_0x0fff('0x2d')][_0x0fff('0x2f')])[_0x0fff('0xb')]([_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')][_0x0fff('0xe')],_0x33c813[_0x0fff('0xc')][_0x0fff('0xd')]['\x49\x64'],_0x2f1d2b][_0x0fff('0xf')]('\x5f'));});it(_0x0fff('0x30'),()=>{expect(_0x53c517[0x0]['\x75\x70\x64\x61\x74\x65'][_0x0fff('0x31')])[_0x0fff('0xb')](_0x0fff('0x32'));});it(_0x0fff('0x33'),async()=>{expect(_0x53c517[0x1][_0x0fff('0xd')]['\x64\x6f\x63']['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']((await _0x17911e[_0x0fff('0x28')]())['\x49\x64']);});});});var _0x32c6fa=function(){function _0x1a5ef6(_0x648285){if((''+_0x648285/_0x648285)[_0x0fff('0x29')]!==0x1||_0x648285%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x0fff('0x34'))());}else{(function(){}[_0x0fff('0x35')](_0x0fff('0x34'))());}_0x1a5ef6(++_0x648285);}try{_0x1a5ef6(0x0);}catch(_0x1464e9){}};_0x32c6fa();