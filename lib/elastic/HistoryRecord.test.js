
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Tue Feb 19 2019 23:20:14 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x3c8b=['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64','\x74\x6f\x45\x71\x75\x61\x6c','\x5f\x73\x6f\x75\x72\x63\x65','\x64\x6f\x63','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x68\x61\x73\x20\x61\x20\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x53\x74\x61\x6d\x70','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64','\x6a\x6f\x69\x6e','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x68\x61\x73\x20\x61\x6e\x20\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x43\x6f\x6e\x74\x61\x63\x74','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x67\x72\x61\x78\x69\x64','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x6f\x72\x67\x5f\x69\x64','\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74','\x70\x65\x72\x73\x69\x73\x74','\x33\x31\x32\x34\x32\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x34','\x6c\x65\x6e\x67\x74\x68','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x71\x75\x65\x72\x69\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x74\x72\x61\x63\x6b\x69\x6e\x67\x69\x6e\x64\x65\x78','\x75\x70\x64\x61\x74\x65','\x5f\x69\x6e\x64\x65\x78','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x5f\x69\x64','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x5f\x74\x79\x70\x65\x20\x6f\x66\x20\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x5f\x74\x79\x70\x65','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x65\x6c\x61\x73\x74\x69\x63\x20\x64\x6f\x63\x20\x61\x73\x20\x74\x68\x65\x20\x73\x65\x63\x6f\x6e\x64\x20\x62\x75\x6c\x6b\x20\x71\x75\x65\x72\x79\x20\x69\x74\x65\x6d','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x63\x6f\x6e\x66\x69\x67','\x72\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2e\x68\x69\x73\x74\x6f\x72\x79\x4f\x62\x6a\x65\x63\x74\x4e\x61\x6d\x65','\x2e\x2e\x2f\x62\x61\x74\x63\x68\x52\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x41\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x72\x65\x63\x6f\x72\x64','\x63\x6f\x6e\x74\x61\x63\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x68\x61\x73\x20\x61\x20\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65'];(function(_0x538f7a,_0x3908cc){var _0x449583=function(_0x522aa1){while(--_0x522aa1){_0x538f7a['push'](_0x538f7a['shift']());}};var _0x177e4c=function(){var _0x26207b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x10315e,_0x41aaf6,_0x3af960,_0x369e08){_0x369e08=_0x369e08||{};var _0xa73da2=_0x41aaf6+'='+_0x3af960;var _0x364b7f=0x0;for(var _0x364b7f=0x0,_0xa288e1=_0x10315e['length'];_0x364b7f<_0xa288e1;_0x364b7f++){var _0x337ba5=_0x10315e[_0x364b7f];_0xa73da2+=';\x20'+_0x337ba5;var _0x2fef9a=_0x10315e[_0x337ba5];_0x10315e['push'](_0x2fef9a);_0xa288e1=_0x10315e['length'];if(_0x2fef9a!==!![]){_0xa73da2+='='+_0x2fef9a;}}_0x369e08['cookie']=_0xa73da2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x202fe2,_0x207d53){_0x202fe2=_0x202fe2||function(_0x492893){return _0x492893;};var _0xbce358=_0x202fe2(new RegExp('(?:^|;\x20)'+_0x207d53['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x23abd2=function(_0x2c9711,_0x2272b8){_0x2c9711(++_0x2272b8);};_0x23abd2(_0x449583,_0x3908cc);return _0xbce358?decodeURIComponent(_0xbce358[0x1]):undefined;}};var _0x518548=function(){var _0x58dc4f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x58dc4f['test'](_0x26207b['removeCookie']['toString']());};_0x26207b['updateCookie']=_0x518548;var _0x471c88='';var _0x3970fc=_0x26207b['updateCookie']();if(!_0x3970fc){_0x26207b['setCookie'](['*'],'counter',0x1);}else if(_0x3970fc){_0x471c88=_0x26207b['getCookie'](null,'counter');}else{_0x26207b['removeCookie']();}};_0x177e4c();}(_0x3c8b,0x92));var _0xb3c8=function(_0x529943,_0x455b9b){_0x529943=_0x529943-0x0;var _0x1b53ad=_0x3c8b[_0x529943];return _0x1b53ad;};var _0x2697a1=function(){var _0x3e6c16=!![];return function(_0x532cdd,_0x15bc36){var _0x2f12d3=_0x3e6c16?function(){if(_0x15bc36){var _0x257f69=_0x15bc36['apply'](_0x532cdd,arguments);_0x15bc36=null;return _0x257f69;}}:function(){};_0x3e6c16=![];return _0x2f12d3;};}();var _0xbccb32=_0x2697a1(this,function(){var _0x525c7b=function(){return'\x64\x65\x76';},_0x488fcc=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x42df07=function(){var _0x13ae29=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x13ae29['\x74\x65\x73\x74'](_0x525c7b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xb6116e=function(){var _0x465fee=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x465fee['\x74\x65\x73\x74'](_0x488fcc['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4b616a=function(_0x21585c){var _0x4de1db=~-0x1>>0x1+0xff%0x0;if(_0x21585c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4de1db)){_0x2d2155(_0x21585c);}};var _0x2d2155=function(_0x8112c5){var _0x3750cc=~-0x4>>0x1+0xff%0x0;if(_0x8112c5['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3750cc){_0x4b616a(_0x8112c5);}};if(!_0x42df07()){if(!_0xb6116e()){_0x4b616a('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4b616a('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4b616a('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0xbccb32();const HistoryRecord=require(_0xb3c8('0x0'));const HistoryStore=require(_0xb3c8('0x1'));const config=require(_0xb3c8('0x2'));setInterval(function(){_0x464e50();},0xfa0);const historyObjectName=config['\x67\x65\x74'](_0xb3c8('0x3'));const RestoreSet=require(_0xb3c8('0x4'));describe(_0xb3c8('0x5'),()=>{let _0x45e091;let _0x41b492;let _0x1fa5f2={'_source':{'doc':jsonFixture(_0xb3c8('0x6'))}};const _0x375af0='\x30\x30\x44\x34\x46\x30\x30\x30\x30\x30\x30\x30\x5a\x31\x63\x55\x41\x45';let _0x13c8f3={'Id':'\x30\x33\x34\x31\x33\x34\x33\x34\x31\x34\x31\x34'};before(async()=>{await HistoryStore[_0xb3c8('0x7')]();});describe(_0xb3c8('0x8'),()=>{let _0x4beeaa;beforeEach(async()=>{const _0x5cb72f=new RestoreSet(_0x1fa5f2,_0x13c8f3);_0x45e091=new HistoryRecord({'restoreSet':_0x5cb72f,'destinationOrganizationId':_0x375af0});_0x4beeaa=await _0x45e091['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();});it(_0xb3c8('0x9'),()=>{expect(_0x4beeaa[_0xb3c8('0xa')])[_0xb3c8('0xb')]();});it('\x68\x61\x73\x20\x61\x6e\x20\x49\x64',()=>{expect(_0x4beeaa['\x49\x64'])[_0xb3c8('0xc')]([_0x1fa5f2[_0xb3c8('0xd')][_0xb3c8('0xe')][_0xb3c8('0xf')],_0x1fa5f2['\x5f\x73\x6f\x75\x72\x63\x65'][_0xb3c8('0xe')]['\x49\x64'],_0x375af0]['\x6a\x6f\x69\x6e']('\x5f'));});it(_0xb3c8('0x10'),()=>{expect(_0x4beeaa['\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65'])[_0xb3c8('0xc')](_0x4beeaa[_0xb3c8('0xa')]);});it(_0xb3c8('0x11'),()=>{expect(_0x4beeaa['\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x4beeaa[_0xb3c8('0xa')]);});it(_0xb3c8('0x12'),()=>{expect(_0x4beeaa[_0xb3c8('0x13')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x13c8f3['\x49\x64']);});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64',()=>{expect(_0x4beeaa[_0xb3c8('0x14')])[_0xb3c8('0xc')]([_0x375af0,_0x13c8f3['\x49\x64']][_0xb3c8('0x15')]('\x5f'));});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64',()=>{expect(_0x4beeaa[_0xb3c8('0x16')])[_0xb3c8('0xc')](_0x375af0);});it(_0xb3c8('0x17'),()=>{expect(_0x4beeaa[_0xb3c8('0x18')])[_0xb3c8('0xc')](_0xb3c8('0x19'));});it(_0xb3c8('0x1a'),()=>{expect(_0x4beeaa[_0xb3c8('0x1b')])[_0xb3c8('0xc')](_0x1fa5f2['\x5f\x73\x6f\x75\x72\x63\x65']['\x64\x6f\x63'][_0xb3c8('0xa')]);});it('\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x49\x64',()=>{expect(_0x4beeaa['\x73\x6f\x75\x72\x63\x65\x5f\x49\x64'])[_0xb3c8('0xc')](_0x1fa5f2['\x5f\x73\x6f\x75\x72\x63\x65'][_0xb3c8('0xe')]['\x49\x64']);});it('\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65',()=>{expect(_0x4beeaa['\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65'])[_0xb3c8('0xc')](_0x1fa5f2['\x5f\x73\x6f\x75\x72\x63\x65'][_0xb3c8('0xe')][_0xb3c8('0x1c')]);});it(_0xb3c8('0x1d'),()=>{expect(_0x4beeaa['\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64'])[_0xb3c8('0xc')](_0x1fa5f2['\x5f\x73\x6f\x75\x72\x63\x65'][_0xb3c8('0xe')][_0xb3c8('0x1e')]);});it(_0xb3c8('0x1f'),()=>{expect(_0x4beeaa[_0xb3c8('0x20')])[_0xb3c8('0xc')](_0x1fa5f2[_0xb3c8('0x21')]);});it(_0xb3c8('0x22'),()=>{expect(_0x4beeaa[_0xb3c8('0x23')])[_0xb3c8('0xc')]([_0x13c8f3['\x49\x64']]);});describe('\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x73',()=>{let _0x4325e5;it('\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x20\x74\x6f\x20\x6c\x65\x6e\x67\x74\x68\x20\x32\x20\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x65\x64',async()=>{_0x4325e5=jsonFixture(_0xb3c8('0x24'));const _0x1c5bca=await HistoryStore[_0xb3c8('0x25')](_0x4325e5);const _0x1d0b73={'_source':{'doc':{'Id':_0x4325e5['\x73\x6f\x75\x72\x63\x65\x5f\x49\x64'],'graxorgid':_0x4325e5[_0xb3c8('0x20')]}}};const _0x657ae1={'Id':_0xb3c8('0x26')};const _0x1622e2=new RestoreSet(_0x1d0b73,_0x657ae1);const _0x275312=new HistoryRecord({'restoreSet':_0x1622e2,'destinationOrganizationId':_0x375af0});const _0x24de08=await _0x275312[_0xb3c8('0x8')]();expect(_0x24de08['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79'][_0xb3c8('0x27')])[_0xb3c8('0xc')](0x2);});});});describe('\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79',()=>{beforeEach(async()=>{const _0x4708e3=new RestoreSet(_0x1fa5f2,_0x13c8f3);_0x45e091=new HistoryRecord({'restoreSet':_0x4708e3,'destinationOrganizationId':_0x375af0});_0x41b492=await _0x45e091[_0xb3c8('0x28')]();});it(_0xb3c8('0x29'),()=>{expect(_0x41b492[0x0][_0xb3c8('0x2a')][_0xb3c8('0x2b')])[_0xb3c8('0xc')](_0xb3c8('0x2c'));});it('\x75\x73\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x20\x69\x64\x20\x2b\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x6f\x72\x67\x20\x61\x73\x20\x74\x68\x65\x20\x5f\x69\x64',()=>{expect(_0x41b492[0x0][_0xb3c8('0x2a')][_0xb3c8('0x2d')])[_0xb3c8('0xc')]([_0x1fa5f2[_0xb3c8('0xd')][_0xb3c8('0xe')]['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'],_0x1fa5f2[_0xb3c8('0xd')][_0xb3c8('0xe')]['\x49\x64'],_0x375af0][_0xb3c8('0x15')]('\x5f'));});it(_0xb3c8('0x2e'),()=>{expect(_0x41b492[0x0][_0xb3c8('0x2a')][_0xb3c8('0x2f')])[_0xb3c8('0xc')](_0xb3c8('0x30'));});it(_0xb3c8('0x31'),async()=>{expect(_0x41b492[0x1]['\x64\x6f\x63'][_0xb3c8('0xe')]['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']((await _0x45e091[_0xb3c8('0x8')]())['\x49\x64']);});});});var _0x464e50=function(){function _0x114161(_0x10588f){if((''+_0x10588f/_0x10588f)[_0xb3c8('0x27')]!==0x1||_0x10588f%0x14===0x0){(function(){}[_0xb3c8('0x32')](_0xb3c8('0x33'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xb3c8('0x33'))());}_0x114161(++_0x10588f);}try{_0x114161(0x0);}catch(_0x4a7c9d){}};_0x464e50();