
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Feb 15 2019 15:38:38 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x5f66=['\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64','\x2e\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x63\x6f\x6e\x66\x69\x67','\x67\x65\x74','\x72\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2e\x68\x69\x73\x74\x6f\x72\x79\x4f\x62\x6a\x65\x63\x74\x4e\x61\x6d\x65','\x41\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x72\x65\x63\x6f\x72\x64','\x30\x30\x44\x34\x46\x30\x30\x30\x30\x30\x30\x30\x5a\x31\x63\x55\x41\x45','\x30\x33\x34\x31\x33\x34\x33\x34\x31\x34\x31\x34','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x68\x61\x73\x20\x61\x20\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64','\x68\x61\x73\x20\x61\x6e\x20\x49\x64','\x5f\x73\x6f\x75\x72\x63\x65','\x6a\x6f\x69\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x74\x6f\x45\x71\x75\x61\x6c','\x68\x61\x73\x20\x61\x20\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x53\x74\x61\x6d\x70','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64','\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64','\x68\x61\x73\x20\x61\x6e\x20\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x43\x6f\x6e\x74\x61\x63\x74','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x64\x6f\x63','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x73\x6f\x75\x72\x63\x65\x5f\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64','\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x73\x6f\x75\x72\x63\x65\x5f\x6f\x72\x67\x69\x64','\x6f\x72\x67\x5f\x69\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x73','\x70\x65\x72\x73\x69\x73\x74','\x33\x31\x32\x34\x32\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x34','\x6c\x65\x6e\x67\x74\x68','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x71\x75\x65\x72\x69\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x74\x72\x61\x63\x6b\x69\x6e\x67\x69\x6e\x64\x65\x78','\x75\x70\x64\x61\x74\x65','\x67\x72\x61\x78\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67\x74\x65\x73\x74\x69\x6e\x64\x65\x78','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x67\x72\x61\x78\x20\x69\x64\x20\x2b\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x6f\x72\x67\x20\x61\x73\x20\x74\x68\x65\x20\x5f\x69\x64','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x5f\x74\x79\x70\x65\x20\x6f\x66\x20\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x5f\x74\x79\x70\x65','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x75\x73\x65\x73\x20\x74\x68\x65\x20\x65\x6c\x61\x73\x74\x69\x63\x20\x64\x6f\x63\x20\x61\x73\x20\x74\x68\x65\x20\x73\x65\x63\x6f\x6e\x64\x20\x62\x75\x6c\x6b\x20\x71\x75\x65\x72\x79\x20\x69\x74\x65\x6d'];(function(_0x45f951,_0x2750c8){var _0x24756c=function(_0x31c931){while(--_0x31c931){_0x45f951['push'](_0x45f951['shift']());}};var _0x4e988a=function(){var _0x4597d6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c0d7f,_0x13d4d5,_0x4c9a84,_0x29ff80){_0x29ff80=_0x29ff80||{};var _0x33e8c3=_0x13d4d5+'='+_0x4c9a84;var _0xc7140c=0x0;for(var _0xc7140c=0x0,_0x3dc2b0=_0x2c0d7f['length'];_0xc7140c<_0x3dc2b0;_0xc7140c++){var _0x3b6967=_0x2c0d7f[_0xc7140c];_0x33e8c3+=';\x20'+_0x3b6967;var _0x1b5fb5=_0x2c0d7f[_0x3b6967];_0x2c0d7f['push'](_0x1b5fb5);_0x3dc2b0=_0x2c0d7f['length'];if(_0x1b5fb5!==!![]){_0x33e8c3+='='+_0x1b5fb5;}}_0x29ff80['cookie']=_0x33e8c3;},'removeCookie':function(){return'dev';},'getCookie':function(_0xa908dd,_0x26f761){_0xa908dd=_0xa908dd||function(_0x340a33){return _0x340a33;};var _0x8e89f=_0xa908dd(new RegExp('(?:^|;\x20)'+_0x26f761['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xdcc3e5=function(_0x5046d8,_0x493948){_0x5046d8(++_0x493948);};_0xdcc3e5(_0x24756c,_0x2750c8);return _0x8e89f?decodeURIComponent(_0x8e89f[0x1]):undefined;}};var _0x25b93d=function(){var _0x100da8=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x100da8['test'](_0x4597d6['removeCookie']['toString']());};_0x4597d6['updateCookie']=_0x25b93d;var _0xbdb0d0='';var _0x25ad47=_0x4597d6['updateCookie']();if(!_0x25ad47){_0x4597d6['setCookie'](['*'],'counter',0x1);}else if(_0x25ad47){_0xbdb0d0=_0x4597d6['getCookie'](null,'counter');}else{_0x4597d6['removeCookie']();}};_0x4e988a();}(_0x5f66,0x145));var _0x65f6=function(_0x2b4411,_0x2625ed){_0x2b4411=_0x2b4411-0x0;var _0x8e41ef=_0x5f66[_0x2b4411];return _0x8e41ef;};var _0x2d152c=function(){var _0x3b9fe3=!![];return function(_0x4faf21,_0x5e777c){var _0x54e2ed=_0x3b9fe3?function(){if(_0x5e777c){var _0x2f2869=_0x5e777c['apply'](_0x4faf21,arguments);_0x5e777c=null;return _0x2f2869;}}:function(){};_0x3b9fe3=![];return _0x54e2ed;};}();var _0x24f7fd=_0x2d152c(this,function(){var _0x3b1502=function(){return'\x64\x65\x76';},_0xa23e9d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x7af654=function(){var _0x4290fc=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4290fc['\x74\x65\x73\x74'](_0x3b1502['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x327b81=function(){var _0x4dd283=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4dd283['\x74\x65\x73\x74'](_0xa23e9d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2b10ea=function(_0x535491){var _0x194e10=~-0x1>>0x1+0xff%0x0;if(_0x535491['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x194e10)){_0x2d348c(_0x535491);}};var _0x2d348c=function(_0x4a3239){var _0x1c6627=~-0x4>>0x1+0xff%0x0;if(_0x4a3239['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1c6627){_0x2b10ea(_0x4a3239);}};if(!_0x7af654()){if(!_0x327b81()){_0x2b10ea('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2b10ea('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2b10ea('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x24f7fd();const HistoryRecord=require(_0x65f6('0x0'));const HistoryStore=require(_0x65f6('0x1'));const config=require(_0x65f6('0x2'));const historyObjectName=config[_0x65f6('0x3')](_0x65f6('0x4'));const RestoreSet=require('\x2e\x2e\x2f\x62\x61\x74\x63\x68\x52\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74');describe(_0x65f6('0x5'),()=>{let _0x5150c8;let _0x1c9f5b;let _0x22b017={'_source':{'doc':jsonFixture('\x63\x6f\x6e\x74\x61\x63\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74')}};const _0x4ed98f=_0x65f6('0x6');let _0x2c6571={'Id':_0x65f6('0x7')};before(async()=>{await HistoryStore[_0x65f6('0x8')]();});describe(_0x65f6('0x9'),()=>{let _0x14f4c7;beforeEach(async()=>{const _0x48d85c=new RestoreSet(_0x22b017,_0x2c6571);_0x5150c8=new HistoryRecord({'restoreSet':_0x48d85c,'destinationOrganizationId':_0x4ed98f});_0x14f4c7=await _0x5150c8['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();});it(_0x65f6('0xa'),()=>{expect(_0x14f4c7[_0x65f6('0xb')])[_0x65f6('0xc')]();});it(_0x65f6('0xd'),()=>{expect(_0x14f4c7['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x22b017[_0x65f6('0xe')]['\x64\x6f\x63']['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'],_0x22b017[_0x65f6('0xe')]['\x64\x6f\x63']['\x49\x64'],_0x4ed98f][_0x65f6('0xf')]('\x5f'));});it('\x68\x61\x73\x20\x61\x20\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65',()=>{expect(_0x14f4c7[_0x65f6('0x10')])[_0x65f6('0x11')](_0x14f4c7[_0x65f6('0xb')]);});it(_0x65f6('0x12'),()=>{expect(_0x14f4c7[_0x65f6('0x13')])[_0x65f6('0x11')](_0x14f4c7[_0x65f6('0xb')]);});it(_0x65f6('0x14'),()=>{expect(_0x14f4c7[_0x65f6('0x15')])[_0x65f6('0x11')](_0x2c6571['\x49\x64']);});it('\x68\x61\x73\x20\x61\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64',()=>{expect(_0x14f4c7[_0x65f6('0x16')])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x4ed98f,_0x2c6571['\x49\x64']]['\x6a\x6f\x69\x6e']('\x5f'));});it(_0x65f6('0x17'),()=>{expect(_0x14f4c7[_0x65f6('0x18')])[_0x65f6('0x11')](_0x4ed98f);});it(_0x65f6('0x19'),()=>{expect(_0x14f4c7[_0x65f6('0x1a')])[_0x65f6('0x11')](_0x65f6('0x1b'));});it(_0x65f6('0x1c'),()=>{expect(_0x14f4c7['\x73\x6f\x75\x72\x63\x65\x5f\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x22b017[_0x65f6('0xe')]['\x64\x6f\x63']['\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65']);});it('\x68\x61\x73\x20\x61\x20\x73\x6f\x75\x72\x63\x65\x5f\x49\x64',()=>{expect(_0x14f4c7[_0x65f6('0x1d')])[_0x65f6('0x11')](_0x22b017['\x5f\x73\x6f\x75\x72\x63\x65'][_0x65f6('0x1e')]['\x49\x64']);});it(_0x65f6('0x1f'),()=>{expect(_0x14f4c7[_0x65f6('0x20')])[_0x65f6('0x11')](_0x22b017[_0x65f6('0xe')][_0x65f6('0x1e')]['\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65']);});it(_0x65f6('0x21'),()=>{expect(_0x14f4c7['\x73\x6f\x75\x72\x63\x65\x5f\x67\x72\x61\x78\x69\x64'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x22b017[_0x65f6('0xe')][_0x65f6('0x1e')]['\x67\x72\x61\x78\x69\x64']);});it(_0x65f6('0x22'),()=>{expect(_0x14f4c7[_0x65f6('0x23')])[_0x65f6('0x11')](_0x22b017[_0x65f6('0x24')]);});it('\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79',()=>{expect(_0x14f4c7[_0x65f6('0x25')])[_0x65f6('0x11')]([_0x2c6571['\x49\x64']]);});describe(_0x65f6('0x26'),()=>{let _0x5963e0;it('\x73\x65\x74\x73\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x20\x74\x6f\x20\x6c\x65\x6e\x67\x74\x68\x20\x32\x20\x69\x66\x20\x61\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x64\x6f\x63\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x65\x78\x69\x73\x74\x65\x64',async()=>{_0x5963e0=jsonFixture('\x68\x69\x73\x74\x6f\x72\x79\x46\x6f\x72\x43\x6f\x6e\x74\x61\x63\x74');const _0x29abdb=await HistoryStore[_0x65f6('0x27')](_0x5963e0);const _0x4b2292={'_source':{'doc':{'Id':_0x5963e0[_0x65f6('0x1d')],'graxorgid':_0x5963e0[_0x65f6('0x23')]}}};const _0x52277c={'Id':_0x65f6('0x28')};const _0x2bff2b=new RestoreSet(_0x4b2292,_0x52277c);const _0x28d0df=new HistoryRecord({'restoreSet':_0x2bff2b,'destinationOrganizationId':_0x4ed98f});const _0x559330=await _0x28d0df['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();expect(_0x559330['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79'][_0x65f6('0x29')])[_0x65f6('0x11')](0x2);});});});describe(_0x65f6('0x2a'),()=>{beforeEach(async()=>{const _0x408ccc=new RestoreSet(_0x22b017,_0x2c6571);_0x5150c8=new HistoryRecord({'restoreSet':_0x408ccc,'destinationOrganizationId':_0x4ed98f});_0x1c9f5b=await _0x5150c8[_0x65f6('0x2b')]();});it(_0x65f6('0x2c'),()=>{expect(_0x1c9f5b[0x0][_0x65f6('0x2d')]['\x5f\x69\x6e\x64\x65\x78'])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x65f6('0x2e'));});it(_0x65f6('0x2f'),()=>{expect(_0x1c9f5b[0x0]['\x75\x70\x64\x61\x74\x65']['\x5f\x69\x64'])[_0x65f6('0x11')]([_0x22b017[_0x65f6('0xe')][_0x65f6('0x1e')][_0x65f6('0x30')],_0x22b017[_0x65f6('0xe')][_0x65f6('0x1e')]['\x49\x64'],_0x4ed98f]['\x6a\x6f\x69\x6e']('\x5f'));});it(_0x65f6('0x31'),()=>{expect(_0x1c9f5b[0x0][_0x65f6('0x2d')][_0x65f6('0x32')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0x65f6('0x33'));});it(_0x65f6('0x34'),async()=>{expect(_0x1c9f5b[0x1][_0x65f6('0x1e')][_0x65f6('0x1e')]['\x49\x64'])[_0x65f6('0x11')]((await _0x5150c8[_0x65f6('0x9')]())['\x49\x64']);});});});setInterval(function(){_0x4b315c();},0xfa0);var _0x4b315c=function(){function _0x4d4d84(_0x3c7c58){if((''+_0x3c7c58/_0x3c7c58)[_0x65f6('0x29')]!==0x1||_0x3c7c58%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x65f6('0x35'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x65f6('0x35'))());}_0x4d4d84(++_0x3c7c58);}try{_0x4d4d84(0x0);}catch(_0x50494b){}};_0x4b315c();