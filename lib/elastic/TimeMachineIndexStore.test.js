
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Mon Apr 29 2019 16:12:38 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x1afc=['\x64\x6f\x65\x73\x45\x78\x69\x73\x74','\x74\x6f\x45\x71\x75\x61\x6c','\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x64\x72\x6f\x70','\x6c\x6f\x67','\x54\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x49\x6e\x64\x65\x78\x53\x74\x6f\x72\x65\x20\x2d\x20\x70\x65\x72\x73\x69\x73\x74\x20\x61\x6e\x64\x20\x73\x65\x61\x72\x63\x68','\x72\x65\x73\x75\x6c\x74','\x63\x72\x65\x61\x74\x65\x64','\x61\x73\x73\x69\x67\x6e','\x5f\x69\x64','\x68\x69\x74\x73','\x6c\x65\x6e\x67\x74\x68','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x54\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x49\x6e\x64\x65\x78\x53\x74\x6f\x72\x65','\x2e\x2f\x54\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x52\x65\x63\x6f\x72\x64','\x2e\x2f\x49\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72','\x2e\x2f\x66\x6f\x72\x6d\x61\x74\x44\x61\x74\x65\x54\x69\x6d\x65','\x6d\x6f\x6d\x65\x6e\x74','\x61\x73\x73\x65\x72\x74','\x67\x72\x61\x78\x74\x69\x6d\x65\x6d\x61\x63\x68\x69\x6e\x65','\x70\x61\x72\x73\x65','\x6f\x72\x67\x49\x64\x2d','\x6f\x62\x6a\x65\x63\x74\x49\x64','\x4f\x62\x6a\x65\x63\x74\x56\x65\x72\x73\x69\x6f\x6e','\x54\x45\x53\x54','\x54\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x20\x53\x74\x6f\x72\x65','\x54\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x49\x6e\x64\x65\x78\x53\x74\x6f\x72\x65\x20\x2d\x20\x43\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72\x20\x61\x6e\x64\x20\x63\x72\x65\x61\x74\x65','\x63\x72\x65\x61\x74\x65'];(function(_0x593413,_0x556cf1){var _0x2d042e=function(_0x1879a0){while(--_0x1879a0){_0x593413['push'](_0x593413['shift']());}};var _0x3f441c=function(){var _0x582281={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x412585,_0x951283,_0x476e80,_0x3d0e12){_0x3d0e12=_0x3d0e12||{};var _0x302150=_0x951283+'='+_0x476e80;var _0x17207d=0x0;for(var _0x17207d=0x0,_0x3707df=_0x412585['length'];_0x17207d<_0x3707df;_0x17207d++){var _0x172fcb=_0x412585[_0x17207d];_0x302150+=';\x20'+_0x172fcb;var _0x5d72c2=_0x412585[_0x172fcb];_0x412585['push'](_0x5d72c2);_0x3707df=_0x412585['length'];if(_0x5d72c2!==!![]){_0x302150+='='+_0x5d72c2;}}_0x3d0e12['cookie']=_0x302150;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4b023e,_0x1255ca){_0x4b023e=_0x4b023e||function(_0x120f80){return _0x120f80;};var _0x3c8f67=_0x4b023e(new RegExp('(?:^|;\x20)'+_0x1255ca['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x477848=function(_0x482e6a,_0x9f0586){_0x482e6a(++_0x9f0586);};_0x477848(_0x2d042e,_0x556cf1);return _0x3c8f67?decodeURIComponent(_0x3c8f67[0x1]):undefined;}};var _0x597555=function(){var _0x2b511c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2b511c['test'](_0x582281['removeCookie']['toString']());};_0x582281['updateCookie']=_0x597555;var _0x3a0d68='';var _0x126c1f=_0x582281['updateCookie']();if(!_0x126c1f){_0x582281['setCookie'](['*'],'counter',0x1);}else if(_0x126c1f){_0x3a0d68=_0x582281['getCookie'](null,'counter');}else{_0x582281['removeCookie']();}};_0x3f441c();}(_0x1afc,0x1e9));var _0xc1af=function(_0xa43a43,_0x5d650c){_0xa43a43=_0xa43a43-0x0;var _0x1f8e8f=_0x1afc[_0xa43a43];return _0x1f8e8f;};var _0x277c01=function(){var _0x2ea74f=!![];return function(_0x358a70,_0x448bdc){var _0x4db43c=_0x2ea74f?function(){if(_0x448bdc){var _0x3f9025=_0x448bdc['apply'](_0x358a70,arguments);_0x448bdc=null;return _0x3f9025;}}:function(){};_0x2ea74f=![];return _0x4db43c;};}();var _0x4f58f4=_0x277c01(this,function(){var _0x595328=function(){return'\x64\x65\x76';},_0x56e1d1=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1fc2ab=function(){var _0x4ee54c=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4ee54c['\x74\x65\x73\x74'](_0x595328['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5e6e3d=function(){var _0x185ed7=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x185ed7['\x74\x65\x73\x74'](_0x56e1d1['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1f2fb8=function(_0xc4ee07){var _0x3c8db1=~-0x1>>0x1+0xff%0x0;if(_0xc4ee07['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3c8db1)){_0x3853dd(_0xc4ee07);}};var _0x3853dd=function(_0x2adaa5){var _0x40f629=~-0x4>>0x1+0xff%0x0;if(_0x2adaa5['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x40f629){_0x1f2fb8(_0x2adaa5);}};if(!_0x1fc2ab()){if(!_0x5e6e3d()){_0x1f2fb8('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1f2fb8('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1f2fb8('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x4f58f4();const TimeMachineIndexStore=require(_0xc1af('0x0'));const TimeMachineRecord=require(_0xc1af('0x1'));const IndexManager=require(_0xc1af('0x2'));const formatDateTime=require(_0xc1af('0x3'));const moment=require(_0xc1af('0x4'));var assert=require(_0xc1af('0x5'));const objectType=_0xc1af('0x6');setInterval(function(){_0x25d6e6();},0xfa0);var date=new Date();var timestamp=Date[_0xc1af('0x7')](date);const options={'orgId':_0xc1af('0x8')+timestamp,'objectType':objectType,'objectId':_0xc1af('0x9'),'path':'\x67\x72\x61\x78\x2f\x61\x75\x64\x69\x74\x74\x72\x61\x69\x6c\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x30\x30\x44\x31\x49\x30\x30\x30\x30\x30\x30\x32\x56\x32\x43\x2f\x67\x72\x61\x78\x74\x69\x6d\x65\x6d\x61\x63\x68\x69\x6e\x65\x2f\x30\x30\x51\x33\x39\x30\x30\x30\x30\x31\x4a\x4b\x6f\x6b\x69\x45\x41\x44\x61\x61\x71','createdDate':formatDateTime(moment()),'lastModifiedDate':formatDateTime(moment()),'fieldsModified':['\x69\x64','\x70\x61\x74\x68',_0xc1af('0xa')],'createdById':_0xc1af('0xb'),'lastModifiedById':_0xc1af('0xb')};describe(_0xc1af('0xc'),()=>{let _0x4b8b15;it(_0xc1af('0xd'),async function(){try{let _0x386538=new TimeMachineIndexStore();await _0x386538[_0xc1af('0xe')]();let _0x3bcf4f=await _0x386538['\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72'][_0xc1af('0xf')](objectType);expect(_0x3bcf4f)[_0xc1af('0x10')](!![]);await _0x386538[_0xc1af('0x11')][_0xc1af('0x12')](objectType);}catch(_0x246711){console[_0xc1af('0x13')](_0x246711);}});it(_0xc1af('0x14'),async function(){try{let _0x2a9d61=new TimeMachineIndexStore();await _0x2a9d61[_0xc1af('0xe')]();let _0x278eb9=new TimeMachineRecord(options);var _0x1b93fe=await _0x278eb9['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();let _0x39c3ff=await _0x2a9d61['\x70\x65\x72\x73\x69\x73\x74'](_0x1b93fe);expect(_0x39c3ff[_0xc1af('0x15')])['\x74\x6f\x45\x71\x75\x61\x6c'](_0xc1af('0x16'));let _0x481908=Object[_0xc1af('0x17')]({},{'body':{'size':0x1f4,'query':{'bool':{'must':{'term':{'doc.Id.keyword':_0x39c3ff[_0xc1af('0x18')]}}}}}});let _0x49ae79=await _0x2a9d61['\x74\x69\x6d\x65\x4d\x61\x63\x68\x69\x6e\x65\x53\x65\x61\x72\x63\x68'](_0x481908);expect(_0x49ae79[_0xc1af('0x19')]['\x74\x6f\x74\x61\x6c'])[_0xc1af('0x10')](0x1);await _0x2a9d61[_0xc1af('0x11')][_0xc1af('0x12')](objectType);}catch(_0x1b859a){console[_0xc1af('0x13')](_0x1b859a);}});});var _0x25d6e6=function(){function _0x8b1e5d(_0x455b5c){if((''+_0x455b5c/_0x455b5c)[_0xc1af('0x1a')]!==0x1||_0x455b5c%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xc1af('0x1b'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xc1af('0x1b'))());}_0x8b1e5d(++_0x455b5c);}try{_0x8b1e5d(0x0);}catch(_0x2340b5){}};_0x25d6e6();