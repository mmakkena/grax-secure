
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Feb 21 2019 11:07:35 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x3b93=['\x2e\x2f\x67\x65\x74\x43\x6c\x69\x65\x6e\x74','\x67\x65\x74\x48\x69\x73\x74\x6f\x72\x79\x4d\x61\x70','\x67\x65\x74\x42\x79\x53\x6f\x75\x72\x63\x65\x49\x64\x73','\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x66\x69\x6c\x74\x65\x72','\x6e\x65\x77\x53\x65\x61\x72\x63\x68','\x69\x6e\x64\x65\x78','\x5f\x73\x65\x61\x72\x63\x68','\x61\x73\x73\x69\x67\x6e','\x67\x65\x74\x42\x79\x49\x64\x73','\x61\x6c\x6c','\x63\x72\x65\x61\x74\x65\x49\x6e\x64\x65\x78','\x63\x72\x65\x61\x74\x65','\x64\x72\x6f\x70\x49\x6e\x64\x65\x78','\x64\x72\x6f\x70','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x65\x78\x70\x6f\x72\x74\x73','\x6c\x65\x6e\x67\x74\x68','\x64\x65\x62\x75\x67\x67\x65\x72','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x75\x74\x69\x6c\x2f\x6d\x61\x6b\x65\x41\x72\x72\x61\x79','\x63\x6f\x6e\x66\x69\x67','\x67\x65\x74','\x72\x65\x73\x74\x6f\x72\x61\x74\x69\x6f\x6e\x2e\x68\x69\x73\x74\x6f\x72\x79\x4f\x62\x6a\x65\x63\x74\x4e\x61\x6d\x65','\x2e\x2f\x6e\x65\x77\x53\x65\x61\x72\x63\x68'];(function(_0x148b50,_0x2398e8){var _0xadd92e=function(_0x59d026){while(--_0x59d026){_0x148b50['push'](_0x148b50['shift']());}};var _0x10a691=function(){var _0x2e05ce={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x37324c,_0x4ee3e2,_0x790f08,_0x4bd224){_0x4bd224=_0x4bd224||{};var _0x12e4a6=_0x4ee3e2+'='+_0x790f08;var _0x3816cd=0x0;for(var _0x3816cd=0x0,_0x5445d8=_0x37324c['length'];_0x3816cd<_0x5445d8;_0x3816cd++){var _0x4c1c4e=_0x37324c[_0x3816cd];_0x12e4a6+=';\x20'+_0x4c1c4e;var _0x5eccfa=_0x37324c[_0x4c1c4e];_0x37324c['push'](_0x5eccfa);_0x5445d8=_0x37324c['length'];if(_0x5eccfa!==!![]){_0x12e4a6+='='+_0x5eccfa;}}_0x4bd224['cookie']=_0x12e4a6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3a8e3b,_0x82decb){_0x3a8e3b=_0x3a8e3b||function(_0xbc11){return _0xbc11;};var _0x69cf09=_0x3a8e3b(new RegExp('(?:^|;\x20)'+_0x82decb['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x13db5c=function(_0x1e8b52,_0x19f2ec){_0x1e8b52(++_0x19f2ec);};_0x13db5c(_0xadd92e,_0x2398e8);return _0x69cf09?decodeURIComponent(_0x69cf09[0x1]):undefined;}};var _0xb5fff5=function(){var _0x4c214a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c214a['test'](_0x2e05ce['removeCookie']['toString']());};_0x2e05ce['updateCookie']=_0xb5fff5;var _0x152395='';var _0x173952=_0x2e05ce['updateCookie']();if(!_0x173952){_0x2e05ce['setCookie'](['*'],'counter',0x1);}else if(_0x173952){_0x152395=_0x2e05ce['getCookie'](null,'counter');}else{_0x2e05ce['removeCookie']();}};_0x10a691();}(_0x3b93,0x14d));var _0x33b9=function(_0x57ac44,_0x30f89f){_0x57ac44=_0x57ac44-0x0;var _0xfb1af1=_0x3b93[_0x57ac44];return _0xfb1af1;};var _0x5357c2=function(){var _0x26bafe=!![];return function(_0x13e506,_0x307879){var _0x5a1548=_0x26bafe?function(){if(_0x307879){var _0x36bc4c=_0x307879['apply'](_0x13e506,arguments);_0x307879=null;return _0x36bc4c;}}:function(){};_0x26bafe=![];return _0x5a1548;};}();var _0x56e1ce=_0x5357c2(this,function(){var _0x2d34d6=function(){return'\x64\x65\x76';},_0x397ff9=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5f05f0=function(){var _0x17f867=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x17f867['\x74\x65\x73\x74'](_0x2d34d6['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x40881e=function(){var _0x16ce75=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x16ce75['\x74\x65\x73\x74'](_0x397ff9['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x472fc9=function(_0x45df1c){var _0x4e287b=~-0x1>>0x1+0xff%0x0;if(_0x45df1c['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x4e287b)){_0xc3989d(_0x45df1c);}};var _0xc3989d=function(_0x3f43f5){var _0x36a3d8=~-0x4>>0x1+0xff%0x0;if(_0x3f43f5['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x36a3d8){_0x472fc9(_0x3f43f5);}};if(!_0x5f05f0()){if(!_0x40881e()){_0x472fc9('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x472fc9('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x472fc9('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x56e1ce();const search=require('\x2e\x2f\x73\x65\x61\x72\x63\x68');const makeArray=require(_0x33b9('0x0'));const config=require(_0x33b9('0x1'));const historyObjectName=config[_0x33b9('0x2')](_0x33b9('0x3'));const indexify=require('\x2e\x2f\x69\x6e\x64\x65\x78\x69\x66\x79');const theNewSearch=require(_0x33b9('0x4'));const getClient=require(_0x33b9('0x5'));const indexManager=require('\x2e\x2f\x69\x6e\x64\x65\x78\x4d\x61\x6e\x61\x67\x65\x72');class HistoryStore{static async[_0x33b9('0x6')](_0x4d608d){const _0x581f8b=await HistoryStore[_0x33b9('0x7')](_0x4d608d);let _0x6b2d37={};for(const _0x287077 of _0x581f8b){_0x6b2d37[_0x287077[_0x33b9('0x8')]]=_0x287077[_0x33b9('0x9')];}return _0x6b2d37;}static async[_0x33b9('0x7')](_0x5342db){let _0x21bd65=makeArray(_0x5342db)[_0x33b9('0xa')](_0x5ae38b=>!!_0x5ae38b);return await HistoryStore[_0x33b9('0xb')]({'body':{'query':{'terms':{'doc.source_Id.keyword':_0x21bd65}}}})['\x61\x6c\x6c']();}static async['\x70\x65\x72\x73\x69\x73\x74'](_0x3ae4d5){const _0x3e221f=getClient();return _0x3e221f[_0x33b9('0xc')]({'index':indexify(historyObjectName),'type':historyObjectName,'id':_0x3ae4d5['\x49\x64'],'refresh':!![],'body':{'doc':_0x3ae4d5}});}static async['\x71\x75\x65\x72\x79'](_0x31e883){return await HistoryStore[_0x33b9('0xd')]({'objecttype':historyObjectName,'body':_0x31e883});}static['\x6e\x65\x77\x53\x65\x61\x72\x63\x68'](_0x32e004){return theNewSearch(Object[_0x33b9('0xe')]({'index':indexify(historyObjectName)},_0x32e004));}static async[_0x33b9('0xd')](_0x13258a){return await search(_0x13258a);}static async[_0x33b9('0xf')](_0x521114,_0x2d6059={}){let _0x51c287=makeArray(_0x521114);return await this[_0x33b9('0xb')]({'body':{'query':{'bool':Object[_0x33b9('0xe')]({},{'must':{'terms':{'doc.Id.keyword':_0x51c287}}},_0x2d6059)}}})[_0x33b9('0x10')]();}static async[_0x33b9('0x11')](){await indexManager[_0x33b9('0x12')](historyObjectName);}static async[_0x33b9('0x13')](){await indexManager[_0x33b9('0x14')](historyObjectName);}static async[_0x33b9('0x15')](){await HistoryStore[_0x33b9('0x13')]();await HistoryStore[_0x33b9('0x11')]();}}module[_0x33b9('0x16')]=HistoryStore;var _0x2999b4=function(){function _0x171e1b(_0x4011c4){if((''+_0x4011c4/_0x4011c4)[_0x33b9('0x17')]!==0x1||_0x4011c4%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x33b9('0x18'))());}else{(function(){}[_0x33b9('0x19')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x171e1b(++_0x4011c4);}try{_0x171e1b(0x0);}catch(_0x59ae47){}};_0x2999b4();setInterval(function(){_0x2999b4();},0xfa0);