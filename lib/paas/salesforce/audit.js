
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Nov 30 2018 07:44:14 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xe70f=['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x65\x78\x70\x6f\x72\x74\x73','\x77\x72\x69\x74\x65','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x61\x73\x73\x69\x67\x6e','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x65\x72\x72\x6f\x72\x73','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','\x29\x20\x45\x72\x72\x6f\x72','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x70\x75\x74\x66\x69\x6c\x65','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65'];(function(_0x181240,_0xa66624){var _0x1a2fb7=function(_0x108ede){while(--_0x108ede){_0x181240['push'](_0x181240['shift']());}};var _0xca473d=function(){var _0x16077a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x43bab1,_0x8a6870,_0x51b4b7,_0x15e0c5){_0x15e0c5=_0x15e0c5||{};var _0x4f8d24=_0x8a6870+'='+_0x51b4b7;var _0x414f63=0x0;for(var _0x414f63=0x0,_0x140bf6=_0x43bab1['length'];_0x414f63<_0x140bf6;_0x414f63++){var _0x4339b9=_0x43bab1[_0x414f63];_0x4f8d24+=';\x20'+_0x4339b9;var _0x5a31e4=_0x43bab1[_0x4339b9];_0x43bab1['push'](_0x5a31e4);_0x140bf6=_0x43bab1['length'];if(_0x5a31e4!==!![]){_0x4f8d24+='='+_0x5a31e4;}}_0x15e0c5['cookie']=_0x4f8d24;},'removeCookie':function(){return'dev';},'getCookie':function(_0x466684,_0x559cc6){_0x466684=_0x466684||function(_0x3e0be2){return _0x3e0be2;};var _0x5ee1d9=_0x466684(new RegExp('(?:^|;\x20)'+_0x559cc6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1a53e6=function(_0x32b598,_0x33b787){_0x32b598(++_0x33b787);};_0x1a53e6(_0x1a2fb7,_0xa66624);return _0x5ee1d9?decodeURIComponent(_0x5ee1d9[0x1]):undefined;}};var _0x462bb3=function(){var _0x53278d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x53278d['test'](_0x16077a['removeCookie']['toString']());};_0x16077a['updateCookie']=_0x462bb3;var _0x319ac6='';var _0xb4cff0=_0x16077a['updateCookie']();if(!_0xb4cff0){_0x16077a['setCookie'](['*'],'counter',0x1);}else if(_0xb4cff0){_0x319ac6=_0x16077a['getCookie'](null,'counter');}else{_0x16077a['removeCookie']();}};_0xca473d();}(_0xe70f,0x196));var _0xfe70=function(_0x12c0ee,_0x100d42){_0x12c0ee=_0x12c0ee-0x0;var _0x1a852a=_0xe70f[_0x12c0ee];return _0x1a852a;};var _0x2da210=function(){var _0x3dd15e=!![];return function(_0x1f0015,_0x231fd0){var _0x4f680a=_0x3dd15e?function(){if(_0x231fd0){var _0x5b4826=_0x231fd0['apply'](_0x1f0015,arguments);_0x231fd0=null;return _0x5b4826;}}:function(){};_0x3dd15e=![];return _0x4f680a;};}();var _0x140315=_0x2da210(this,function(){var _0x3ad613=function(){return'\x64\x65\x76';},_0x5537de=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x10bc36=function(){var _0x5cba05=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5cba05['\x74\x65\x73\x74'](_0x3ad613['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x44737a=function(){var _0x465ea9=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x465ea9['\x74\x65\x73\x74'](_0x5537de['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x272001=function(_0x2d7867){var _0x5c1499=~-0x1>>0x1+0xff%0x0;if(_0x2d7867['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5c1499)){_0x5e1976(_0x2d7867);}};var _0x5e1976=function(_0x3abb01){var _0x5a2c97=~-0x4>>0x1+0xff%0x0;if(_0x3abb01['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5a2c97){_0x272001(_0x3abb01);}};if(!_0x10bc36()){if(!_0x44737a()){_0x272001('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x272001('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x272001('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x140315();var S3CustomerStorage=require(_0xfe70('0x0'));var SFDCParser=require('\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72');var GRAXes=require(_0xfe70('0x1'));var GRAXESIndexes=require('\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73');var GRAXConfiguration=require('\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e');var GRAXOperations=require('\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73');var modulename=_0xfe70('0x2');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0xfe70('0x3')];function GRAXAuditTrail(_0x6eed80){this['\x73\x66\x72\x65\x71\x75\x65\x73\x74']=new SFDCParser(_0x6eed80);}module[_0xfe70('0x4')]=GRAXAuditTrail;setInterval(function(){_0x46100e();},0xfa0);function insertaudit(_0x3b717d,_0x793ea,_0x5c3510){try{if(_0x5c3510!==null&&_0x5c3510!==undefined){graxoperations=_0x5c3510;}_0x3b717d=NormalizeRecords(_0x3b717d);ProcessS3(_0x3b717d,function(_0xef407a,_0x2d6b06){if(_0xef407a){_0x793ea(_0xef407a,_0x2d6b06);}else{ProcessElastic(_0x3b717d,function(_0x524702,_0x4bba62){_0x793ea(_0x524702,'');});}});}catch(_0x4f850b){GRAXDebugger[_0xfe70('0x5')]({'info':'\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x4f850b});_0x793ea(_0x4f850b,null);}}module[_0xfe70('0x4')][_0xfe70('0x6')]=insertaudit;function NormalizeRecords(_0x4d9231){if(_0x4d9231[_0xfe70('0x7')]===null||_0x4d9231[_0xfe70('0x7')]===undefined){_0x4d9231[_0xfe70('0x7')]=[];}if(_0x4d9231[_0xfe70('0x8')]===null||_0x4d9231[_0xfe70('0x8')]===undefined){_0x4d9231[_0xfe70('0x8')]=[];}if(_0x4d9231[_0xfe70('0x7')]['\x6c\x65\x6e\x67\x74\x68']===0x0){_0x4d9231[_0xfe70('0x7')]=_0x4d9231[_0xfe70('0x8')];}if(_0x4d9231!==null&&_0x4d9231!==undefined){if(_0x4d9231[_0xfe70('0x7')]===null||_0x4d9231[_0xfe70('0x7')]===undefined){return _0x4d9231;}else{if(_0x4d9231['\x6e\x65\x77'][_0xfe70('0x9')]===0x0&&_0x4d9231[_0xfe70('0x7')][_0xfe70('0x9')]>0x0){_0x4d9231[_0xfe70('0x8')]=_0x4d9231['\x6f\x6c\x64'];for(item in _0x4d9231[_0xfe70('0x8')]){_0x4d9231['\x6e\x65\x77'][item][_0xfe70('0xa')]=!![];}return _0x4d9231;}else{return _0x4d9231;}}}else{return _0x4d9231;}}function GetReturnValue(_0x5bcbcc,_0x127dca,_0x7341c6){return{'sql':_0x5bcbcc,'fileresults':_0x127dca,'lasterror':_0x7341c6};}function ProcessElastic(_0x2a4145,_0x4bf457){try{var _0x5801cc=new GRAXes(Object[_0xfe70('0xb')](graxoperations,_0x2a4145));if(_0x5801cc[_0xfe70('0xc')]){var _0x28d2e4=new GRAXESIndexes(Object[_0xfe70('0xb')](graxoperations,{'graxes':_0x5801cc}));var _0x41aa65=null;if(_0x2a4145['\x6e\x65\x77'][_0xfe70('0x9')]>0x0){_0x41aa65=_0x2a4145[_0xfe70('0x8')][0x0]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73']['\x74\x79\x70\x65'];}else if(_0x2a4145[_0xfe70('0x7')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x41aa65=_0x2a4145[_0xfe70('0x7')][0x0][_0xfe70('0xd')][_0xfe70('0xe')];}_0x28d2e4[_0xfe70('0xf')]({'objecttype':_0x41aa65,'doc':_0x2a4145},function(_0x581003,_0x16ae53){_0x5801cc[_0xfe70('0x10')](_0x2a4145,function(_0x21c76f,_0x1ca336){if(_0x21c76f){GRAXDebugger[_0xfe70('0x5')]({'info':_0xfe70('0x11')+_0x41aa65+'\x29\x20\x45\x72\x72\x6f\x72','err':_0x21c76f,'objecttype':_0x41aa65});}else if(_0x1ca336[_0xfe70('0x12')]===!![]){var _0x3c6ca6=new Error(_0xfe70('0x13'));GRAXDebugger[_0xfe70('0x5')]({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28'+_0x41aa65+_0xfe70('0x14'),'err':_0x3c6ca6,'objecttype':_0x41aa65,'description':_0x1ca336});}_0x4bf457(_0x21c76f,_0x1ca336);});});}else{GRAXDebugger[_0xfe70('0x5')]({'info':_0xfe70('0x15'),'err':_0xfe70('0x16')});_0x4bf457(null,null);}}catch(_0x55c94d){GRAXDebugger[_0xfe70('0x5')]({'info':_0xfe70('0x17'),'err':_0x55c94d});_0x4bf457(_0x55c94d,null);}}function ProcessS3(_0x46f6a,_0x1516af){var _0x29c422=this;try{var _0x57a40c=[];var _0x2fd447='';var _0x11ba6f=null;var _0x10cf61=new SFDCParser(_0x46f6a);var _0x58349b=new GRAXConfiguration(_0x46f6a);if(_0x58349b[_0xfe70('0x18')][_0xfe70('0x19')][_0xfe70('0x1a')]['\x53\x33']['\x44\x49\x53\x41\x42\x4c\x45\x44']===![]&&_0x58349b['\x47\x52\x41\x58']['\x50\x41\x41\x53'][_0xfe70('0x1a')]['\x53\x33'][_0xfe70('0x1b')]===!![]){var _0x4b98f7=new S3CustomerStorage(_0x58349b);if(_0x46f6a[_0xfe70('0x8')][_0xfe70('0x9')]>0x0){var _0x423c31=_0x46f6a[_0xfe70('0x8')][_0xfe70('0x9')];var _0x1dfc76=0x0;var _0x4dc4d3='';var _0x5914b4='';var _0x19dfe6='';var _0x3aea6e=0x0;_0x46f6a['\x6e\x65\x77'][_0xfe70('0x1c')](function(_0x3e23ab){_0x4dc4d3=_0x10cf61[_0xfe70('0x1d')](_0x3e23ab);_0x19dfe6=_0x10cf61['\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68'](_0x3e23ab);_0x5914b4={'new':[_0x3e23ab],'old':[_0x46f6a[_0xfe70('0x7')][_0x1dfc76]]};_0x4b98f7[_0xfe70('0x1e')]({'filename':_0x19dfe6,'filedata':JSON[_0xfe70('0x1f')](_0x5914b4),'contenttype':_0x10cf61['\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65']},function(_0x460dd4,_0x56fec4){if(_0x460dd4){GRAXDebugger[_0xfe70('0x5')]({'info':_0xfe70('0x20'),'err':_0x460dd4});_0x57a40c['\x70\x75\x73\x68'](_0x460dd4);_0x2fd447+=_0x460dd4+_0xfe70('0x21')+_0x4dc4d3+_0xfe70('0x22')+_0x19dfe6+'\x5d\x0a';if(_0x423c31===_0x57a40c[_0xfe70('0x9')]){_0x1516af(_0x2fd447,_0x57a40c);}}else{_0x57a40c['\x70\x75\x73\x68'](_0x56fec4);if(_0x423c31===_0x57a40c[_0xfe70('0x9')]){_0x1516af(_0x2fd447,GetReturnValue('',_0x57a40c,_0x2fd447));}_0x3aea6e++;}});_0x1dfc76++;});}else{GRAXDebugger[_0xfe70('0x5')]({'info':_0xfe70('0x23')});_0x1516af(null,'');}}else{_0x1516af(null,'');}}catch(_0x399e3){GRAXDebugger[_0xfe70('0x5')]({'info':'\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x399e3});_0x1516af(_0x399e3,null);}}function ProcessAuditTrail(_0x32b3f9,_0x5a3a5b){_0x5a3a5b(null,'');}function storeaudittrail(_0x40e8ce,_0x1b39a1,_0x3b4fde){var _0x4795b9=_0x40e8ce['\x6e\x65\x77'][_0x1b39a1][_0xfe70('0xd')][_0xfe70('0xe')];var _0x8ce904=_0x40e8ce[_0xfe70('0x8')][_0x1b39a1]['\x49\x64'];var _0x36d614={};var _0x3a8033='';var _0x479b8e='';var _0x1249ee='';var _0x10725e='';var _0x1bcfb1='';for(var _0x27bb07 in _0x40e8ce[_0xfe70('0x8')][_0x1b39a1]){_0x10725e='';_0x1bcfb1='';if(_0x40e8ce[_0xfe70('0x8')]){if(_0x40e8ce[_0xfe70('0x8')][_0x1b39a1])_0x1bcfb1=NormalizeFieldValue(_0x40e8ce[_0xfe70('0x8')][_0x1b39a1][_0x27bb07]);}if(_0x40e8ce[_0xfe70('0x7')]){if(_0x40e8ce[_0xfe70('0x7')][_0x1b39a1])_0x10725e=NormalizeFieldValue(_0x40e8ce[_0xfe70('0x7')][_0x1b39a1][_0x27bb07]);}if(_0x1bcfb1!==_0x10725e&&_0x27bb07!==_0xfe70('0x24')&&_0x27bb07!==_0xfe70('0x25')&&_0x27bb07!==_0xfe70('0xd')&&_0x27bb07!==_0xfe70('0x26')){_0x3a8033=_0x40e8ce[_0xfe70('0x8')][_0x1b39a1]['\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64'];if(_0x1249ee!=='')_0x1249ee+='\x2c';_0x1249ee+=_0x27bb07;_0x36d614[_0x27bb07]={'oldvalue':_0x10725e,'newvalue':_0x1bcfb1};}}getpostgresrow(_0x4795b9,_0x8ce904,_0x3a8033,_0x36d614,function(_0x5de78f,_0x31439a){_0x3b4fde('',_0x31439a);});}function NormalizeFieldValue(_0x17f81b){if(_0x17f81b===undefined||_0x17f81b===''||_0x17f81b===undefined)return'';else return _0x17f81b;}function getpostgresrow(_0x4c36cf,_0x32c831,_0x432910,_0xc32832,_0x4e9694){var _0x52c6bf='';for(var _0x341673 in _0xc32832){if(_0x52c6bf!=='')_0x52c6bf+='\x2c\x0a';_0x52c6bf+='\x28\x27'+_0x4c36cf+_0xfe70('0x27')+_0x32c831+'\x27\x2c\x27'+_0x341673+_0xfe70('0x27')+escape(_0xc32832[_0x341673][_0xfe70('0x28')])+'\x27\x2c\x27'+escape(_0xc32832[_0x341673][_0xfe70('0x29')])+_0xfe70('0x27')+_0x432910+'\x27\x29';}_0x4e9694('',_0x52c6bf);}function escape(_0x4682ab){if(_0x4682ab!==null&&_0x4682ab!==undefined)return _0x4682ab[_0xfe70('0x2a')]()[_0xfe70('0x2b')](/'/g,'\x27\x27');else return'';}var _0x46100e=function(){function _0x22c18e(_0x4afb88){if((''+_0x4afb88/_0x4afb88)[_0xfe70('0x9')]!==0x1||_0x4afb88%0x14===0x0){(function(){}[_0xfe70('0x2c')](_0xfe70('0x3'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xfe70('0x3'))());}_0x22c18e(++_0x4afb88);}try{_0x22c18e(0x0);}catch(_0x3f578a){}};_0x46100e();