
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Wed Dec 19 2018 15:44:00 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xc5ab=['\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x61\x73\x73\x69\x67\x6e','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x75\x70\x73\x65\x72\x74','\x77\x72\x69\x74\x65','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x29\x20\x45\x72\x72\x6f\x72','\x65\x72\x72\x6f\x72\x73','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x70\x75\x74\x66\x69\x6c\x65','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27'];(function(_0x486dfa,_0x52d4d3){var _0x10d4fc=function(_0x5692c4){while(--_0x5692c4){_0x486dfa['push'](_0x486dfa['shift']());}};var _0x3e3eb5=function(){var _0x17f1f8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1cc2a3,_0x11ad70,_0xfbc794,_0x50a0a0){_0x50a0a0=_0x50a0a0||{};var _0xdb4933=_0x11ad70+'='+_0xfbc794;var _0x501a21=0x0;for(var _0x501a21=0x0,_0x324c0e=_0x1cc2a3['length'];_0x501a21<_0x324c0e;_0x501a21++){var _0x1f7cc9=_0x1cc2a3[_0x501a21];_0xdb4933+=';\x20'+_0x1f7cc9;var _0x39eeae=_0x1cc2a3[_0x1f7cc9];_0x1cc2a3['push'](_0x39eeae);_0x324c0e=_0x1cc2a3['length'];if(_0x39eeae!==!![]){_0xdb4933+='='+_0x39eeae;}}_0x50a0a0['cookie']=_0xdb4933;},'removeCookie':function(){return'dev';},'getCookie':function(_0xdb628f,_0x38f44f){_0xdb628f=_0xdb628f||function(_0x2640a4){return _0x2640a4;};var _0x3e82fa=_0xdb628f(new RegExp('(?:^|;\x20)'+_0x38f44f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4ddb58=function(_0x92bab,_0x3bbc11){_0x92bab(++_0x3bbc11);};_0x4ddb58(_0x10d4fc,_0x52d4d3);return _0x3e82fa?decodeURIComponent(_0x3e82fa[0x1]):undefined;}};var _0x5f3108=function(){var _0x57b47e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x57b47e['test'](_0x17f1f8['removeCookie']['toString']());};_0x17f1f8['updateCookie']=_0x5f3108;var _0x59a7a4='';var _0x488b1d=_0x17f1f8['updateCookie']();if(!_0x488b1d){_0x17f1f8['setCookie'](['*'],'counter',0x1);}else if(_0x488b1d){_0x59a7a4=_0x17f1f8['getCookie'](null,'counter');}else{_0x17f1f8['removeCookie']();}};_0x3e3eb5();}(_0xc5ab,0x19c));var _0xbc5a=function(_0x50c02e,_0x203a62){_0x50c02e=_0x50c02e-0x0;var _0x478363=_0xc5ab[_0x50c02e];return _0x478363;};var _0x104d5c=function(){var _0x235482=!![];return function(_0x14b833,_0x5f5bea){var _0x17a254=_0x235482?function(){if(_0x5f5bea){var _0x125e5e=_0x5f5bea['apply'](_0x14b833,arguments);_0x5f5bea=null;return _0x125e5e;}}:function(){};_0x235482=![];return _0x17a254;};}();var _0x1e2bb7=_0x104d5c(this,function(){var _0x335f7f=function(){return'\x64\x65\x76';},_0x238b52=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x42c02a=function(){var _0x3382e1=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x3382e1['\x74\x65\x73\x74'](_0x335f7f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x27b8af=function(){var _0x34c861=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x34c861['\x74\x65\x73\x74'](_0x238b52['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1630f0=function(_0x2385a9){var _0x552489=~-0x1>>0x1+0xff%0x0;if(_0x2385a9['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x552489)){_0x1ed495(_0x2385a9);}};var _0x1ed495=function(_0x525f39){var _0x3c5fbe=~-0x4>>0x1+0xff%0x0;if(_0x525f39['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3c5fbe){_0x1630f0(_0x525f39);}};if(!_0x42c02a()){if(!_0x27b8af()){_0x1630f0('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1630f0('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1630f0('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1e2bb7();var S3CustomerStorage=require(_0xbc5a('0x0'));var SFDCParser=require(_0xbc5a('0x1'));var GRAXes=require(_0xbc5a('0x2'));var GRAXESIndexes=require(_0xbc5a('0x3'));var GRAXConfiguration=require(_0xbc5a('0x4'));var GRAXOperations=require(_0xbc5a('0x5'));var modulename=_0xbc5a('0x6');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0xbc5a('0x7')];function GRAXAuditTrail(_0x2c2e50){this[_0xbc5a('0x8')]=new SFDCParser(_0x2c2e50);}module[_0xbc5a('0x9')]=GRAXAuditTrail;function insertaudit(_0x2f9e51,_0x1fcc24,_0x252a62){try{if(_0x252a62!==null&&_0x252a62!==undefined){graxoperations=_0x252a62;}_0x2f9e51=NormalizeRecords(_0x2f9e51);ProcessS3(_0x2f9e51,function(_0x5e1c0b,_0x439c9a){if(_0x5e1c0b){_0x1fcc24(_0x5e1c0b,_0x439c9a);}else{ProcessElastic(_0x2f9e51,function(_0x442106,_0x12e1e4){_0x1fcc24(_0x442106,'');});}});}catch(_0x199ab8){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xbc5a('0xa'),'err':_0x199ab8});_0x1fcc24(_0x199ab8,null);}}module[_0xbc5a('0x9')]['\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74']=insertaudit;function NormalizeRecords(_0x577b36){if(_0x577b36[_0xbc5a('0xb')]===null||_0x577b36[_0xbc5a('0xb')]===undefined){_0x577b36[_0xbc5a('0xb')]=[];}if(_0x577b36[_0xbc5a('0xc')]===null||_0x577b36[_0xbc5a('0xc')]===undefined){_0x577b36[_0xbc5a('0xc')]=[];}if(_0x577b36[_0xbc5a('0xb')][_0xbc5a('0xd')]===0x0){_0x577b36[_0xbc5a('0xb')]=_0x577b36[_0xbc5a('0xc')];}if(_0x577b36!==null&&_0x577b36!==undefined){if(_0x577b36[_0xbc5a('0xb')]===null||_0x577b36['\x6f\x6c\x64']===undefined){return _0x577b36;}else{if(_0x577b36[_0xbc5a('0xc')][_0xbc5a('0xd')]===0x0&&_0x577b36[_0xbc5a('0xb')][_0xbc5a('0xd')]>0x0){_0x577b36[_0xbc5a('0xc')]=_0x577b36['\x6f\x6c\x64'];for(item in _0x577b36[_0xbc5a('0xc')]){_0x577b36[_0xbc5a('0xc')][item][_0xbc5a('0xe')]=!![];}return _0x577b36;}else{return _0x577b36;}}}else{return _0x577b36;}}function GetReturnValue(_0x4bc696,_0xdbff41,_0x5ee828){return{'sql':_0x4bc696,'fileresults':_0xdbff41,'lasterror':_0x5ee828};}function ProcessElastic(_0x1d642f,_0x59e28e){try{var _0x242092=new GRAXes(Object[_0xbc5a('0xf')](graxoperations,_0x1d642f));if(_0x242092[_0xbc5a('0x10')]){var _0x33b59e=new GRAXESIndexes(Object['\x61\x73\x73\x69\x67\x6e'](graxoperations,{'graxes':_0x242092}));var _0x2c3e13=null;if(_0x1d642f[_0xbc5a('0xc')][_0xbc5a('0xd')]>0x0){_0x2c3e13=_0x1d642f[_0xbc5a('0xc')][0x0][_0xbc5a('0x11')][_0xbc5a('0x12')];}else if(_0x1d642f['\x6f\x6c\x64'][_0xbc5a('0xd')]>0x0){_0x2c3e13=_0x1d642f[_0xbc5a('0xb')][0x0][_0xbc5a('0x11')][_0xbc5a('0x12')];}_0x33b59e[_0xbc5a('0x13')]({'objecttype':_0x2c3e13,'doc':_0x1d642f},function(_0x12ad4f,_0x288091){_0x242092[_0xbc5a('0x14')](_0x1d642f,function(_0x5b6029,_0x1035a7){if(_0x5b6029){GRAXDebugger[_0xbc5a('0x15')]({'info':_0xbc5a('0x16')+_0x2c3e13+_0xbc5a('0x17'),'err':_0x5b6029,'objecttype':_0x2c3e13});}else if(_0x1035a7[_0xbc5a('0x18')]===!![]){var _0x5d7a20=new Error('\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72');GRAXDebugger[_0xbc5a('0x15')]({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28'+_0x2c3e13+_0xbc5a('0x17'),'err':_0x5d7a20,'objecttype':_0x2c3e13,'description':_0x1035a7});}_0x59e28e(_0x5b6029,_0x1035a7);});});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xbc5a('0x19'),'err':_0xbc5a('0x1a')});_0x59e28e(null,null);}}catch(_0x3adb28){GRAXDebugger[_0xbc5a('0x15')]({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x3adb28});_0x59e28e(_0x3adb28,null);}}function ProcessS3(_0x4a2a3b,_0x5d61ec){var _0xb18620=this;try{var _0x5c97dc=[];var _0x2de35a='';var _0x33f8ac=null;var _0x2f5f9b=new SFDCParser(_0x4a2a3b);var _0x13ccc9=new GRAXConfiguration(_0x4a2a3b);if(_0x13ccc9[_0xbc5a('0x1b')][_0xbc5a('0x1c')][_0xbc5a('0x1d')]['\x53\x33'][_0xbc5a('0x1e')]===![]&&_0x13ccc9[_0xbc5a('0x1b')]['\x50\x41\x41\x53']['\x41\x4d\x41\x5a\x4f\x4e']['\x53\x33'][_0xbc5a('0x1f')]===!![]){var _0x522419=new S3CustomerStorage(_0x13ccc9);if(_0x4a2a3b['\x6e\x65\x77'][_0xbc5a('0xd')]>0x0){var _0x293cba=_0x4a2a3b[_0xbc5a('0xc')][_0xbc5a('0xd')];var _0xdb7657=0x0;var _0x2373d4='';var _0x358675='';var _0x4fce35='';var _0x58de1c=0x0;_0x4a2a3b[_0xbc5a('0xc')][_0xbc5a('0x20')](function(_0x2ec71a){_0x2373d4=_0x2f5f9b[_0xbc5a('0x21')](_0x2ec71a);_0x4fce35=_0x2f5f9b[_0xbc5a('0x22')](_0x2ec71a);_0x358675={'new':[_0x2ec71a],'old':[_0x4a2a3b[_0xbc5a('0xb')][_0xdb7657]]};_0x522419[_0xbc5a('0x23')]({'filename':_0x4fce35,'filedata':JSON[_0xbc5a('0x24')](_0x358675),'contenttype':_0x2f5f9b[_0xbc5a('0x25')]},function(_0x25ff15,_0x416648){if(_0x25ff15){GRAXDebugger[_0xbc5a('0x15')]({'info':_0xbc5a('0x26'),'err':_0x25ff15});_0x5c97dc[_0xbc5a('0x27')](_0x25ff15);_0x2de35a+=_0x25ff15+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0x2373d4+_0xbc5a('0x28')+_0x4fce35+'\x5d\x0a';if(_0x293cba===_0x5c97dc[_0xbc5a('0xd')]){_0x5d61ec(_0x2de35a,_0x5c97dc);}}else{_0x5c97dc[_0xbc5a('0x27')](_0x416648);if(_0x293cba===_0x5c97dc[_0xbc5a('0xd')]){_0x5d61ec(_0x2de35a,GetReturnValue('',_0x5c97dc,_0x2de35a));}_0x58de1c++;}});_0xdb7657++;});}else{GRAXDebugger[_0xbc5a('0x15')]({'info':_0xbc5a('0x29')});_0x5d61ec(null,'');}}else{_0x5d61ec(null,'');}}catch(_0x3496ac){GRAXDebugger[_0xbc5a('0x15')]({'info':_0xbc5a('0x2a'),'err':_0x3496ac});_0x5d61ec(_0x3496ac,null);}}function ProcessAuditTrail(_0x38dd8e,_0x2d4de8){_0x2d4de8(null,'');}function storeaudittrail(_0x32bb16,_0x1ad9ab,_0x48dde9){var _0x28f363=_0x32bb16['\x6e\x65\x77'][_0x1ad9ab]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0xbc5a('0x12')];var _0x5ed742=_0x32bb16[_0xbc5a('0xc')][_0x1ad9ab]['\x49\x64'];var _0x383c14={};var _0x163848='';var _0x26c991='';var _0x2c2790='';var _0x287a93='';var _0x564749='';for(var _0x4c9155 in _0x32bb16['\x6e\x65\x77'][_0x1ad9ab]){_0x287a93='';_0x564749='';if(_0x32bb16[_0xbc5a('0xc')]){if(_0x32bb16[_0xbc5a('0xc')][_0x1ad9ab])_0x564749=NormalizeFieldValue(_0x32bb16[_0xbc5a('0xc')][_0x1ad9ab][_0x4c9155]);}if(_0x32bb16['\x6f\x6c\x64']){if(_0x32bb16['\x6f\x6c\x64'][_0x1ad9ab])_0x287a93=NormalizeFieldValue(_0x32bb16[_0xbc5a('0xb')][_0x1ad9ab][_0x4c9155]);}if(_0x564749!==_0x287a93&&_0x4c9155!==_0xbc5a('0x2b')&&_0x4c9155!=='\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70'&&_0x4c9155!==_0xbc5a('0x11')&&_0x4c9155!==_0xbc5a('0x2c')){_0x163848=_0x32bb16[_0xbc5a('0xc')][_0x1ad9ab][_0xbc5a('0x2d')];if(_0x2c2790!=='')_0x2c2790+='\x2c';_0x2c2790+=_0x4c9155;_0x383c14[_0x4c9155]={'oldvalue':_0x287a93,'newvalue':_0x564749};}}getpostgresrow(_0x28f363,_0x5ed742,_0x163848,_0x383c14,function(_0x4dfd12,_0x25bcfe){_0x48dde9('',_0x25bcfe);});}setInterval(function(){_0x547b94();},0xfa0);function NormalizeFieldValue(_0x2a77e8){if(_0x2a77e8===undefined||_0x2a77e8===''||_0x2a77e8===undefined)return'';else return _0x2a77e8;}function getpostgresrow(_0x3123e4,_0x19089b,_0x4ce3a4,_0x3aa7ad,_0x15816f){var _0x38c737='';for(var _0x32197d in _0x3aa7ad){if(_0x38c737!=='')_0x38c737+='\x2c\x0a';_0x38c737+='\x28\x27'+_0x3123e4+_0xbc5a('0x2e')+_0x19089b+_0xbc5a('0x2e')+_0x32197d+_0xbc5a('0x2e')+escape(_0x3aa7ad[_0x32197d][_0xbc5a('0x2f')])+'\x27\x2c\x27'+escape(_0x3aa7ad[_0x32197d][_0xbc5a('0x30')])+_0xbc5a('0x2e')+_0x4ce3a4+'\x27\x29';}_0x15816f('',_0x38c737);}function escape(_0x430b0e){if(_0x430b0e!==null&&_0x430b0e!==undefined)return _0x430b0e[_0xbc5a('0x31')]()['\x72\x65\x70\x6c\x61\x63\x65'](/'/g,'\x27\x27');else return'';}var _0x547b94=function(){function _0xd9ba6d(_0x4828be){if((''+_0x4828be/_0x4828be)[_0xbc5a('0xd')]!==0x1||_0x4828be%0x14===0x0){(function(){}[_0xbc5a('0x32')](_0xbc5a('0x7'))());}else{(function(){}[_0xbc5a('0x32')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0xd9ba6d(++_0x4828be);}try{_0xd9ba6d(0x0);}catch(_0x835f53){}};_0x547b94();