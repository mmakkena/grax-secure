
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Wed Dec 19 2018 15:35:22 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x3714=['\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x70\x75\x74\x66\x69\x6c\x65','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x70\x75\x73\x68','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x74\x79\x70\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x77\x72\x69\x74\x65','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x61\x73\x73\x69\x67\x6e','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x75\x70\x73\x65\x72\x74','\x29\x20\x45\x72\x72\x6f\x72','\x65\x72\x72\x6f\x72\x73','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58'];(function(_0xf4eae3,_0x438eba){var _0x441c2a=function(_0x192b43){while(--_0x192b43){_0xf4eae3['push'](_0xf4eae3['shift']());}};var _0x4b74e7=function(){var _0x196403={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5b024d,_0x36a82b,_0x271740,_0xb7ec4d){_0xb7ec4d=_0xb7ec4d||{};var _0x2b6b7f=_0x36a82b+'='+_0x271740;var _0x1c30c6=0x0;for(var _0x1c30c6=0x0,_0x3979f2=_0x5b024d['length'];_0x1c30c6<_0x3979f2;_0x1c30c6++){var _0x361d91=_0x5b024d[_0x1c30c6];_0x2b6b7f+=';\x20'+_0x361d91;var _0x546ffc=_0x5b024d[_0x361d91];_0x5b024d['push'](_0x546ffc);_0x3979f2=_0x5b024d['length'];if(_0x546ffc!==!![]){_0x2b6b7f+='='+_0x546ffc;}}_0xb7ec4d['cookie']=_0x2b6b7f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x178b38,_0x40a9d6){_0x178b38=_0x178b38||function(_0x114f74){return _0x114f74;};var _0x5a8cde=_0x178b38(new RegExp('(?:^|;\x20)'+_0x40a9d6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5839c2=function(_0x39c443,_0x2a1182){_0x39c443(++_0x2a1182);};_0x5839c2(_0x441c2a,_0x438eba);return _0x5a8cde?decodeURIComponent(_0x5a8cde[0x1]):undefined;}};var _0x5c345d=function(){var _0x30f698=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x30f698['test'](_0x196403['removeCookie']['toString']());};_0x196403['updateCookie']=_0x5c345d;var _0x44098b='';var _0x5ddba4=_0x196403['updateCookie']();if(!_0x5ddba4){_0x196403['setCookie'](['*'],'counter',0x1);}else if(_0x5ddba4){_0x44098b=_0x196403['getCookie'](null,'counter');}else{_0x196403['removeCookie']();}};_0x4b74e7();}(_0x3714,0x7c));var _0x4371=function(_0x14f1a5,_0x53c15e){_0x14f1a5=_0x14f1a5-0x0;var _0x1174ea=_0x3714[_0x14f1a5];return _0x1174ea;};var _0x1b401c=function(){var _0x19d501=!![];return function(_0x364820,_0x293e33){var _0x2b4985=_0x19d501?function(){if(_0x293e33){var _0x1d37b6=_0x293e33['apply'](_0x364820,arguments);_0x293e33=null;return _0x1d37b6;}}:function(){};_0x19d501=![];return _0x2b4985;};}();var _0x388fcb=_0x1b401c(this,function(){var _0x3086a=function(){return'\x64\x65\x76';},_0x1ea3bf=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x391450=function(){var _0x46a460=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x46a460['\x74\x65\x73\x74'](_0x3086a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x918c03=function(){var _0x4c823e=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4c823e['\x74\x65\x73\x74'](_0x1ea3bf['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3891b0=function(_0x43ef86){var _0x550a89=~-0x1>>0x1+0xff%0x0;if(_0x43ef86['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x550a89)){_0x5773a6(_0x43ef86);}};var _0x5773a6=function(_0x40a90b){var _0x3ede9e=~-0x4>>0x1+0xff%0x0;if(_0x40a90b['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3ede9e){_0x3891b0(_0x40a90b);}};if(!_0x391450()){if(!_0x918c03()){_0x3891b0('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3891b0('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3891b0('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x388fcb();var S3CustomerStorage=require(_0x4371('0x0'));var SFDCParser=require(_0x4371('0x1'));var GRAXes=require(_0x4371('0x2'));var GRAXESIndexes=require('\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73');var GRAXConfiguration=require('\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e');var GRAXOperations=require(_0x4371('0x3'));var modulename=_0x4371('0x4');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0x4371('0x5')];function GRAXAuditTrail(_0x3fa3fe){this[_0x4371('0x6')]=new SFDCParser(_0x3fa3fe);}module[_0x4371('0x7')]=GRAXAuditTrail;function insertaudit(_0x27f22a,_0x10c977,_0x44693b){try{if(_0x44693b!==null&&_0x44693b!==undefined){graxoperations=_0x44693b;}_0x27f22a=NormalizeRecords(_0x27f22a);ProcessS3(_0x27f22a,function(_0x1772c9,_0x17c4d4){if(_0x1772c9){_0x10c977(_0x1772c9,_0x17c4d4);}else{ProcessElastic(_0x27f22a,function(_0x1ab1f8,_0x4d2d28){_0x10c977(_0x1ab1f8,'');});}});}catch(_0x34fa16){GRAXDebugger[_0x4371('0x8')]({'info':_0x4371('0x9'),'err':_0x34fa16});_0x10c977(_0x34fa16,null);}}module[_0x4371('0x7')][_0x4371('0xa')]=insertaudit;setInterval(function(){_0xbf2fb6();},0xfa0);function NormalizeRecords(_0x3557a8){if(_0x3557a8[_0x4371('0xb')]===null||_0x3557a8[_0x4371('0xb')]===undefined){_0x3557a8[_0x4371('0xb')]=[];}if(_0x3557a8['\x6e\x65\x77']===null||_0x3557a8[_0x4371('0xc')]===undefined){_0x3557a8[_0x4371('0xc')]=[];}if(_0x3557a8['\x6f\x6c\x64'][_0x4371('0xd')]===0x0){_0x3557a8['\x6f\x6c\x64']=_0x3557a8[_0x4371('0xc')];}if(_0x3557a8!==null&&_0x3557a8!==undefined){if(_0x3557a8[_0x4371('0xb')]===null||_0x3557a8[_0x4371('0xb')]===undefined){return _0x3557a8;}else{if(_0x3557a8[_0x4371('0xc')][_0x4371('0xd')]===0x0&&_0x3557a8[_0x4371('0xb')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x3557a8[_0x4371('0xc')]=_0x3557a8[_0x4371('0xb')];for(item in _0x3557a8[_0x4371('0xc')]){_0x3557a8[_0x4371('0xc')][item]['\x49\x73\x44\x65\x6c\x65\x74\x65\x64']=!![];}return _0x3557a8;}else{return _0x3557a8;}}}else{return _0x3557a8;}}function GetReturnValue(_0x3ba2e9,_0xdbdf35,_0x3044a0){return{'sql':_0x3ba2e9,'fileresults':_0xdbdf35,'lasterror':_0x3044a0};}function ProcessElastic(_0x494214,_0x1289a5){try{var _0x219a9c=new GRAXes(Object[_0x4371('0xe')](graxoperations,_0x494214));if(_0x219a9c[_0x4371('0xf')]){var _0x3ebecc=new GRAXESIndexes(Object[_0x4371('0xe')](graxoperations,{'graxes':_0x219a9c}));var _0x119f0f=null;if(_0x494214[_0x4371('0xc')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x119f0f=_0x494214[_0x4371('0xc')][0x0][_0x4371('0x10')]['\x74\x79\x70\x65'];}else if(_0x494214[_0x4371('0xb')][_0x4371('0xd')]>0x0){_0x119f0f=_0x494214['\x6f\x6c\x64'][0x0]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73']['\x74\x79\x70\x65'];}_0x3ebecc[_0x4371('0x11')]({'objecttype':_0x119f0f,'doc':_0x494214},function(_0xb7e1b7,_0x137c80){_0x219a9c[_0x4371('0x12')](_0x494214,function(_0x390c60,_0x19ee56){if(_0x390c60){GRAXDebugger[_0x4371('0x8')]({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28'+_0x119f0f+_0x4371('0x13'),'err':_0x390c60,'objecttype':_0x119f0f});}else if(_0x19ee56[_0x4371('0x14')]===!![]){var _0x1a736b=new Error(_0x4371('0x15'));GRAXDebugger[_0x4371('0x8')]({'info':_0x4371('0x16')+_0x119f0f+_0x4371('0x13'),'err':_0x1a736b,'objecttype':_0x119f0f,'description':_0x19ee56});}_0x1289a5(_0x390c60,_0x19ee56);});});}else{GRAXDebugger[_0x4371('0x8')]({'info':'\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','err':_0x4371('0x17')});_0x1289a5(null,null);}}catch(_0x3245b9){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x4371('0x18'),'err':_0x3245b9});_0x1289a5(_0x3245b9,null);}}function ProcessS3(_0x18228e,_0x3c6e3d){var _0x298304=this;try{var _0x391b6f=[];var _0x226196='';var _0x203622=null;var _0x3f3253=new SFDCParser(_0x18228e);var _0x448956=new GRAXConfiguration(_0x18228e);if(_0x448956[_0x4371('0x19')][_0x4371('0x1a')][_0x4371('0x1b')]['\x53\x33'][_0x4371('0x1c')]===![]&&_0x448956[_0x4371('0x19')]['\x50\x41\x41\x53']['\x41\x4d\x41\x5a\x4f\x4e']['\x53\x33'][_0x4371('0x1d')]===!![]){var _0x473f0c=new S3CustomerStorage(_0x448956);if(_0x18228e[_0x4371('0xc')][_0x4371('0xd')]>0x0){var _0x53ba0c=_0x18228e['\x6e\x65\x77'][_0x4371('0xd')];var _0x4a665c=0x0;var _0x7f6e9b='';var _0x4226f4='';var _0x3e699a='';var _0x414c7f=0x0;_0x18228e[_0x4371('0xc')][_0x4371('0x1e')](function(_0x4c8ec8){_0x7f6e9b=_0x3f3253['\x61\x75\x64\x69\x74\x70\x61\x74\x68'](_0x4c8ec8);_0x3e699a=_0x3f3253['\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68'](_0x4c8ec8);_0x4226f4={'new':[_0x4c8ec8],'old':[_0x18228e[_0x4371('0xb')][_0x4a665c]]};_0x473f0c[_0x4371('0x1f')]({'filename':_0x3e699a,'filedata':JSON[_0x4371('0x20')](_0x4226f4),'contenttype':_0x3f3253[_0x4371('0x21')]},function(_0xda5e5d,_0x229971){if(_0xda5e5d){GRAXDebugger[_0x4371('0x8')]({'info':_0x4371('0x22'),'err':_0xda5e5d});_0x391b6f['\x70\x75\x73\x68'](_0xda5e5d);_0x226196+=_0xda5e5d+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0x7f6e9b+_0x4371('0x23')+_0x3e699a+'\x5d\x0a';if(_0x53ba0c===_0x391b6f[_0x4371('0xd')]){_0x3c6e3d(_0x226196,_0x391b6f);}}else{_0x391b6f[_0x4371('0x24')](_0x229971);if(_0x53ba0c===_0x391b6f['\x6c\x65\x6e\x67\x74\x68']){_0x3c6e3d(_0x226196,GetReturnValue('',_0x391b6f,_0x226196));}_0x414c7f++;}});_0x4a665c++;});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x4371('0x25')});_0x3c6e3d(null,'');}}else{_0x3c6e3d(null,'');}}catch(_0x19200d){GRAXDebugger[_0x4371('0x8')]({'info':_0x4371('0x26'),'err':_0x19200d});_0x3c6e3d(_0x19200d,null);}}function ProcessAuditTrail(_0x5112d2,_0x361bcf){_0x361bcf(null,'');}function storeaudittrail(_0x1df538,_0x4a5908,_0x719418){var _0xc7723b=_0x1df538['\x6e\x65\x77'][_0x4a5908]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0x4371('0x27')];var _0xff8b9=_0x1df538['\x6e\x65\x77'][_0x4a5908]['\x49\x64'];var _0x526e01={};var _0x57a3fe='';var _0x463d8e='';var _0x1c448f='';var _0x3270d1='';var _0x20af6e='';for(var _0x12c4f9 in _0x1df538[_0x4371('0xc')][_0x4a5908]){_0x3270d1='';_0x20af6e='';if(_0x1df538[_0x4371('0xc')]){if(_0x1df538[_0x4371('0xc')][_0x4a5908])_0x20af6e=NormalizeFieldValue(_0x1df538[_0x4371('0xc')][_0x4a5908][_0x12c4f9]);}if(_0x1df538[_0x4371('0xb')]){if(_0x1df538[_0x4371('0xb')][_0x4a5908])_0x3270d1=NormalizeFieldValue(_0x1df538['\x6f\x6c\x64'][_0x4a5908][_0x12c4f9]);}if(_0x20af6e!==_0x3270d1&&_0x12c4f9!==_0x4371('0x28')&&_0x12c4f9!==_0x4371('0x29')&&_0x12c4f9!==_0x4371('0x10')&&_0x12c4f9!==_0x4371('0x2a')){_0x57a3fe=_0x1df538[_0x4371('0xc')][_0x4a5908][_0x4371('0x2b')];if(_0x1c448f!=='')_0x1c448f+='\x2c';_0x1c448f+=_0x12c4f9;_0x526e01[_0x12c4f9]={'oldvalue':_0x3270d1,'newvalue':_0x20af6e};}}getpostgresrow(_0xc7723b,_0xff8b9,_0x57a3fe,_0x526e01,function(_0x185335,_0x4c79ca){_0x719418('',_0x4c79ca);});}function NormalizeFieldValue(_0x27af0a){if(_0x27af0a===undefined||_0x27af0a===''||_0x27af0a===undefined)return'';else return _0x27af0a;}function getpostgresrow(_0x443ee1,_0x2c7ff8,_0x50990f,_0x12aba4,_0x5cc1dd){var _0x402e3f='';for(var _0xae862f in _0x12aba4){if(_0x402e3f!=='')_0x402e3f+='\x2c\x0a';_0x402e3f+='\x28\x27'+_0x443ee1+_0x4371('0x2c')+_0x2c7ff8+_0x4371('0x2c')+_0xae862f+'\x27\x2c\x27'+escape(_0x12aba4[_0xae862f][_0x4371('0x2d')])+'\x27\x2c\x27'+escape(_0x12aba4[_0xae862f][_0x4371('0x2e')])+_0x4371('0x2c')+_0x50990f+'\x27\x29';}_0x5cc1dd('',_0x402e3f);}function escape(_0x2e98cc){if(_0x2e98cc!==null&&_0x2e98cc!==undefined)return _0x2e98cc[_0x4371('0x2f')]()[_0x4371('0x30')](/'/g,'\x27\x27');else return'';}var _0xbf2fb6=function(){function _0x48ffff(_0x21c091){if((''+_0x21c091/_0x21c091)[_0x4371('0xd')]!==0x1||_0x21c091%0x14===0x0){(function(){}[_0x4371('0x31')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}else{(function(){}[_0x4371('0x31')](_0x4371('0x5'))());}_0x48ffff(++_0x21c091);}try{_0x48ffff(0x0);}catch(_0x4237fc){}};_0xbf2fb6();