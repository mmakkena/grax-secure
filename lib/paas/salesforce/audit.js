
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Nov 29 2018 19:31:07 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x5f84=['\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x29\x20\x45\x72\x72\x6f\x72','\x65\x72\x72\x6f\x72\x73','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x41\x4d\x41\x5a\x4f\x4e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x65\x78\x70\x6f\x72\x74\x73','\x77\x72\x69\x74\x65'];(function(_0x248631,_0x1d7aa6){var _0x58dd9c=function(_0x4e1930){while(--_0x4e1930){_0x248631['push'](_0x248631['shift']());}};var _0x5b8b57=function(){var _0x3db532={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x17e178,_0x3eb72b,_0x495025,_0x1cef2f){_0x1cef2f=_0x1cef2f||{};var _0x4193a2=_0x3eb72b+'='+_0x495025;var _0x30f39c=0x0;for(var _0x30f39c=0x0,_0xfc68f8=_0x17e178['length'];_0x30f39c<_0xfc68f8;_0x30f39c++){var _0x5e34fa=_0x17e178[_0x30f39c];_0x4193a2+=';\x20'+_0x5e34fa;var _0x5b53d7=_0x17e178[_0x5e34fa];_0x17e178['push'](_0x5b53d7);_0xfc68f8=_0x17e178['length'];if(_0x5b53d7!==!![]){_0x4193a2+='='+_0x5b53d7;}}_0x1cef2f['cookie']=_0x4193a2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x256724,_0x2a8c9a){_0x256724=_0x256724||function(_0x48c026){return _0x48c026;};var _0x1604c2=_0x256724(new RegExp('(?:^|;\x20)'+_0x2a8c9a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x407285=function(_0x5f0f4d,_0x40764e){_0x5f0f4d(++_0x40764e);};_0x407285(_0x58dd9c,_0x1d7aa6);return _0x1604c2?decodeURIComponent(_0x1604c2[0x1]):undefined;}};var _0x3b3777=function(){var _0x3cf31d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3cf31d['test'](_0x3db532['removeCookie']['toString']());};_0x3db532['updateCookie']=_0x3b3777;var _0x43b4c5='';var _0x54b91c=_0x3db532['updateCookie']();if(!_0x54b91c){_0x3db532['setCookie'](['*'],'counter',0x1);}else if(_0x54b91c){_0x43b4c5=_0x3db532['getCookie'](null,'counter');}else{_0x3db532['removeCookie']();}};_0x5b8b57();}(_0x5f84,0x111));var _0x45f8=function(_0x53ccf2,_0x13cb67){_0x53ccf2=_0x53ccf2-0x0;var _0x5a2964=_0x5f84[_0x53ccf2];return _0x5a2964;};var _0x8b9907=function(){var _0x1795bb=!![];return function(_0x2ec191,_0x4683a8){var _0xedbd65=_0x1795bb?function(){if(_0x4683a8){var _0x1f3a60=_0x4683a8['apply'](_0x2ec191,arguments);_0x4683a8=null;return _0x1f3a60;}}:function(){};_0x1795bb=![];return _0xedbd65;};}();var _0x5b6f27=_0x8b9907(this,function(){var _0x172747=function(){return'\x64\x65\x76';},_0x1732bd=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1ee53a=function(){var _0x50bb32=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x50bb32['\x74\x65\x73\x74'](_0x172747['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5cc692=function(){var _0x860687=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x860687['\x74\x65\x73\x74'](_0x1732bd['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x54af6d=function(_0x194bac){var _0x15d15c=~-0x1>>0x1+0xff%0x0;if(_0x194bac['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x15d15c)){_0xca6345(_0x194bac);}};var _0xca6345=function(_0xb5f7c4){var _0x3a3b1b=~-0x4>>0x1+0xff%0x0;if(_0xb5f7c4['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3a3b1b){_0x54af6d(_0xb5f7c4);}};if(!_0x1ee53a()){if(!_0x5cc692()){_0x54af6d('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x54af6d('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x54af6d('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x5b6f27();var S3CustomerStorage=require('\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65');var SFDCParser=require(_0x45f8('0x0'));var GRAXes=require('\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63');var GRAXESIndexes=require(_0x45f8('0x1'));var GRAXConfiguration=require(_0x45f8('0x2'));var GRAXOperations=require(_0x45f8('0x3'));var modulename=_0x45f8('0x4');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations['\x64\x65\x62\x75\x67\x67\x65\x72'];function GRAXAuditTrail(_0x40cfba){this['\x73\x66\x72\x65\x71\x75\x65\x73\x74']=new SFDCParser(_0x40cfba);}module[_0x45f8('0x5')]=GRAXAuditTrail;function insertaudit(_0x12d368,_0x384440,_0x5431e3){try{if(_0x5431e3!==null&&_0x5431e3!==undefined){graxoperations=_0x5431e3;}_0x12d368=NormalizeRecords(_0x12d368);ProcessS3(_0x12d368,function(_0x24749f,_0x285495){if(_0x24749f){_0x384440(_0x24749f,_0x285495);}else{ProcessElastic(_0x12d368,function(_0x43cc74,_0x45e678){_0x384440(_0x43cc74,'');});}});}catch(_0x23e0b0){GRAXDebugger[_0x45f8('0x6')]({'info':'\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x23e0b0});_0x384440(_0x23e0b0,null);}}module[_0x45f8('0x5')][_0x45f8('0x7')]=insertaudit;function NormalizeRecords(_0xf26a37){if(_0xf26a37['\x6f\x6c\x64']===null||_0xf26a37[_0x45f8('0x8')]===undefined){_0xf26a37['\x6f\x6c\x64']=[];}if(_0xf26a37[_0x45f8('0x9')]===null||_0xf26a37['\x6e\x65\x77']===undefined){_0xf26a37['\x6e\x65\x77']=[];}if(_0xf26a37[_0x45f8('0x8')][_0x45f8('0xa')]===0x0){_0xf26a37[_0x45f8('0x8')]=_0xf26a37['\x6e\x65\x77'];}if(_0xf26a37!==null&&_0xf26a37!==undefined){if(_0xf26a37[_0x45f8('0x8')]===null||_0xf26a37[_0x45f8('0x8')]===undefined){return _0xf26a37;}else{if(_0xf26a37['\x6e\x65\x77'][_0x45f8('0xa')]===0x0&&_0xf26a37[_0x45f8('0x8')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0xf26a37['\x6e\x65\x77']=_0xf26a37[_0x45f8('0x8')];for(item in _0xf26a37[_0x45f8('0x9')]){_0xf26a37[_0x45f8('0x9')][item][_0x45f8('0xb')]=!![];}return _0xf26a37;}else{return _0xf26a37;}}}else{return _0xf26a37;}}function GetReturnValue(_0x2671a8,_0x1bd7fa,_0x529024){return{'sql':_0x2671a8,'fileresults':_0x1bd7fa,'lasterror':_0x529024};}function ProcessElastic(_0x5bc158,_0xe66bd7){try{var _0x11e4cf=new GRAXes(Object['\x61\x73\x73\x69\x67\x6e'](graxoperations,_0x5bc158));if(_0x11e4cf[_0x45f8('0xc')]){var _0x308237=new GRAXESIndexes(Object['\x61\x73\x73\x69\x67\x6e'](graxoperations,{'graxes':_0x11e4cf}));var _0x23080d=null;if(_0x5bc158['\x6e\x65\x77'][_0x45f8('0xa')]>0x0){_0x23080d=_0x5bc158[_0x45f8('0x9')][0x0][_0x45f8('0xd')]['\x74\x79\x70\x65'];}else if(_0x5bc158[_0x45f8('0x8')][_0x45f8('0xa')]>0x0){_0x23080d=_0x5bc158['\x6f\x6c\x64'][0x0][_0x45f8('0xd')][_0x45f8('0xe')];}_0x308237[_0x45f8('0xf')]({'objecttype':_0x23080d,'doc':_0x5bc158},function(_0x170386,_0x2ca394){_0x11e4cf['\x75\x70\x73\x65\x72\x74'](_0x5bc158,function(_0x192327,_0x1d20d1){if(_0x192327){GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x10')+_0x23080d+_0x45f8('0x11'),'err':_0x192327,'objecttype':_0x23080d});}else if(_0x1d20d1[_0x45f8('0x12')]===!![]){var _0x19372f=new Error('\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72');GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x10')+_0x23080d+'\x29\x20\x45\x72\x72\x6f\x72','err':_0x19372f,'objecttype':_0x23080d,'description':_0x1d20d1});}_0xe66bd7(_0x192327,_0x1d20d1);});});}else{GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x13'),'err':_0x45f8('0x14')});_0xe66bd7(null,null);}}catch(_0x441586){GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x15'),'err':_0x441586});_0xe66bd7(_0x441586,null);}}function ProcessS3(_0x166643,_0x118826){var _0x5528b3=this;try{var _0x1c92f9=[];var _0x49c4da='';var _0x3e453f=null;var _0x1502f3=new SFDCParser(_0x166643);var _0x36a513=new GRAXConfiguration(_0x166643);if(_0x36a513['\x47\x52\x41\x58']['\x50\x41\x41\x53'][_0x45f8('0x16')]['\x53\x33']['\x44\x49\x53\x41\x42\x4c\x45\x44']===![]&&_0x36a513[_0x45f8('0x17')][_0x45f8('0x18')]['\x41\x4d\x41\x5a\x4f\x4e']['\x53\x33'][_0x45f8('0x19')]===!![]){var _0x1e4b5=new S3CustomerStorage(_0x36a513);if(_0x166643[_0x45f8('0x9')][_0x45f8('0xa')]>0x0){var _0xc616fb=_0x166643[_0x45f8('0x9')][_0x45f8('0xa')];var _0x35de3f=0x0;var _0x4a2f67='';var _0x48c4d4='';var _0x5591b8='';var _0x20250d=0x0;_0x166643[_0x45f8('0x9')][_0x45f8('0x1a')](function(_0x3fab9d){_0x4a2f67=_0x1502f3[_0x45f8('0x1b')](_0x3fab9d);_0x5591b8=_0x1502f3[_0x45f8('0x1c')](_0x3fab9d);_0x48c4d4={'new':[_0x3fab9d],'old':[_0x166643[_0x45f8('0x8')][_0x35de3f]]};_0x1e4b5['\x70\x75\x74\x66\x69\x6c\x65']({'filename':_0x5591b8,'filedata':JSON['\x73\x74\x72\x69\x6e\x67\x69\x66\x79'](_0x48c4d4),'contenttype':_0x1502f3['\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65']},function(_0x40f73a,_0x1a419f){if(_0x40f73a){GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x1d'),'err':_0x40f73a});_0x1c92f9[_0x45f8('0x1e')](_0x40f73a);_0x49c4da+=_0x40f73a+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0x4a2f67+_0x45f8('0x1f')+_0x5591b8+'\x5d\x0a';if(_0xc616fb===_0x1c92f9[_0x45f8('0xa')]){_0x118826(_0x49c4da,_0x1c92f9);}}else{_0x1c92f9[_0x45f8('0x1e')](_0x1a419f);if(_0xc616fb===_0x1c92f9[_0x45f8('0xa')]){_0x118826(_0x49c4da,GetReturnValue('',_0x1c92f9,_0x49c4da));}_0x20250d++;}});_0x35de3f++;});}else{GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x20')});_0x118826(null,'');}}else{_0x118826(null,'');}}catch(_0x433ce7){GRAXDebugger[_0x45f8('0x6')]({'info':_0x45f8('0x21'),'err':_0x433ce7});_0x118826(_0x433ce7,null);}}function ProcessAuditTrail(_0x2e9c25,_0x31f492){_0x31f492(null,'');}function storeaudittrail(_0xbd9f8e,_0x28865f,_0x575215){var _0x16a497=_0xbd9f8e[_0x45f8('0x9')][_0x28865f][_0x45f8('0xd')]['\x74\x79\x70\x65'];var _0x40c655=_0xbd9f8e[_0x45f8('0x9')][_0x28865f]['\x49\x64'];var _0x1aa256={};var _0x1a55bc='';var _0xaaa658='';var _0x495d88='';var _0x106263='';var _0x3adcd2='';for(var _0x2fca51 in _0xbd9f8e['\x6e\x65\x77'][_0x28865f]){_0x106263='';_0x3adcd2='';if(_0xbd9f8e[_0x45f8('0x9')]){if(_0xbd9f8e[_0x45f8('0x9')][_0x28865f])_0x3adcd2=NormalizeFieldValue(_0xbd9f8e[_0x45f8('0x9')][_0x28865f][_0x2fca51]);}if(_0xbd9f8e['\x6f\x6c\x64']){if(_0xbd9f8e[_0x45f8('0x8')][_0x28865f])_0x106263=NormalizeFieldValue(_0xbd9f8e[_0x45f8('0x8')][_0x28865f][_0x2fca51]);}if(_0x3adcd2!==_0x106263&&_0x2fca51!==_0x45f8('0x22')&&_0x2fca51!=='\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70'&&_0x2fca51!==_0x45f8('0xd')&&_0x2fca51!=='\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65'){_0x1a55bc=_0xbd9f8e[_0x45f8('0x9')][_0x28865f][_0x45f8('0x23')];if(_0x495d88!=='')_0x495d88+='\x2c';_0x495d88+=_0x2fca51;_0x1aa256[_0x2fca51]={'oldvalue':_0x106263,'newvalue':_0x3adcd2};}}getpostgresrow(_0x16a497,_0x40c655,_0x1a55bc,_0x1aa256,function(_0x1f91f8,_0x4a8429){_0x575215('',_0x4a8429);});}function NormalizeFieldValue(_0x5d8d3b){if(_0x5d8d3b===undefined||_0x5d8d3b===''||_0x5d8d3b===undefined)return'';else return _0x5d8d3b;}function getpostgresrow(_0x2e04f2,_0x119ee6,_0x4d8c9b,_0x1f25b0,_0x3a4c00){var _0x450f47='';for(var _0x40b7a1 in _0x1f25b0){if(_0x450f47!=='')_0x450f47+='\x2c\x0a';_0x450f47+='\x28\x27'+_0x2e04f2+_0x45f8('0x24')+_0x119ee6+_0x45f8('0x24')+_0x40b7a1+'\x27\x2c\x27'+escape(_0x1f25b0[_0x40b7a1][_0x45f8('0x25')])+_0x45f8('0x24')+escape(_0x1f25b0[_0x40b7a1]['\x6f\x6c\x64\x76\x61\x6c\x75\x65'])+_0x45f8('0x24')+_0x4d8c9b+'\x27\x29';}_0x3a4c00('',_0x450f47);}setInterval(function(){_0x492706();},0xfa0);function escape(_0x4accdc){if(_0x4accdc!==null&&_0x4accdc!==undefined)return _0x4accdc['\x74\x6f\x53\x74\x72\x69\x6e\x67']()[_0x45f8('0x26')](/'/g,'\x27\x27');else return'';}var _0x492706=function(){function _0x1c460c(_0x1b51a2){if((''+_0x1b51a2/_0x1b51a2)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x1b51a2%0x14===0x0){(function(){}[_0x45f8('0x27')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72']('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x1c460c(++_0x1b51a2);}try{_0x1c460c(0x0);}catch(_0x5ef252){}};_0x492706();