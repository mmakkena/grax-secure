
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Dec 20 2018 10:23:24 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xdabb=['\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x61\x73\x73\x69\x67\x6e','\x74\x79\x70\x65','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x29\x20\x45\x72\x72\x6f\x72','\x65\x72\x72\x6f\x72\x73','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x70\x75\x74\x66\x69\x6c\x65','\x77\x72\x69\x74\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77'];(function(_0x51fd26,_0x3a5973){var _0x4c333f=function(_0x4b906c){while(--_0x4b906c){_0x51fd26['push'](_0x51fd26['shift']());}};var _0x4c7ea1=function(){var _0x326f7c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4597f7,_0x4d9161,_0x1d71dc,_0x79639c){_0x79639c=_0x79639c||{};var _0x296dc0=_0x4d9161+'='+_0x1d71dc;var _0x5ab6f3=0x0;for(var _0x5ab6f3=0x0,_0x3b4d3d=_0x4597f7['length'];_0x5ab6f3<_0x3b4d3d;_0x5ab6f3++){var _0x344f54=_0x4597f7[_0x5ab6f3];_0x296dc0+=';\x20'+_0x344f54;var _0x417103=_0x4597f7[_0x344f54];_0x4597f7['push'](_0x417103);_0x3b4d3d=_0x4597f7['length'];if(_0x417103!==!![]){_0x296dc0+='='+_0x417103;}}_0x79639c['cookie']=_0x296dc0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x181c54,_0x5c0eb5){_0x181c54=_0x181c54||function(_0x49e70e){return _0x49e70e;};var _0x2a103c=_0x181c54(new RegExp('(?:^|;\x20)'+_0x5c0eb5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x577102=function(_0x206082,_0xd89338){_0x206082(++_0xd89338);};_0x577102(_0x4c333f,_0x3a5973);return _0x2a103c?decodeURIComponent(_0x2a103c[0x1]):undefined;}};var _0x12cd9d=function(){var _0x584310=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x584310['test'](_0x326f7c['removeCookie']['toString']());};_0x326f7c['updateCookie']=_0x12cd9d;var _0x518dc5='';var _0x17b34f=_0x326f7c['updateCookie']();if(!_0x17b34f){_0x326f7c['setCookie'](['*'],'counter',0x1);}else if(_0x17b34f){_0x518dc5=_0x326f7c['getCookie'](null,'counter');}else{_0x326f7c['removeCookie']();}};_0x4c7ea1();}(_0xdabb,0x1d4));var _0xbdab=function(_0x40ad05,_0x18c3ae){_0x40ad05=_0x40ad05-0x0;var _0x5cc00f=_0xdabb[_0x40ad05];return _0x5cc00f;};var _0x4fb5f1=function(){var _0x179e11=!![];return function(_0xf65436,_0x549f04){var _0x610545=_0x179e11?function(){if(_0x549f04){var _0x519d66=_0x549f04['apply'](_0xf65436,arguments);_0x549f04=null;return _0x519d66;}}:function(){};_0x179e11=![];return _0x610545;};}();var _0x59ff2b=_0x4fb5f1(this,function(){var _0x3ab51d=function(){return'\x64\x65\x76';},_0x2fa01d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x58a5e2=function(){var _0x1ffbbf=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1ffbbf['\x74\x65\x73\x74'](_0x3ab51d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x18bf2d=function(){var _0x26844b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x26844b['\x74\x65\x73\x74'](_0x2fa01d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1ba0bb=function(_0x455700){var _0x2ad237=~-0x1>>0x1+0xff%0x0;if(_0x455700['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x2ad237)){_0x4e0313(_0x455700);}};var _0x4e0313=function(_0x4941f1){var _0x41a183=~-0x4>>0x1+0xff%0x0;if(_0x4941f1['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x41a183){_0x1ba0bb(_0x4941f1);}};if(!_0x58a5e2()){if(!_0x18bf2d()){_0x1ba0bb('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1ba0bb('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1ba0bb('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x59ff2b();var S3CustomerStorage=require('\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65');var SFDCParser=require(_0xbdab('0x0'));var GRAXes=require(_0xbdab('0x1'));var GRAXESIndexes=require(_0xbdab('0x2'));var GRAXConfiguration=require(_0xbdab('0x3'));var GRAXOperations=require(_0xbdab('0x4'));var modulename=_0xbdab('0x5');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0xbdab('0x6')];function GRAXAuditTrail(_0x51508c){this[_0xbdab('0x7')]=new SFDCParser(_0x51508c);}module['\x65\x78\x70\x6f\x72\x74\x73']=GRAXAuditTrail;function insertaudit(_0x84e185,_0x51003b,_0x5d1bc9){try{if(_0x5d1bc9!==null&&_0x5d1bc9!==undefined){graxoperations=_0x5d1bc9;}_0x84e185=NormalizeRecords(_0x84e185);ProcessS3(_0x84e185,function(_0x490ea3,_0x329d3f){if(_0x490ea3){_0x51003b(_0x490ea3,_0x329d3f);}else{ProcessElastic(_0x84e185,function(_0x7c06d4,_0x58bb43){_0x51003b(_0x7c06d4,'');});}});}catch(_0x405148){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':'\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x405148});_0x51003b(_0x405148,null);}}module[_0xbdab('0x8')][_0xbdab('0x9')]=insertaudit;function NormalizeRecords(_0x286dc8){if(_0x286dc8[_0xbdab('0xa')]===null||_0x286dc8[_0xbdab('0xa')]===undefined){_0x286dc8[_0xbdab('0xa')]=[];}if(_0x286dc8[_0xbdab('0xb')]===null||_0x286dc8[_0xbdab('0xb')]===undefined){_0x286dc8[_0xbdab('0xb')]=[];}if(_0x286dc8[_0xbdab('0xa')][_0xbdab('0xc')]===0x0){_0x286dc8[_0xbdab('0xa')]=_0x286dc8[_0xbdab('0xb')];}if(_0x286dc8!==null&&_0x286dc8!==undefined){if(_0x286dc8[_0xbdab('0xa')]===null||_0x286dc8[_0xbdab('0xa')]===undefined){return _0x286dc8;}else{if(_0x286dc8[_0xbdab('0xb')]['\x6c\x65\x6e\x67\x74\x68']===0x0&&_0x286dc8[_0xbdab('0xa')][_0xbdab('0xc')]>0x0){_0x286dc8['\x6e\x65\x77']=_0x286dc8[_0xbdab('0xa')];for(item in _0x286dc8[_0xbdab('0xb')]){_0x286dc8[_0xbdab('0xb')][item][_0xbdab('0xd')]=!![];}return _0x286dc8;}else{return _0x286dc8;}}}else{return _0x286dc8;}}function GetReturnValue(_0x4f8429,_0x3888e6,_0x1aa18d){return{'sql':_0x4f8429,'fileresults':_0x3888e6,'lasterror':_0x1aa18d};}function ProcessElastic(_0x2d8d80,_0x56869b){try{var _0x25e7b3=new GRAXes(Object[_0xbdab('0xe')](graxoperations,_0x2d8d80));if(_0x25e7b3['\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64']){var _0x210a45=new GRAXESIndexes(Object[_0xbdab('0xe')](graxoperations,{'graxes':_0x25e7b3}));var _0x572c72=null;if(_0x2d8d80[_0xbdab('0xb')][_0xbdab('0xc')]>0x0){_0x572c72=_0x2d8d80['\x6e\x65\x77'][0x0]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0xbdab('0xf')];}else if(_0x2d8d80[_0xbdab('0xa')][_0xbdab('0xc')]>0x0){_0x572c72=_0x2d8d80[_0xbdab('0xa')][0x0][_0xbdab('0x10')][_0xbdab('0xf')];}_0x210a45['\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78']({'objecttype':_0x572c72,'doc':_0x2d8d80},function(_0x5165bb,_0x619746){_0x25e7b3[_0xbdab('0x11')](_0x2d8d80,function(_0x4a06e3,_0x23f5de){if(_0x4a06e3){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xbdab('0x12')+_0x572c72+_0xbdab('0x13'),'err':_0x4a06e3,'objecttype':_0x572c72});}else if(_0x23f5de[_0xbdab('0x14')]===!![]){var _0x268d25=new Error(_0xbdab('0x15'));GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xbdab('0x12')+_0x572c72+_0xbdab('0x13'),'err':_0x268d25,'objecttype':_0x572c72,'description':_0x23f5de});}_0x56869b(_0x4a06e3,_0x23f5de);});});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':'\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','err':_0xbdab('0x16')});_0x56869b(null,null);}}catch(_0x19c7bf){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xbdab('0x17'),'err':_0x19c7bf});_0x56869b(_0x19c7bf,null);}}function ProcessS3(_0x3b1511,_0x1317aa){var _0xd5101=this;try{var _0x21e9b5=[];var _0x30816e='';var _0x4328ef=null;var _0x25f0c5=new SFDCParser(_0x3b1511);var _0x396535=new GRAXConfiguration(_0x3b1511);if(_0x396535[_0xbdab('0x18')][_0xbdab('0x19')][_0xbdab('0x1a')]['\x53\x33'][_0xbdab('0x1b')]===![]&&_0x396535[_0xbdab('0x18')][_0xbdab('0x19')][_0xbdab('0x1a')]['\x53\x33'][_0xbdab('0x1c')]===!![]){var _0x56745b=new S3CustomerStorage(_0x396535);if(_0x3b1511[_0xbdab('0xb')]['\x6c\x65\x6e\x67\x74\x68']>0x0){var _0x3d95cf=_0x3b1511[_0xbdab('0xb')][_0xbdab('0xc')];var _0x29f018=0x0;var _0x47da43='';var _0x30b619='';var _0x2e95e7='';var _0x5b0d2f=0x0;_0x3b1511[_0xbdab('0xb')][_0xbdab('0x1d')](function(_0x525cb1){_0x47da43=_0x25f0c5[_0xbdab('0x1e')](_0x525cb1);_0x2e95e7=_0x25f0c5[_0xbdab('0x1f')](_0x525cb1);_0x30b619={'new':[_0x525cb1],'old':[_0x3b1511['\x6f\x6c\x64'][_0x29f018]]};_0x56745b[_0xbdab('0x20')]({'filename':_0x2e95e7,'filedata':JSON['\x73\x74\x72\x69\x6e\x67\x69\x66\x79'](_0x30b619),'contenttype':_0x25f0c5['\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65']},function(_0xee7a2e,_0x314c4f){if(_0xee7a2e){GRAXDebugger[_0xbdab('0x21')]({'info':_0xbdab('0x22'),'err':_0xee7a2e});_0x21e9b5[_0xbdab('0x23')](_0xee7a2e);_0x30816e+=_0xee7a2e+_0xbdab('0x24')+_0x47da43+'\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20'+_0x2e95e7+'\x5d\x0a';if(_0x3d95cf===_0x21e9b5[_0xbdab('0xc')]){_0x1317aa(_0x30816e,_0x21e9b5);}}else{_0x21e9b5[_0xbdab('0x23')](_0x314c4f);if(_0x3d95cf===_0x21e9b5[_0xbdab('0xc')]){_0x1317aa(_0x30816e,GetReturnValue('',_0x21e9b5,_0x30816e));}_0x5b0d2f++;}});_0x29f018++;});}else{GRAXDebugger[_0xbdab('0x21')]({'info':_0xbdab('0x25')});_0x1317aa(null,'');}}else{_0x1317aa(null,'');}}catch(_0x219bcb){GRAXDebugger[_0xbdab('0x21')]({'info':_0xbdab('0x26'),'err':_0x219bcb});_0x1317aa(_0x219bcb,null);}}function ProcessAuditTrail(_0xe351ff,_0x2ec994){_0x2ec994(null,'');}function storeaudittrail(_0x2fc7c8,_0xb2eb4f,_0x16d640){var _0x46e105=_0x2fc7c8[_0xbdab('0xb')][_0xb2eb4f][_0xbdab('0x10')][_0xbdab('0xf')];var _0x1c0fa6=_0x2fc7c8[_0xbdab('0xb')][_0xb2eb4f]['\x49\x64'];var _0x40a7a8={};var _0x2bc175='';var _0x2567c5='';var _0x1688b3='';var _0x378ccf='';var _0x509838='';for(var _0x1d0cda in _0x2fc7c8[_0xbdab('0xb')][_0xb2eb4f]){_0x378ccf='';_0x509838='';if(_0x2fc7c8[_0xbdab('0xb')]){if(_0x2fc7c8[_0xbdab('0xb')][_0xb2eb4f])_0x509838=NormalizeFieldValue(_0x2fc7c8[_0xbdab('0xb')][_0xb2eb4f][_0x1d0cda]);}if(_0x2fc7c8[_0xbdab('0xa')]){if(_0x2fc7c8[_0xbdab('0xa')][_0xb2eb4f])_0x378ccf=NormalizeFieldValue(_0x2fc7c8[_0xbdab('0xa')][_0xb2eb4f][_0x1d0cda]);}if(_0x509838!==_0x378ccf&&_0x1d0cda!==_0xbdab('0x27')&&_0x1d0cda!==_0xbdab('0x28')&&_0x1d0cda!==_0xbdab('0x10')&&_0x1d0cda!=='\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65'){_0x2bc175=_0x2fc7c8['\x6e\x65\x77'][_0xb2eb4f][_0xbdab('0x29')];if(_0x1688b3!=='')_0x1688b3+='\x2c';_0x1688b3+=_0x1d0cda;_0x40a7a8[_0x1d0cda]={'oldvalue':_0x378ccf,'newvalue':_0x509838};}}getpostgresrow(_0x46e105,_0x1c0fa6,_0x2bc175,_0x40a7a8,function(_0x4cc15f,_0x4d5cab){_0x16d640('',_0x4d5cab);});}function NormalizeFieldValue(_0x55d012){if(_0x55d012===undefined||_0x55d012===''||_0x55d012===undefined)return'';else return _0x55d012;}function getpostgresrow(_0x4d6368,_0x37b14e,_0xc5c775,_0x2b2468,_0x4cc867){var _0x337328='';for(var _0x11089e in _0x2b2468){if(_0x337328!=='')_0x337328+='\x2c\x0a';_0x337328+='\x28\x27'+_0x4d6368+'\x27\x2c\x27'+_0x37b14e+_0xbdab('0x2a')+_0x11089e+_0xbdab('0x2a')+escape(_0x2b2468[_0x11089e][_0xbdab('0x2b')])+_0xbdab('0x2a')+escape(_0x2b2468[_0x11089e][_0xbdab('0x2c')])+_0xbdab('0x2a')+_0xc5c775+'\x27\x29';}_0x4cc867('',_0x337328);}function escape(_0x41d462){if(_0x41d462!==null&&_0x41d462!==undefined)return _0x41d462[_0xbdab('0x2d')]()[_0xbdab('0x2e')](/'/g,'\x27\x27');else return'';}setInterval(function(){_0x1095d5();},0xfa0);var _0x1095d5=function(){function _0x4a40f3(_0x326e15){if((''+_0x326e15/_0x326e15)[_0xbdab('0xc')]!==0x1||_0x326e15%0x14===0x0){(function(){}[_0xbdab('0x2f')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}else{(function(){}[_0xbdab('0x2f')](_0xbdab('0x6'))());}_0x4a40f3(++_0x326e15);}try{_0x4a40f3(0x0);}catch(_0x246a98){}};_0x1095d5();