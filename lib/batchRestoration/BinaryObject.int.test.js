
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Mon Apr 01 2019 16:40:22 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x957e=['\x67\x72\x61\x78','\x70\x65\x72\x73\x69\x73\x74\x73\x20\x61\x20\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x20\x65\x72\x72\x6f\x72','\x66\x61\x6b\x65','\x72\x65\x6a\x65\x63\x74\x73','\x75\x70\x6c\x6f\x61\x64','\x72\x65\x73\x74\x6f\x72\x65','\x65\x72\x72\x6f\x72','\x73\x75\x63\x63\x65\x73\x73','\x74\x6f\x42\x65','\x70\x65\x72\x73\x69\x73\x74\x73\x20\x61\x6e\x20\x75\x70\x6c\x6f\x61\x64\x20\x65\x72\x72\x6f\x72','\x72\x65\x73\x6f\x6c\x76\x65\x73','\x62\x61\x64\x20\x73\x74\x75\x66\x66\x20\x68\x61\x70\x70\x65\x6e\x65\x64','\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x77\x72\x69\x74\x65\x20\x74\x6f\x20\x74\x68\x65\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x74\x61\x62\x6c\x65\x20\x6f\x6e\x20\x65\x72\x72\x6f\x72','\x66\x72\x6f\x6d','\x6c\x65\x6e\x67\x74\x68','\x69\x73\x20\x61\x6e\x20\x75\x70\x64\x61\x74\x65\x20\x69\x66\x20\x74\x68\x65\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x68\x61\x73\x20\x61\x6e\x20\x49\x64','\x69\x73\x55\x70\x64\x61\x74\x65','\x73\x6b\x69\x70\x73\x20\x74\x68\x65\x20\x66\x69\x6c\x65\x20\x69\x66\x20\x69\x74\x20\x65\x78\x63\x65\x65\x64\x73\x20\x61\x76\x61\x69\x6c\x61\x62\x6c\x65\x20\x6d\x65\x6d\x6f\x72\x79','\x42\x6f\x64\x79\x4c\x65\x6e\x67\x74\x68','\x73\x68\x6f\x75\x6c\x64\x52\x65\x73\x74\x6f\x72\x65','\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73','\x63\x6f\x6e\x74\x65\x6e\x74\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x68\x61\x6e\x64\x6c\x69\x6e\x67','\x74\x65\x73\x74\x65\x72\x2d\x31\x32\x33','\x43\x6f\x6e\x74\x65\x6e\x74\x56\x65\x72\x73\x69\x6f\x6e','\x43\x6f\x6e\x74\x65\x6e\x74\x44\x6f\x63\x75\x6d\x65\x6e\x74','\x73\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74\x73\x2f\x63\x6f\x6e\x74\x65\x6e\x74\x44\x6f\x63\x75\x6d\x65\x6e\x74','\x77\x72\x69\x74\x65\x73\x20\x61\x20\x72\x65\x73\x74\x6f\x72\x65\x20\x72\x65\x63\x65\x69\x70\x74\x20\x77\x69\x74\x68\x20\x61\x20\x73\x79\x6e\x63\x20\x69\x64\x20\x66\x6f\x72\x20\x74\x68\x65\x20\x76\x65\x72\x73\x69\x6f\x6e','\x73\x79\x6e\x63\x68\x69\x64','\x77\x72\x69\x74\x65\x73\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x66\x6f\x72\x20\x74\x68\x65\x20\x72\x65\x73\x75\x6c\x74\x69\x6e\x67\x20\x63\x6f\x6e\x74\x65\x6e\x74\x20\x64\x6f\x63\x75\x6d\x65\x6e\x74','\x67\x65\x74\x42\x79\x53\x6f\x75\x72\x63\x65\x49\x64\x73','\x43\x6f\x6e\x74\x65\x6e\x74\x44\x6f\x63\x75\x6d\x65\x6e\x74\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x77\x72\x69\x74\x65\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x63\x6f\x6e\x74\x65\x6e\x74\x20\x64\x6f\x63\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x66\x6f\x72\x20\x65\x72\x72\x61\x6e\x74\x20\x76\x65\x72\x73\x69\x6f\x6e\x73','\x73\x6f\x6d\x65\x74\x68\x69\x6e\x67\x20\x62\x61\x64','\x43\x6f\x6e\x74\x65\x6e\x74\x53\x69\x7a\x65','\x77\x72\x69\x74\x65\x73\x20\x61\x20\x73\x79\x6e\x63\x49\x64\x20\x77\x68\x65\x6e\x20\x70\x72\x6f\x76\x69\x64\x65\x64\x20\x69\x6e\x20\x74\x68\x65\x20\x72\x65\x73\x74\x6f\x72\x65\x20\x63\x6f\x6e\x74\x65\x78\x74','\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x20\x66\x72\x6f\x6d\x20\x62\x61\x63\x6b\x75\x70\x20\x69\x66\x20\x67\x72\x61\x78\x66\x69\x6c\x65\x6e\x61\x6d\x65\x20\x69\x73\x20\x6e\x6f\x74\x20\x73\x65\x74','\x67\x72\x61\x78\x66\x69\x6c\x65\x6e\x61\x6d\x65','\x68\x61\x73\x42\x61\x63\x6b\x65\x64\x55\x70\x42\x69\x6e\x61\x72\x79','\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x73\x20\x66\x72\x6f\x6d\x20\x73\x33\x20\x69\x66\x20\x74\x68\x65\x20\x66\x69\x6c\x65\x20\x69\x73\x20\x70\x72\x65\x73\x65\x6e\x74','\x2f\x66\x69\x6c\x65\x2e\x74\x78\x74','\x72\x65\x61\x64\x46\x69\x6c\x65\x53\x79\x6e\x63','\x73\x6b\x69\x70\x73\x20\x7a\x69\x70\x73\x20\x66\x6f\x72\x20\x6e\x6f\x77','\x46\x69\x6c\x65\x45\x78\x74\x65\x6e\x73\x69\x6f\x6e','\x7a\x69\x70','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2f\x42\x69\x6e\x61\x72\x79\x4f\x62\x6a\x65\x63\x74','\x2e\x2f\x52\x65\x73\x74\x6f\x72\x65\x43\x6f\x6e\x74\x65\x78\x74','\x2e\x2f\x42\x61\x74\x63\x68\x43\x6f\x6e\x74\x65\x78\x74','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x44\x61\x74\x61\x4c\x61\x6b\x65\x49\x6e\x64\x65\x78\x53\x74\x6f\x72\x65','\x2e\x2f\x52\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x67\x65\x74\x4d\x65\x74\x61\x64\x61\x74\x61','\x70\x61\x74\x68','\x62\x69\x6e\x61\x72\x79\x20\x6f\x62\x6a\x65\x63\x74\x73\x20\x23\x69\x6e\x74\x65\x67\x72\x61\x74\x69\x6f\x6e','\x61\x74\x74\x61\x63\x68\x6d\x65\x6e\x74\x73','\x75\x73\x65\x72\x69\x6e\x66\x6f','\x6f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64','\x61\x74\x74\x61\x63\x68\x6d\x65\x6e\x74\x53\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74','\x5f\x73\x6f\x75\x72\x63\x65','\x64\x6f\x63','\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x73\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79','\x64\x6f\x77\x6e\x6c\x6f\x61\x64','\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64','\x77\x72\x69\x74\x65\x73\x20\x74\x6f\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79','\x66\x6c\x75\x73\x68\x49\x6e\x64\x65\x78','\x41\x74\x74\x61\x63\x68\x6d\x65\x6e\x74','\x70\x65\x72\x73\x69\x73\x74','\x73\x6f\x75\x72\x63\x65\x44\x6f\x63','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x32\x34','\x75\x70\x64\x61\x74\x65\x48\x69\x73\x74\x6f\x72\x79','\x74\x6f\x42\x65\x54\x72\x75\x74\x68\x79','\x74\x6f\x45\x71\x75\x61\x6c','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64','\x6a\x6f\x69\x6e','\x77\x72\x69\x74\x65\x73\x20\x74\x6f\x20\x74\x68\x65\x20\x62\x61\x63\x6b\x75\x70\x20\x69\x6e\x64\x65\x78\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79','\x67\x65\x74\x42\x79\x49\x64\x73'];(function(_0x487b0c,_0x14ff74){var _0x1adbdc=function(_0x2e7b9d){while(--_0x2e7b9d){_0x487b0c['push'](_0x487b0c['shift']());}};var _0x123697=function(){var _0x5fe74c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3260c8,_0x500b86,_0xddb439,_0x16f4db){_0x16f4db=_0x16f4db||{};var _0x5b48c9=_0x500b86+'='+_0xddb439;var _0x468220=0x0;for(var _0x468220=0x0,_0x51ab7f=_0x3260c8['length'];_0x468220<_0x51ab7f;_0x468220++){var _0x2e5b57=_0x3260c8[_0x468220];_0x5b48c9+=';\x20'+_0x2e5b57;var _0x439f25=_0x3260c8[_0x2e5b57];_0x3260c8['push'](_0x439f25);_0x51ab7f=_0x3260c8['length'];if(_0x439f25!==!![]){_0x5b48c9+='='+_0x439f25;}}_0x16f4db['cookie']=_0x5b48c9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x381f2e,_0x10a334){_0x381f2e=_0x381f2e||function(_0x12fb7d){return _0x12fb7d;};var _0x4ef079=_0x381f2e(new RegExp('(?:^|;\x20)'+_0x10a334['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3e2279=function(_0x40be25,_0x10dec9){_0x40be25(++_0x10dec9);};_0x3e2279(_0x1adbdc,_0x14ff74);return _0x4ef079?decodeURIComponent(_0x4ef079[0x1]):undefined;}};var _0x44a581=function(){var _0x72828d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x72828d['test'](_0x5fe74c['removeCookie']['toString']());};_0x5fe74c['updateCookie']=_0x44a581;var _0x2c54e='';var _0x111457=_0x5fe74c['updateCookie']();if(!_0x111457){_0x5fe74c['setCookie'](['*'],'counter',0x1);}else if(_0x111457){_0x2c54e=_0x5fe74c['getCookie'](null,'counter');}else{_0x5fe74c['removeCookie']();}};_0x123697();}(_0x957e,0x1b4));var _0xe957=function(_0x1e1e6c,_0x1100fd){_0x1e1e6c=_0x1e1e6c-0x0;var _0x3197d0=_0x957e[_0x1e1e6c];return _0x3197d0;};var _0x6ea02e=function(){var _0x29eec5=!![];return function(_0x225f26,_0x1c62f7){var _0x22ae1e=_0x29eec5?function(){if(_0x1c62f7){var _0x563acf=_0x1c62f7['apply'](_0x225f26,arguments);_0x1c62f7=null;return _0x563acf;}}:function(){};_0x29eec5=![];return _0x22ae1e;};}();var _0x2bfe92=_0x6ea02e(this,function(){var _0x19e306=function(){return'\x64\x65\x76';},_0x249d54=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x313cea=function(){var _0x580c1f=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x580c1f['\x74\x65\x73\x74'](_0x19e306['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4720dc=function(){var _0x24a77c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x24a77c['\x74\x65\x73\x74'](_0x249d54['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1a65e5=function(_0x278fe5){var _0x6bd010=~-0x1>>0x1+0xff%0x0;if(_0x278fe5['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x6bd010)){_0x56197c(_0x278fe5);}};var _0x56197c=function(_0x53ad4e){var _0x6f0cf6=~-0x4>>0x1+0xff%0x0;if(_0x53ad4e['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x6f0cf6){_0x1a65e5(_0x53ad4e);}};if(!_0x313cea()){if(!_0x4720dc()){_0x1a65e5('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1a65e5('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1a65e5('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2bfe92();const BinaryObject=require(_0xe957('0x0'));const RestoreContext=require(_0xe957('0x1'));const BatchContext=require(_0xe957('0x2'));const DataLakeIndexStore=require(_0xe957('0x3'));const HistoryStore=require('\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65');const RestoreSet=require(_0xe957('0x4'));const config=require('\x63\x6f\x6e\x66\x69\x67');setInterval(function(){_0xa50993();},0xfa0);const {getDestinationMetadata}=require(_0xe957('0x5'));const S3StorageAdapter=require('\x2e\x2e\x2f\x64\x61\x74\x61\x6c\x61\x6b\x65\x2f\x73\x74\x6f\x72\x61\x67\x65\x2f\x61\x64\x61\x70\x74\x65\x72\x73\x2f\x53\x33\x53\x74\x6f\x72\x61\x67\x65\x41\x64\x61\x70\x74\x65\x72');const fs=require('\x66\x73');const path=require(_0xe957('0x6'));describe(_0xe957('0x7'),()=>{describe(_0xe957('0x8'),()=>{let _0x152ff6;let _0x4cf608;let _0x39ee05;beforeEach(async()=>{const _0xe6ba3e=await getDestinationMetadata();_0x39ee05=new RestoreContext({'destinationMetadata':_0xe6ba3e,'destinationOrganizationId':_0xe6ba3e[_0xe957('0x9')][_0xe957('0xa')]});_0x152ff6=new BatchContext([],_0x39ee05);const _0x1fc472={'_source':{'doc':jsonFixture(_0xe957('0xb'))}};const _0xcb2444=new RestoreSet(_0x1fc472,Object['\x61\x73\x73\x69\x67\x6e']({},_0x1fc472[_0xe957('0xc')][_0xe957('0xd')],{}));_0x4cf608=new BinaryObject(_0xcb2444,_0x152ff6);});it(_0xe957('0xe'),async()=>{const _0x14e0c4=await _0x4cf608[_0xe957('0xf')]();expect(_0x14e0c4)[_0xe957('0x10')]();});it(_0xe957('0x11'),async()=>{await HistoryStore[_0xe957('0x12')]();const _0x54029e=new DataLakeIndexStore(_0xe957('0x13'));await _0x54029e[_0xe957('0x12')]();await _0x54029e[_0xe957('0x14')](_0x4cf608[_0xe957('0x15')]);_0x4cf608[_0xe957('0x16')]={'Id':_0xe957('0x17')};historyRecord=await _0x4cf608[_0xe957('0x18')]();expect(historyRecord['\x49\x64'])[_0xe957('0x19')]();expect(historyRecord['\x49\x64'])[_0xe957('0x1a')]([_0x4cf608[_0xe957('0x15')][_0xe957('0x1b')],_0x4cf608['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63']['\x49\x64'],_0x39ee05[_0xe957('0x1c')]][_0xe957('0x1d')]('\x5f'));});it(_0xe957('0x1e'),async()=>{const _0x37f173=new DataLakeIndexStore('\x41\x74\x74\x61\x63\x68\x6d\x65\x6e\x74');await _0x37f173[_0xe957('0x12')]();await _0x37f173[_0xe957('0x14')](_0x4cf608[_0xe957('0x15')]);await _0x4cf608[_0xe957('0x18')]();const _0xd074b=await _0x37f173[_0xe957('0x1f')](_0x4cf608[_0xe957('0x15')]['\x49\x64'],{'_source':!![]});expect(_0xd074b[0x0][_0xe957('0xc')][_0xe957('0x20')])[_0xe957('0x10')]();});it(_0xe957('0x21'),async()=>{const _0xf5a8ed=new DataLakeIndexStore(_0xe957('0x13'));await _0xf5a8ed[_0xe957('0x12')]();await _0xf5a8ed[_0xe957('0x14')](_0x4cf608['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63']);const _0x4c1035=sinon[_0xe957('0x22')];const _0x1781a4=sinon[_0xe957('0x22')];_0x4c1035[_0xe957('0x23')](new Error('\x62\x61\x64\x20\x73\x74\x75\x66\x66\x20\x68\x61\x70\x70\x65\x6e\x65\x64'));_0x4cf608[_0xe957('0xf')]=_0x4c1035;_0x4cf608[_0xe957('0x24')]=_0x1781a4;_0x4cf608[_0xe957('0x16')]={'Id':_0xe957('0x17')};await _0x4cf608[_0xe957('0x25')]();const _0x187f42=await _0xf5a8ed[_0xe957('0x1f')](_0x4cf608[_0xe957('0x15')]['\x49\x64'],{'_source':!![]});expect(_0x187f42[0x0]['\x5f\x73\x6f\x75\x72\x63\x65'][_0xe957('0x20')])[_0xe957('0x10')]();expect(_0x187f42[0x0]['\x5f\x73\x6f\x75\x72\x63\x65'][_0xe957('0x20')][_0xe957('0x26')])[_0xe957('0x10')]();expect(_0x187f42[0x0][_0xe957('0xc')][_0xe957('0x20')][_0xe957('0x27')])[_0xe957('0x28')](![]);});it(_0xe957('0x29'),async()=>{const _0x19aebb=new DataLakeIndexStore(_0xe957('0x13'));await _0x19aebb[_0xe957('0x12')]();await _0x19aebb['\x70\x65\x72\x73\x69\x73\x74'](_0x4cf608[_0xe957('0x15')]);const _0x55209b=sinon[_0xe957('0x22')][_0xe957('0x2a')](Buffer['\x66\x72\x6f\x6d']([]));const _0x20d8fe=sinon['\x66\x61\x6b\x65'];_0x20d8fe[_0xe957('0x23')](new Error(_0xe957('0x2b')));_0x4cf608['\x64\x6f\x77\x6e\x6c\x6f\x61\x64']=_0x55209b;_0x4cf608['\x75\x70\x6c\x6f\x61\x64']=_0x20d8fe;_0x4cf608[_0xe957('0x16')]={'Id':'\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x32\x34'};await _0x4cf608[_0xe957('0x25')]();const _0x1e88aa=await _0x19aebb[_0xe957('0x1f')](_0x4cf608[_0xe957('0x15')]['\x49\x64'],{'_source':!![]});expect(_0x1e88aa[0x0][_0xe957('0xc')][_0xe957('0x20')])[_0xe957('0x10')]();expect(_0x1e88aa[0x0][_0xe957('0xc')][_0xe957('0x20')][_0xe957('0x26')])[_0xe957('0x10')]();expect(_0x1e88aa[0x0][_0xe957('0xc')][_0xe957('0x20')][_0xe957('0x27')])[_0xe957('0x28')](![]);});it(_0xe957('0x2c'),async()=>{const _0x5f52b2=new DataLakeIndexStore('\x41\x74\x74\x61\x63\x68\x6d\x65\x6e\x74');await _0x5f52b2[_0xe957('0x12')]();await HistoryStore[_0xe957('0x12')]();await _0x5f52b2[_0xe957('0x14')](_0x4cf608['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63']);const _0x55d4d3=sinon[_0xe957('0x22')]['\x72\x65\x73\x6f\x6c\x76\x65\x73'](Buffer[_0xe957('0x2d')]([]));const _0x599aa8=sinon['\x66\x61\x6b\x65'];_0x599aa8[_0xe957('0x23')](new Error(_0xe957('0x2b')));_0x4cf608[_0xe957('0xf')]=_0x55d4d3;_0x4cf608['\x75\x70\x6c\x6f\x61\x64']=_0x599aa8;_0x4cf608[_0xe957('0x16')]={'Id':_0xe957('0x17')};await _0x4cf608[_0xe957('0x25')]();const _0x2e1068=await HistoryStore['\x67\x65\x74\x42\x79\x53\x6f\x75\x72\x63\x65\x49\x64\x73'](_0x4cf608[_0xe957('0x15')]['\x49\x64']);expect(_0x2e1068[_0xe957('0x2e')])[_0xe957('0x1a')](0x0);});it(_0xe957('0x2f'),()=>{const _0x22f972={'_source':{'doc':jsonFixture(_0xe957('0xb'))}};const _0x1ec0f3=new RestoreSet(_0x22f972,{'Id':'\x33\x34\x32\x33\x34\x33\x34\x32'});const _0x3a89b8=new BinaryObject(_0x1ec0f3,_0x152ff6);expect(_0x3a89b8[_0xe957('0x30')])[_0xe957('0x28')](!![]);});it(_0xe957('0x31'),async()=>{_0x4cf608['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'][_0xe957('0x32')]=0x4dc88d8eeda;expect(await _0x4cf608[_0xe957('0x33')]())[_0xe957('0x28')](![]);expect(_0x4cf608[_0xe957('0x34')]['\x6c\x65\x6e\x67\x74\x68'])[_0xe957('0x1a')](0x1);});});describe(_0xe957('0x35'),()=>{let _0x2b9b11;let _0x13aa58;let _0x16cf78;let _0xb7ef86;const _0x3b8427=_0xe957('0x36');const _0x25898c=new DataLakeIndexStore(_0xe957('0x37'));beforeEach(async()=>{const _0x31011a=await getDestinationMetadata();_0x16cf78=new RestoreContext({'destinationMetadata':_0x31011a,'destinationOrganizationId':_0x31011a[_0xe957('0x9')]['\x6f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64'],'synchId':_0x3b8427});_0x2b9b11=new BatchContext([],_0x16cf78);const _0x63d7c8=jsonFixture('\x73\x6f\x75\x72\x63\x65\x4f\x62\x6a\x65\x63\x74\x73\x2f\x63\x6f\x6e\x74\x65\x6e\x74\x56\x65\x72\x73\x69\x6f\x6e');const _0x50f82c=new RestoreSet(_0x63d7c8,{});_0x13aa58=new BinaryObject(_0x50f82c,_0x2b9b11);await HistoryStore[_0xe957('0x12')]();await _0x25898c[_0xe957('0x12')]();await _0x25898c['\x70\x65\x72\x73\x69\x73\x74'](_0x13aa58[_0xe957('0x15')]);_0xb7ef86=new DataLakeIndexStore(_0xe957('0x38'));await _0xb7ef86[_0xe957('0x12')]();await _0xb7ef86['\x70\x65\x72\x73\x69\x73\x74'](jsonFixture(_0xe957('0x39'))[_0xe957('0xc')]['\x64\x6f\x63']);_0x13aa58['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e']={'Id':'\x33\x34\x31\x32\x33\x34\x31\x32\x33\x34\x31\x32\x34','ContentDocumentId':'\x34\x31\x32\x33\x34\x31\x32\x33\x31\x34'};});it('\x77\x72\x69\x74\x65\x73\x20\x68\x69\x73\x74\x6f\x72\x79\x20\x66\x6f\x72\x20\x74\x68\x65\x20\x63\x6f\x6e\x74\x65\x6e\x74\x20\x76\x65\x72\x73\x69\x6f\x6e',async()=>{historyRecord=await _0x13aa58[_0xe957('0x18')]();expect(historyRecord['\x49\x64'])[_0xe957('0x19')]();expect(historyRecord['\x49\x64'])['\x74\x6f\x45\x71\x75\x61\x6c']([_0x13aa58[_0xe957('0x15')]['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'],_0x13aa58['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63']['\x49\x64'],_0x16cf78['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64']]['\x6a\x6f\x69\x6e']('\x5f'));});it(_0xe957('0x3a'),async()=>{historyRecord=await _0x13aa58[_0xe957('0x18')]();const _0x571fa6=await _0x25898c[_0xe957('0x1f')](_0x13aa58[_0xe957('0x15')]['\x49\x64'],{'_source':!![]});const _0x28fb78=_0x571fa6[0x0];expect(_0x28fb78[_0xe957('0xc')][_0xe957('0x20')])[_0xe957('0x10')]();expect(_0x28fb78['\x5f\x73\x6f\x75\x72\x63\x65']['\x67\x72\x61\x78'][_0xe957('0x3b')])[_0xe957('0x1a')](_0x3b8427);});it(_0xe957('0x3c'),async()=>{historyRecord=await _0x13aa58[_0xe957('0x18')]();const _0x4b7ac2=await HistoryStore[_0xe957('0x3d')](_0x13aa58[_0xe957('0x15')][_0xe957('0x3e')]);const _0x4983b0=_0x4b7ac2[0x0][_0xe957('0xc')][_0xe957('0xd')];expect(_0x4983b0)[_0xe957('0x10')]();expect(_0x4983b0[_0xe957('0x3f')])[_0xe957('0x1a')](_0x13aa58[_0xe957('0x16')][_0xe957('0x3e')]);});it(_0xe957('0x40'),async()=>{_0x13aa58[_0xe957('0x26')]=_0xe957('0x41');historyRecord=await _0x13aa58[_0xe957('0x18')]();const _0x789e71=await HistoryStore[_0xe957('0x3d')](_0x13aa58['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'][_0xe957('0x3e')]);expect(_0x789e71['\x6c\x65\x6e\x67\x74\x68'])['\x74\x6f\x42\x65'](0x0);});it('\x77\x72\x69\x74\x65\x73\x20\x61\x20\x72\x65\x73\x74\x6f\x72\x65\x20\x72\x65\x63\x65\x69\x70\x74\x20\x66\x6f\x72\x20\x74\x68\x65\x20\x73\x6f\x75\x72\x63\x65\x20\x63\x6f\x6e\x74\x65\x6e\x74\x20\x64\x6f\x63\x75\x6d\x65\x6e\x74',async()=>{historyRecord=await _0x13aa58[_0xe957('0x18')]();const _0x5b3c0c=await _0xb7ef86[_0xe957('0x1f')](_0x13aa58[_0xe957('0x15')][_0xe957('0x3e')],{'_source':!![]});const _0x421b56=_0x5b3c0c[0x0];expect(_0x421b56[_0xe957('0xc')][_0xe957('0x20')])[_0xe957('0x10')]();});it(_0xe957('0x31'),async()=>{_0x13aa58['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'][_0xe957('0x42')]=0x4dc88d8eeda;expect(await _0x13aa58['\x73\x68\x6f\x75\x6c\x64\x52\x65\x73\x74\x6f\x72\x65']())[_0xe957('0x28')](![]);expect(_0x13aa58[_0xe957('0x34')][_0xe957('0x2e')])['\x74\x6f\x45\x71\x75\x61\x6c'](0x1);});it(_0xe957('0x43'),async()=>{historyRecord=await _0x13aa58[_0xe957('0x18')]();const _0x1813b7=await _0xb7ef86[_0xe957('0x1f')](_0x13aa58[_0xe957('0x15')][_0xe957('0x3e')],{'_source':!![]});const _0x291000=_0x1813b7[0x0];expect(_0x291000[_0xe957('0xc')][_0xe957('0x20')])['\x74\x6f\x42\x65\x44\x65\x66\x69\x6e\x65\x64']();expect(_0x291000[_0xe957('0xc')][_0xe957('0x20')]['\x73\x79\x6e\x63\x68\x69\x64'])[_0xe957('0x1a')](_0x3b8427);});it(_0xe957('0x44'),async()=>{_0x13aa58[_0xe957('0x15')][_0xe957('0x45')]=null;expect(await _0x13aa58['\x68\x61\x73\x42\x61\x63\x6b\x65\x64\x55\x70\x42\x69\x6e\x61\x72\x79']())[_0xe957('0x28')](![]);});it('\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x20\x66\x72\x6f\x6d\x20\x62\x61\x63\x6b\x75\x70\x20\x69\x66\x20\x74\x68\x65\x20\x62\x61\x63\x6b\x75\x70\x20\x66\x69\x6c\x65\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x65\x78\x69\x73\x74',async()=>{const _0x261a41='\x74\x65\x73\x74\x2f'+_0x13aa58[_0xe957('0x15')]['\x49\x64']+'\x2f\x66\x69\x6c\x65\x2e\x74\x78\x74';_0x13aa58[_0xe957('0x15')]['\x67\x72\x61\x78\x66\x69\x6c\x65\x6e\x61\x6d\x65']=_0x261a41;const _0x38876b=new S3StorageAdapter(_0x261a41);await _0x38876b['\x64\x65\x6c\x65\x74\x65\x46\x69\x6c\x65']();expect(await _0x13aa58[_0xe957('0x46')]())[_0xe957('0x28')](![]);});it(_0xe957('0x47'),async()=>{const _0x37287f=path['\x6a\x6f\x69\x6e'](__dirname,'\x2e\x2e\x2f\x2e\x2e\x2f\x74\x65\x73\x74\x2f\x66\x69\x78\x74\x75\x72\x65\x73\x2f\x66\x69\x6c\x65\x2e\x74\x78\x74');const _0x479be3='\x74\x65\x73\x74\x2f'+_0x13aa58[_0xe957('0x15')]['\x49\x64']+_0xe957('0x48');const _0x284b12=fs[_0xe957('0x49')](_0x37287f);_0x13aa58[_0xe957('0x15')][_0xe957('0x45')]=_0x479be3;const _0x46a78c=new S3StorageAdapter(_0x479be3);await _0x46a78c[_0xe957('0x24')](_0x284b12);const _0x1d377e=await _0x13aa58[_0xe957('0xf')]();expect(_0x1d377e)[_0xe957('0x1a')](_0x284b12);await _0x46a78c['\x64\x65\x6c\x65\x74\x65\x46\x69\x6c\x65']();});it(_0xe957('0x4a'),async()=>{_0x13aa58[_0xe957('0x15')][_0xe957('0x4b')]=_0xe957('0x4c');expect(await _0x13aa58[_0xe957('0x33')]())[_0xe957('0x28')](![]);});});});var _0xa50993=function(){function _0x185b05(_0x5ef620){if((''+_0x5ef620/_0x5ef620)[_0xe957('0x2e')]!==0x1||_0x5ef620%0x14===0x0){(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xe957('0x4d'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xe957('0x4d'))());}_0x185b05(++_0x5ef620);}try{_0x185b05(0x0);}catch(_0xecf600){}};_0xa50993();