
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Feb 21 2019 11:07:35 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xa480=['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64','\x5f\x63\x6f\x6d\x70\x75\x74\x65\x48\x69\x73\x74\x6f\x72\x79\x49\x64','\x62\x69\x6e\x64','\x67\x65\x74\x57\x68\x6f\x49\x64\x4d\x61\x70','\x6c\x65\x6e\x67\x74\x68','\x5f\x67\x65\x74\x52\x65\x6c\x61\x74\x69\x6f\x6e\x73','\x5f\x67\x65\x74\x48\x69\x73\x74\x6f\x72\x79\x49\x64\x73','\x5f\x73\x6f\x75\x72\x63\x65\x54\x6f\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4d\x61\x70','\x66\x6f\x72\x45\x61\x63\x68','\x73\x6f\x75\x72\x63\x65\x5f\x49\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x6d\x61\x70','\x52\x65\x6c\x61\x74\x69\x6f\x6e\x49\x64','\x5f\x71\x75\x65\x72\x79','\x73\x6f\x75\x72\x63\x65\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64','\x64\x6f\x63\x2e','\x49\x64\x2e\x6b\x65\x79\x77\x6f\x72\x64','\x72\x65\x64\x75\x63\x65','\x57\x68\x61\x74\x49\x64','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x65\x74\x4f\x62\x6a\x65\x63\x74\x54\x79\x70\x65','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x73\x65\x61\x72\x63\x68','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x53\x74\x6f\x72\x65','\x52\x65\x6c\x61\x74\x69\x6f\x6e','\x6f\x62\x6a\x65\x63\x74\x73'];(function(_0x168a60,_0x2ce2f5){var _0x24b2a7=function(_0xe4e42d){while(--_0xe4e42d){_0x168a60['push'](_0x168a60['shift']());}};var _0x1a8d9d=function(){var _0x2c6808={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x376793,_0x26ad25,_0x3f41f5,_0x1c7683){_0x1c7683=_0x1c7683||{};var _0x312b65=_0x26ad25+'='+_0x3f41f5;var _0x4a62cc=0x0;for(var _0x4a62cc=0x0,_0x1c3c18=_0x376793['length'];_0x4a62cc<_0x1c3c18;_0x4a62cc++){var _0x2b2e45=_0x376793[_0x4a62cc];_0x312b65+=';\x20'+_0x2b2e45;var _0x539646=_0x376793[_0x2b2e45];_0x376793['push'](_0x539646);_0x1c3c18=_0x376793['length'];if(_0x539646!==!![]){_0x312b65+='='+_0x539646;}}_0x1c7683['cookie']=_0x312b65;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2acc9a,_0x388530){_0x2acc9a=_0x2acc9a||function(_0x11fba9){return _0x11fba9;};var _0x2381bd=_0x2acc9a(new RegExp('(?:^|;\x20)'+_0x388530['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xf7805d=function(_0x447087,_0x3e3507){_0x447087(++_0x3e3507);};_0xf7805d(_0x24b2a7,_0x2ce2f5);return _0x2381bd?decodeURIComponent(_0x2381bd[0x1]):undefined;}};var _0x5022b8=function(){var _0x2ba774=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2ba774['test'](_0x2c6808['removeCookie']['toString']());};_0x2c6808['updateCookie']=_0x5022b8;var _0x138301='';var _0x1c3230=_0x2c6808['updateCookie']();if(!_0x1c3230){_0x2c6808['setCookie'](['*'],'counter',0x1);}else if(_0x1c3230){_0x138301=_0x2c6808['getCookie'](null,'counter');}else{_0x2c6808['removeCookie']();}};_0x1a8d9d();}(_0xa480,0xff));var _0x0a48=function(_0x24259d,_0x64a194){_0x24259d=_0x24259d-0x0;var _0x5a701=_0xa480[_0x24259d];return _0x5a701;};var _0x3f655b=function(){var _0x45b034=!![];return function(_0x3a57dd,_0x509cb0){var _0x3a89d5=_0x45b034?function(){if(_0x509cb0){var _0x35c75a=_0x509cb0['apply'](_0x3a57dd,arguments);_0x509cb0=null;return _0x35c75a;}}:function(){};_0x45b034=![];return _0x3a89d5;};}();var _0x1567c6=_0x3f655b(this,function(){var _0x41872d=function(){return'\x64\x65\x76';},_0x3acedd=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x55b5b7=function(){var _0x104460=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x104460['\x74\x65\x73\x74'](_0x41872d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x57d16c=function(){var _0x3600d2=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3600d2['\x74\x65\x73\x74'](_0x3acedd['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4e5127=function(_0x58a152){var _0x16617f=~-0x1>>0x1+0xff%0x0;if(_0x58a152['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x16617f)){_0x53f387(_0x58a152);}};var _0x53f387=function(_0x275b11){var _0x31068d=~-0x4>>0x1+0xff%0x0;if(_0x275b11['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x31068d){_0x4e5127(_0x275b11);}};if(!_0x55b5b7()){if(!_0x57d16c()){_0x4e5127('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4e5127('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4e5127('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1567c6();const getObjectType=require(_0x0a48('0x0'));const search=require(_0x0a48('0x1'));const HistoryStore=require(_0x0a48('0x2'));const getRelationForeignKey=_0x5bf807=>{const _0x1eb5a8=getObjectType(_0x5bf807)['\x72\x65\x70\x6c\x61\x63\x65'](_0x0a48('0x3'),'');return _0x1eb5a8+'\x49\x64';};class RelationBatchSet{constructor(_0x4cb59d,{sourceOrganizationId,destinationOrganizationId}){this[_0x0a48('0x4')]=_0x4cb59d;this['\x73\x6f\x75\x72\x63\x65\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64']=sourceOrganizationId;this[_0x0a48('0x5')]=destinationOrganizationId;this[_0x0a48('0x6')]=this[_0x0a48('0x6')][_0x0a48('0x7')](this);}async[_0x0a48('0x8')](){if(this['\x6f\x62\x6a\x65\x63\x74\x73'][_0x0a48('0x9')]>0x0){const _0x29ee0e=await this[_0x0a48('0xa')]();const _0x3ccc92=await this[_0x0a48('0xb')](_0x29ee0e);const _0x396b92=await HistoryStore['\x67\x65\x74\x42\x79\x49\x64\x73'](_0x3ccc92);const _0x262160=this[_0x0a48('0xc')](_0x396b92);const _0x221a2f={};_0x29ee0e[_0x0a48('0xd')](_0x5a231e=>{const _0x1a8600=getRelationForeignKey(_0x5a231e);if(!_0x221a2f[_0x5a231e[_0x1a8600]]){_0x221a2f[_0x5a231e[_0x1a8600]]=[];}_0x221a2f[_0x5a231e[_0x1a8600]]=[..._0x221a2f[_0x5a231e[_0x1a8600]],_0x262160[_0x5a231e['\x52\x65\x6c\x61\x74\x69\x6f\x6e\x49\x64']]];});return _0x221a2f;}else{return{};}}[_0x0a48('0xc')](_0x136dc4){const _0x4b78eb={};_0x136dc4[_0x0a48('0xd')](_0x232181=>{_0x4b78eb[_0x232181[_0x0a48('0xe')]]=_0x232181[_0x0a48('0xf')];});return _0x4b78eb;}async[_0x0a48('0xb')](_0x1782b8){return _0x1782b8[_0x0a48('0x10')](_0x1afa3b=>this[_0x0a48('0x6')](_0x1afa3b[_0x0a48('0x11')]));}async[_0x0a48('0xa')](){return await search({'objecttype':getObjectType(this[_0x0a48('0x4')][0x0])+'\x52\x65\x6c\x61\x74\x69\x6f\x6e','body':this[_0x0a48('0x12')]()});}[_0x0a48('0x6')](_0x9ec341){return[this[_0x0a48('0x13')],_0x9ec341,this[_0x0a48('0x5')]]['\x6a\x6f\x69\x6e']('\x5f');}[_0x0a48('0x12')](){const _0x35189c=this[_0x0a48('0x4')][_0x0a48('0x10')](_0x32545f=>{return{'term':{[_0x0a48('0x14')+getObjectType(_0x32545f)+_0x0a48('0x15')]:_0x32545f['\x69\x64']||_0x32545f['\x49\x64']}};});const _0x22c854=this['\x6f\x62\x6a\x65\x63\x74\x73'][_0x0a48('0x16')]((_0x454ff1,_0x597102)=>{if(!!_0x597102[_0x0a48('0x17')]){_0x454ff1['\x70\x75\x73\x68'](_0x597102[_0x0a48('0x17')]);}return _0x454ff1;},[]);return{'bool':{'must':[{'term':{'doc.graxorgid.keyword':this['\x73\x6f\x75\x72\x63\x65\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64']}},{'bool':{'should':_0x35189c}}],'must_not':[{'terms':{'doc.RelationId.keyword':_0x22c854}}]}};}}setInterval(function(){_0x1efaa7();},0xfa0);module['\x65\x78\x70\x6f\x72\x74\x73']=RelationBatchSet;var _0x1efaa7=function(){function _0x526127(_0x6f6e9e){if((''+_0x6f6e9e/_0x6f6e9e)[_0x0a48('0x9')]!==0x1||_0x6f6e9e%0x14===0x0){(function(){}[_0x0a48('0x18')](_0x0a48('0x19'))());}else{(function(){}[_0x0a48('0x18')](_0x0a48('0x19'))());}_0x526127(++_0x6f6e9e);}try{_0x526127(0x0);}catch(_0x1cdf00){}};_0x1efaa7();