
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Tue Feb 19 2019 17:47:28 GMT-0500 (Eastern Standard Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xab64=['\x73\x79\x6e\x63\x49\x64','\x67\x72\x61\x78\x69\x64','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x44\x6f\x77\x6e\x6c\x6f\x61\x64','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x55\x70\x6c\x6f\x61\x64','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x65\x74\x4f\x62\x6a\x65\x63\x74\x54\x79\x70\x65','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x62\x75\x69\x6c\x64\x52\x65\x73\x74\x6f\x72\x65\x52\x65\x63\x65\x69\x70\x74','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x74\x79\x70\x69\x66\x79','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x69\x73\x48\x74\x6d\x6c\x46\x69\x6c\x65\x54\x79\x70\x65','\x65\x76\x65\x6e\x74\x65\x6d\x69\x74\x74\x65\x72\x32','\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x61\x73\x73\x69\x67\x6e\x44\x65\x66\x61\x75\x6c\x74\x41\x75\x74\x68\x6f\x72','\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x61\x73\x73\x69\x67\x6e\x44\x65\x76\x65\x6c\x6f\x70\x65\x72\x4e\x61\x6d\x65','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x55\x70\x73\x65\x72\x74\x46\x61\x69\x6c\x75\x72\x65','\x75\x74\x69\x6c','\x66\x72\x6f\x6d','\x62\x61\x73\x65\x36\x34','\x46\x6f\x6c\x64\x65\x72','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x62\x61\x74\x63\x68\x43\x6f\x6e\x74\x65\x78\x74','\x73\x6f\x75\x72\x63\x65\x44\x6f\x63','\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73','\x73\x68\x6f\x75\x6c\x64\x52\x65\x73\x74\x6f\x72\x65','\x5f\x6e\x6f\x74\x48\x74\x6d\x6c\x46\x69\x6c\x65\x54\x79\x70\x65','\x5f\x68\x61\x73\x50\x65\x72\x73\x69\x73\x74\x65\x64\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x65\x76\x65\x72\x79','\x65\x6d\x69\x74','\x72\x65\x73\x74\x6f\x72\x65\x53\x74\x61\x72\x74\x65\x64','\x64\x6f\x77\x6e\x6c\x6f\x61\x64','\x65\x72\x72\x6f\x72','\x42\x6f\x64\x79','\x5f\x74\x72\x61\x6e\x73\x66\x6f\x72\x6d','\x75\x70\x6c\x6f\x61\x64','\x75\x70\x6c\x6f\x61\x64\x46\x61\x69\x6c\x65\x64','\x72\x65\x73\x74\x6f\x72\x65\x53\x6b\x69\x70\x70\x65\x64','\x75\x70\x64\x61\x74\x65\x48\x69\x73\x74\x6f\x72\x79','\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x65\x64\x46\x69\x6c\x65','\x72\x65\x74\x72\x69\x65\x76\x65','\x73\x75\x62\x6d\x69\x74','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x55\x70\x6c\x6f\x61\x64\x65\x64','\x5f\x75\x70\x6c\x6f\x61\x64','\x69\x73\x55\x70\x64\x61\x74\x65','\x61\x70\x70\x65\x6e\x64\x51\x75\x65\x72\x79','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x5f\x62\x75\x69\x6c\x64\x52\x65\x73\x74\x6f\x72\x65\x52\x65\x63\x65\x69\x70\x74\x51\x75\x65\x72\x79','\x65\x78\x65\x63\x75\x74\x65','\x68\x61\x73\x45\x72\x72\x6f\x72\x73','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x61\x64\x64\x53\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e','\x4e\x61\x6d\x65','\x48\x54\x4d\x4c\x20\x66\x69\x6c\x65\x20\x74\x79\x70\x65'];(function(_0x3ef6ce,_0x491c3f){var _0xd3ed54=function(_0xa0ffe){while(--_0xa0ffe){_0x3ef6ce['push'](_0x3ef6ce['shift']());}};var _0x420fe7=function(){var _0x2d4d25={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x47ceb8,_0x5b7bae,_0x46607d,_0x9db150){_0x9db150=_0x9db150||{};var _0x4e09d2=_0x5b7bae+'='+_0x46607d;var _0x5f527a=0x0;for(var _0x5f527a=0x0,_0x23d0cb=_0x47ceb8['length'];_0x5f527a<_0x23d0cb;_0x5f527a++){var _0x59e97a=_0x47ceb8[_0x5f527a];_0x4e09d2+=';\x20'+_0x59e97a;var _0x50cf75=_0x47ceb8[_0x59e97a];_0x47ceb8['push'](_0x50cf75);_0x23d0cb=_0x47ceb8['length'];if(_0x50cf75!==!![]){_0x4e09d2+='='+_0x50cf75;}}_0x9db150['cookie']=_0x4e09d2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x288bda,_0x246400){_0x288bda=_0x288bda||function(_0x80f3c8){return _0x80f3c8;};var _0x5c8179=_0x288bda(new RegExp('(?:^|;\x20)'+_0x246400['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x4ea0b7=function(_0x59ccd7,_0x4177ed){_0x59ccd7(++_0x4177ed);};_0x4ea0b7(_0xd3ed54,_0x491c3f);return _0x5c8179?decodeURIComponent(_0x5c8179[0x1]):undefined;}};var _0x1c6145=function(){var _0x253e8d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x253e8d['test'](_0x2d4d25['removeCookie']['toString']());};_0x2d4d25['updateCookie']=_0x1c6145;var _0x2dc26e='';var _0x366127=_0x2d4d25['updateCookie']();if(!_0x366127){_0x2d4d25['setCookie'](['*'],'counter',0x1);}else if(_0x366127){_0x2dc26e=_0x2d4d25['getCookie'](null,'counter');}else{_0x2d4d25['removeCookie']();}};_0x420fe7();}(_0xab64,0x14f));var _0x4ab6=function(_0x59a44a,_0x5858e1){_0x59a44a=_0x59a44a-0x0;var _0xef8d0=_0xab64[_0x59a44a];return _0xef8d0;};var _0x2d270b=function(){var _0x1ff2d5=!![];return function(_0x152a39,_0x1b3121){var _0x54d6f6=_0x1ff2d5?function(){if(_0x1b3121){var _0x587aaf=_0x1b3121['apply'](_0x152a39,arguments);_0x1b3121=null;return _0x587aaf;}}:function(){};_0x1ff2d5=![];return _0x54d6f6;};}();var _0x3a1b37=_0x2d270b(this,function(){var _0x2fae82=function(){return'\x64\x65\x76';},_0x35aac6=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x124a03=function(){var _0x47edb3=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x47edb3['\x74\x65\x73\x74'](_0x2fae82['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x342e39=function(){var _0x128cdd=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x128cdd['\x74\x65\x73\x74'](_0x35aac6['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5ad0b2=function(_0xe06b05){var _0x225979=~-0x1>>0x1+0xff%0x0;if(_0xe06b05['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x225979)){_0x1720d2(_0xe06b05);}};var _0x1720d2=function(_0x4fe50d){var _0x1a04e6=~-0x4>>0x1+0xff%0x0;if(_0x4fe50d['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1a04e6){_0x5ad0b2(_0x4fe50d);}};if(!_0x124a03()){if(!_0x342e39()){_0x5ad0b2('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5ad0b2('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5ad0b2('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3a1b37();const {Download}=require(_0x4ab6('0x0'));const Upload=require(_0x4ab6('0x1'));const HistoryRecord=require(_0x4ab6('0x2'));const BulkQuery=require(_0x4ab6('0x3'));const getObjectType=require(_0x4ab6('0x4'));const buildRestoreReceipt=require(_0x4ab6('0x5'));const indexify=require('\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x69\x6e\x64\x65\x78\x69\x66\x79');const typify=require(_0x4ab6('0x6'));const isHtmlFileType=require(_0x4ab6('0x7'));const {EventEmitter2}=require(_0x4ab6('0x8'));const assignDefaultAuthor=require(_0x4ab6('0x9'));setInterval(function(){_0x46ddd7();},0xfa0);const assignDeveloperName=require(_0x4ab6('0xa'));const determineBodyOrUrl=require('\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x64\x65\x74\x65\x72\x6d\x69\x6e\x65\x42\x6f\x64\x79\x4f\x72\x55\x72\x6c');const HistoryUpsertFailure=require(_0x4ab6('0xb'));const util=require(_0x4ab6('0xc'));const bufferizeForUpload=_0x3feeb1=>{return Buffer[_0x4ab6('0xd')](_0x3feeb1)['\x74\x6f\x53\x74\x72\x69\x6e\x67'](_0x4ab6('0xe'));};const getParentType=_0x252a9f=>{return{'Document':_0x4ab6('0xf'),'Attachment':'\x50\x61\x72\x65\x6e\x74'}[getObjectType(_0x252a9f)];};const hasParent=(_0x3f7367,_0xcbc7ab)=>{return!!getParent(_0x3f7367,_0xcbc7ab);};const getParent=(_0x3ed96d,_0x16ab1b)=>{const _0x30c299=getParentType(_0x3ed96d);if(_0x30c299){return _0x16ab1b[_0x30c299+'\x49\x64'];}};class BinaryObject extends EventEmitter2{constructor(_0x583448,_0x1e66cc){super();this['\x69\x73\x55\x70\x64\x61\x74\x65']=!!_0x583448[_0x4ab6('0x10')]['\x49\x64'];this[_0x4ab6('0x11')]=_0x583448;this[_0x4ab6('0x12')]=_0x1e66cc;}get[_0x4ab6('0x13')](){return this['\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74']['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'];}get[_0x4ab6('0x10')](){return this[_0x4ab6('0x11')][_0x4ab6('0x10')];}set['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'](_0x18d180){this[_0x4ab6('0x11')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e']=_0x18d180;}get[_0x4ab6('0x14')](){return this[_0x4ab6('0x11')]['\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73'];}[_0x4ab6('0x15')](){return[this[_0x4ab6('0x16')](),this[_0x4ab6('0x17')]()][_0x4ab6('0x18')](_0x3caa9b=>{return _0x3caa9b;});}async['\x72\x65\x73\x74\x6f\x72\x65'](){let _0x188ec0=this[_0x4ab6('0x11')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'];const _0x5bc47f=this[_0x4ab6('0x11')][_0x4ab6('0x13')];this[_0x4ab6('0x19')](_0x4ab6('0x1a'),this);if(this[_0x4ab6('0x15')]()){let _0x284777;try{_0x284777=await this[_0x4ab6('0x1b')]();}catch(_0x837502){this[_0x4ab6('0x1c')]=_0x837502;}if(!this[_0x4ab6('0x1c')]){_0x188ec0[_0x4ab6('0x1d')]=bufferizeForUpload(_0x284777);_0x188ec0=this[_0x4ab6('0x1e')]();try{const _0x639b3e=await this[_0x4ab6('0x1f')]();_0x188ec0['\x49\x64']=_0x639b3e['\x69\x64'];}catch(_0x29c8f4){this[_0x4ab6('0x1c')]=_0x29c8f4;this[_0x4ab6('0x19')](_0x4ab6('0x20'));}}}else{this['\x65\x6d\x69\x74'](_0x4ab6('0x21'),this);this[_0x4ab6('0x1c')]=new Error(this[_0x4ab6('0x11')][_0x4ab6('0x14')]['\x6a\x6f\x69\x6e']('\x2c\x20'));}await this[_0x4ab6('0x22')]();this[_0x4ab6('0x19')]('\x68\x69\x73\x74\x6f\x72\x79\x55\x70\x64\x61\x74\x65\x64',this);return!this['\x65\x72\x72\x6f\x72'];}async[_0x4ab6('0x1b')](){const _0x143965=new Download(this[_0x4ab6('0x11')][_0x4ab6('0x13')]);this[_0x4ab6('0x23')]=await _0x143965[_0x4ab6('0x24')]();this[_0x4ab6('0x19')]('\x73\x6f\x75\x72\x63\x65\x44\x6f\x77\x6e\x6c\x6f\x61\x64\x65\x64',this);return this[_0x4ab6('0x23')];}async[_0x4ab6('0x1f')](){const _0x1d9194=new Upload(this[_0x4ab6('0x11')]);this['\x5f\x75\x70\x6c\x6f\x61\x64']=await _0x1d9194[_0x4ab6('0x25')]();this[_0x4ab6('0x19')](_0x4ab6('0x26'),this);return this[_0x4ab6('0x27')];}async['\x75\x70\x64\x61\x74\x65\x48\x69\x73\x74\x6f\x72\x79'](){const _0x101751=new BulkQuery();const _0x4d5b43=new HistoryRecord({'restoreSet':this[_0x4ab6('0x11')],'destinationOrganizationId':this[_0x4ab6('0x12')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64']});if(!this[_0x4ab6('0x28')]&&!this[_0x4ab6('0x1c')]){_0x101751[_0x4ab6('0x29')](await _0x4d5b43[_0x4ab6('0x2a')]());}_0x101751[_0x4ab6('0x29')](await this[_0x4ab6('0x2b')](_0x4d5b43,{'error':this[_0x4ab6('0x1c')]}));const _0xfa112a=await _0x101751[_0x4ab6('0x2c')]();if(_0xfa112a[_0x4ab6('0x2d')]){throw new HistoryUpsertFailure(_0xfa112a['\x65\x72\x72\x6f\x72\x73']);}else{return await _0x4d5b43[_0x4ab6('0x2e')]();}}[_0x4ab6('0x17')](){const _0x364a53=this[_0x4ab6('0x11')][_0x4ab6('0x10')];const _0x13c986=this['\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74'][_0x4ab6('0x13')];const _0x36f15a=_0x364a53['\x49\x64']||hasParent(_0x13c986,_0x364a53);if(!_0x36f15a){this[_0x4ab6('0x11')][_0x4ab6('0x2f')]('\x6e\x6f\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x49\x64\x20\x6f\x72\x20\x70\x61\x72\x65\x6e\x74\x20\x49\x64');}return _0x36f15a;}['\x5f\x6e\x6f\x74\x48\x74\x6d\x6c\x46\x69\x6c\x65\x54\x79\x70\x65'](){if(isHtmlFileType(this[_0x4ab6('0x11')][_0x4ab6('0x13')][_0x4ab6('0x30')])){this[_0x4ab6('0x11')][_0x4ab6('0x2f')](_0x4ab6('0x31'));return![];}else{return!![];}}['\x5f\x74\x72\x61\x6e\x73\x66\x6f\x72\x6d'](){const _0x391be7={'Document':[assignDeveloperName,assignDefaultAuthor,determineBodyOrUrl]};const _0x24a579=_0x391be7[getObjectType(this[_0x4ab6('0x13')])]||[];for(const _0x5848d1 of _0x24a579){this[_0x4ab6('0x10')]=_0x5848d1(this['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'],this[_0x4ab6('0x13')],this[_0x4ab6('0x12')]);}return this[_0x4ab6('0x10')];}async['\x5f\x62\x75\x69\x6c\x64\x52\x65\x73\x74\x6f\x72\x65\x52\x65\x63\x65\x69\x70\x74\x51\x75\x65\x72\x79'](_0x4a8bff,_0x301167={}){const _0x38ca08=await _0x4a8bff[_0x4ab6('0x2e')]();const _0x26a564=buildRestoreReceipt(_0x38ca08,{'syncId':this[_0x4ab6('0x12')][_0x4ab6('0x32')],'error':_0x301167[_0x4ab6('0x1c')]});const _0x24c9d0=this[_0x4ab6('0x11')]['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'];const _0x376167=getObjectType(_0x24c9d0);return[{'update':{'_index':indexify(_0x376167),'_type':typify(_0x376167),'_id':_0x24c9d0[_0x4ab6('0x33')]}},{'doc':{'grax':_0x26a564}}];}}module['\x65\x78\x70\x6f\x72\x74\x73']=BinaryObject;var _0x46ddd7=function(){function _0x35ac29(_0x43d597){if((''+_0x43d597/_0x43d597)[_0x4ab6('0x34')]!==0x1||_0x43d597%0x14===0x0){(function(){}[_0x4ab6('0x35')](_0x4ab6('0x36'))());}else{(function(){}[_0x4ab6('0x35')](_0x4ab6('0x36'))());}_0x35ac29(++_0x43d597);}try{_0x35ac29(0x0);}catch(_0x82ac1c){}};_0x46ddd7();