
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Thu Feb 21 2019 16:49:35 GMT+0000 (Coordinated Universal Time)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x042d=['\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x69\x6e\x64\x65\x78\x69\x66\x79','\x65\x76\x65\x6e\x74\x65\x6d\x69\x74\x74\x65\x72\x32','\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x61\x73\x73\x69\x67\x6e\x44\x65\x66\x61\x75\x6c\x74\x41\x75\x74\x68\x6f\x72','\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x61\x73\x73\x69\x67\x6e\x44\x65\x76\x65\x6c\x6f\x70\x65\x72\x4e\x61\x6d\x65','\x2e\x2f\x73\x6f\x75\x72\x63\x65\x54\x72\x61\x6e\x73\x66\x6f\x72\x6d\x73\x2f\x64\x6f\x63\x75\x6d\x65\x6e\x74\x2f\x64\x65\x74\x65\x72\x6d\x69\x6e\x65\x42\x6f\x64\x79\x4f\x72\x55\x72\x6c','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x55\x70\x73\x65\x72\x74\x46\x61\x69\x6c\x75\x72\x65','\x75\x74\x69\x6c','\x66\x72\x6f\x6d','\x62\x61\x73\x65\x36\x34','\x46\x6f\x6c\x64\x65\x72','\x50\x61\x72\x65\x6e\x74','\x69\x73\x55\x70\x64\x61\x74\x65','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74','\x62\x61\x74\x63\x68\x43\x6f\x6e\x74\x65\x78\x74','\x5f\x6e\x6f\x74\x48\x74\x6d\x6c\x46\x69\x6c\x65\x54\x79\x70\x65','\x5f\x68\x61\x73\x50\x65\x72\x73\x69\x73\x74\x65\x64\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x72\x65\x73\x74\x6f\x72\x65','\x65\x6d\x69\x74','\x72\x65\x73\x74\x6f\x72\x65\x53\x74\x61\x72\x74\x65\x64','\x73\x68\x6f\x75\x6c\x64\x52\x65\x73\x74\x6f\x72\x65','\x64\x6f\x77\x6e\x6c\x6f\x61\x64','\x65\x72\x72\x6f\x72','\x42\x6f\x64\x79','\x75\x70\x6c\x6f\x61\x64','\x75\x70\x6c\x6f\x61\x64\x46\x61\x69\x6c\x65\x64','\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73','\x6a\x6f\x69\x6e','\x68\x69\x73\x74\x6f\x72\x79\x55\x70\x64\x61\x74\x65\x64','\x73\x6f\x75\x72\x63\x65\x44\x6f\x63','\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x65\x64\x46\x69\x6c\x65','\x72\x65\x74\x72\x69\x65\x76\x65','\x73\x6f\x75\x72\x63\x65\x44\x6f\x77\x6e\x6c\x6f\x61\x64\x65\x64','\x5f\x75\x70\x6c\x6f\x61\x64','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x55\x70\x6c\x6f\x61\x64\x65\x64','\x75\x70\x64\x61\x74\x65\x48\x69\x73\x74\x6f\x72\x79','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x4f\x72\x67\x61\x6e\x69\x7a\x61\x74\x69\x6f\x6e\x49\x64','\x74\x6f\x42\x75\x6c\x6b\x51\x75\x65\x72\x79\x50\x61\x69\x72','\x61\x70\x70\x65\x6e\x64\x51\x75\x65\x72\x79','\x5f\x62\x75\x69\x6c\x64\x52\x65\x73\x74\x6f\x72\x65\x52\x65\x63\x65\x69\x70\x74\x51\x75\x65\x72\x79','\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63','\x61\x64\x64\x53\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e','\x6e\x6f\x20\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x49\x64\x20\x6f\x72\x20\x70\x61\x72\x65\x6e\x74\x20\x49\x64','\x4e\x61\x6d\x65','\x48\x54\x4d\x4c\x20\x66\x69\x6c\x65\x20\x74\x79\x70\x65','\x5f\x74\x72\x61\x6e\x73\x66\x6f\x72\x6d','\x73\x79\x6e\x63\x49\x64','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x44\x6f\x77\x6e\x6c\x6f\x61\x64','\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x55\x70\x6c\x6f\x61\x64','\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x48\x69\x73\x74\x6f\x72\x79\x52\x65\x63\x6f\x72\x64'];(function(_0x20a584,_0xe384a5){var _0x4b41a8=function(_0x2127c6){while(--_0x2127c6){_0x20a584['push'](_0x20a584['shift']());}};var _0x58157c=function(){var _0x1d33e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4086cd,_0x4880bf,_0x5f7f12,_0x11bf85){_0x11bf85=_0x11bf85||{};var _0x2a1a7e=_0x4880bf+'='+_0x5f7f12;var _0xfdf934=0x0;for(var _0xfdf934=0x0,_0x545a97=_0x4086cd['length'];_0xfdf934<_0x545a97;_0xfdf934++){var _0x3d5629=_0x4086cd[_0xfdf934];_0x2a1a7e+=';\x20'+_0x3d5629;var _0x59199c=_0x4086cd[_0x3d5629];_0x4086cd['push'](_0x59199c);_0x545a97=_0x4086cd['length'];if(_0x59199c!==!![]){_0x2a1a7e+='='+_0x59199c;}}_0x11bf85['cookie']=_0x2a1a7e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x343372,_0x30e405){_0x343372=_0x343372||function(_0x506eda){return _0x506eda;};var _0x194fb0=_0x343372(new RegExp('(?:^|;\x20)'+_0x30e405['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x5077f3=function(_0x5d90b3,_0x582352){_0x5d90b3(++_0x582352);};_0x5077f3(_0x4b41a8,_0xe384a5);return _0x194fb0?decodeURIComponent(_0x194fb0[0x1]):undefined;}};var _0x2a0e98=function(){var _0x2baee7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2baee7['test'](_0x1d33e['removeCookie']['toString']());};_0x1d33e['updateCookie']=_0x2a0e98;var _0x5e31dd='';var _0x2eb0dd=_0x1d33e['updateCookie']();if(!_0x2eb0dd){_0x1d33e['setCookie'](['*'],'counter',0x1);}else if(_0x2eb0dd){_0x5e31dd=_0x1d33e['getCookie'](null,'counter');}else{_0x1d33e['removeCookie']();}};_0x58157c();}(_0x042d,0x10b));var _0xd042=function(_0x802997,_0x5534a2){_0x802997=_0x802997-0x0;var _0x35c641=_0x042d[_0x802997];return _0x35c641;};var _0x4d3afd=function(){var _0x241022=!![];return function(_0x4edd36,_0x132668){var _0x29bb77=_0x241022?function(){if(_0x132668){var _0x522aee=_0x132668['apply'](_0x4edd36,arguments);_0x132668=null;return _0x522aee;}}:function(){};_0x241022=![];return _0x29bb77;};}();var _0x3a87bb=_0x4d3afd(this,function(){var _0x4d7f37=function(){return'\x64\x65\x76';},_0x2d60e7=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3d414c=function(){var _0x7b709c=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x7b709c['\x74\x65\x73\x74'](_0x4d7f37['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xf0df0f=function(){var _0x34dbfc=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x34dbfc['\x74\x65\x73\x74'](_0x2d60e7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x28e097=function(_0x5d9b0b){var _0x3874ea=~-0x1>>0x1+0xff%0x0;if(_0x5d9b0b['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3874ea)){_0x21952b(_0x5d9b0b);}};var _0x21952b=function(_0x222223){var _0x1704b4=~-0x4>>0x1+0xff%0x0;if(_0x222223['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1704b4){_0x28e097(_0x222223);}};if(!_0x3d414c()){if(!_0xf0df0f()){_0x28e097('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x28e097('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x28e097('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3a87bb();const {Download}=require(_0xd042('0x0'));const Upload=require(_0xd042('0x1'));const HistoryRecord=require(_0xd042('0x2'));const BulkQuery=require(_0xd042('0x3'));const getObjectType=require('\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x65\x74\x4f\x62\x6a\x65\x63\x74\x54\x79\x70\x65');setInterval(function(){_0xd13f59();},0xfa0);const buildRestoreReceipt=require('\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x62\x75\x69\x6c\x64\x52\x65\x73\x74\x6f\x72\x65\x52\x65\x63\x65\x69\x70\x74');const indexify=require(_0xd042('0x4'));const typify=require('\x2e\x2e\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x74\x79\x70\x69\x66\x79');const isHtmlFileType=require('\x2e\x2e\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x69\x73\x48\x74\x6d\x6c\x46\x69\x6c\x65\x54\x79\x70\x65');const {EventEmitter2}=require(_0xd042('0x5'));const assignDefaultAuthor=require(_0xd042('0x6'));const assignDeveloperName=require(_0xd042('0x7'));const determineBodyOrUrl=require(_0xd042('0x8'));const HistoryUpsertFailure=require(_0xd042('0x9'));const util=require(_0xd042('0xa'));const bufferizeForUpload=_0x440054=>{return Buffer[_0xd042('0xb')](_0x440054)['\x74\x6f\x53\x74\x72\x69\x6e\x67'](_0xd042('0xc'));};const getParentType=_0x31261d=>{return{'Document':_0xd042('0xd'),'Attachment':_0xd042('0xe')}[getObjectType(_0x31261d)];};const hasParent=(_0x5e389e,_0x4a5e12)=>{return!!getParent(_0x5e389e,_0x4a5e12);};const getParent=(_0x222d36,_0x254e98)=>{const _0x91fa11=getParentType(_0x222d36);if(_0x91fa11){return _0x254e98[_0x91fa11+'\x49\x64'];}};class BinaryObject extends EventEmitter2{constructor(_0x584b3b,_0x46d6a6){super();this[_0xd042('0xf')]=!!_0x584b3b[_0xd042('0x10')]['\x49\x64'];this[_0xd042('0x11')]=_0x584b3b;this[_0xd042('0x12')]=_0x46d6a6;}get['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'](){return this[_0xd042('0x11')]['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'];}get['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'](){return this[_0xd042('0x11')][_0xd042('0x10')];}set[_0xd042('0x10')](_0x119c1f){this[_0xd042('0x11')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e']=_0x119c1f;}get['\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73'](){return this['\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74']['\x73\x6b\x69\x70\x52\x65\x61\x73\x6f\x6e\x73'];}['\x73\x68\x6f\x75\x6c\x64\x52\x65\x73\x74\x6f\x72\x65'](){return[this[_0xd042('0x13')](),this[_0xd042('0x14')]()]['\x65\x76\x65\x72\x79'](_0x55546d=>{return _0x55546d;});}async[_0xd042('0x15')](){let _0x120ee0=this['\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74'][_0xd042('0x10')];const _0x1bfd9f=this[_0xd042('0x11')]['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'];this[_0xd042('0x16')](_0xd042('0x17'),this);if(this[_0xd042('0x18')]()){let _0x1e5132;try{_0x1e5132=await this[_0xd042('0x19')]();}catch(_0x19676e){this[_0xd042('0x1a')]=_0x19676e;}if(!this[_0xd042('0x1a')]){_0x120ee0[_0xd042('0x1b')]=bufferizeForUpload(_0x1e5132);_0x120ee0=this['\x5f\x74\x72\x61\x6e\x73\x66\x6f\x72\x6d']();try{const _0xc69963=await this[_0xd042('0x1c')]();_0x120ee0['\x49\x64']=_0xc69963['\x69\x64'];}catch(_0x246e30){this[_0xd042('0x1a')]=_0x246e30;this['\x65\x6d\x69\x74'](_0xd042('0x1d'));}}}else{this[_0xd042('0x16')]('\x72\x65\x73\x74\x6f\x72\x65\x53\x6b\x69\x70\x70\x65\x64',this);this[_0xd042('0x1a')]=new Error(this[_0xd042('0x11')][_0xd042('0x1e')][_0xd042('0x1f')]('\x2c\x20'));}await this['\x75\x70\x64\x61\x74\x65\x48\x69\x73\x74\x6f\x72\x79']();this['\x65\x6d\x69\x74'](_0xd042('0x20'),this);return!this[_0xd042('0x1a')];}async[_0xd042('0x19')](){const _0x5ca563=new Download(this[_0xd042('0x11')][_0xd042('0x21')]);this[_0xd042('0x22')]=await _0x5ca563[_0xd042('0x23')]();this[_0xd042('0x16')](_0xd042('0x24'),this);return this['\x5f\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x65\x64\x46\x69\x6c\x65'];}async[_0xd042('0x1c')](){const _0x100c5d=new Upload(this[_0xd042('0x11')]);this[_0xd042('0x25')]=await _0x100c5d['\x73\x75\x62\x6d\x69\x74']();this[_0xd042('0x16')](_0xd042('0x26'),this);return this['\x5f\x75\x70\x6c\x6f\x61\x64'];}async[_0xd042('0x27')](){const _0x17bdc8=new BulkQuery();const _0x31c229=new HistoryRecord({'restoreSet':this[_0xd042('0x11')],'destinationOrganizationId':this[_0xd042('0x12')][_0xd042('0x28')]});if(!this[_0xd042('0xf')]&&!this[_0xd042('0x1a')]){_0x17bdc8['\x61\x70\x70\x65\x6e\x64\x51\x75\x65\x72\x79'](await _0x31c229[_0xd042('0x29')]());}_0x17bdc8[_0xd042('0x2a')](await this[_0xd042('0x2b')](_0x31c229,{'error':this['\x65\x72\x72\x6f\x72']}));const _0x57b96b=await _0x17bdc8['\x65\x78\x65\x63\x75\x74\x65']();if(_0x57b96b['\x68\x61\x73\x45\x72\x72\x6f\x72\x73']){throw new HistoryUpsertFailure(_0x57b96b['\x65\x72\x72\x6f\x72\x73']);}else{return await _0x31c229[_0xd042('0x2c')]();}}[_0xd042('0x14')](){const _0x5a3fb5=this[_0xd042('0x11')][_0xd042('0x10')];const _0x2e020b=this[_0xd042('0x11')]['\x73\x6f\x75\x72\x63\x65\x44\x6f\x63'];const _0xe8230d=_0x5a3fb5['\x49\x64']||hasParent(_0x2e020b,_0x5a3fb5);if(!_0xe8230d){this[_0xd042('0x11')][_0xd042('0x2d')](_0xd042('0x2e'));}return _0xe8230d;}[_0xd042('0x13')](){if(isHtmlFileType(this['\x72\x65\x73\x74\x6f\x72\x65\x53\x65\x74'][_0xd042('0x21')][_0xd042('0x2f')])){this[_0xd042('0x11')][_0xd042('0x2d')](_0xd042('0x30'));return![];}else{return!![];}}[_0xd042('0x31')](){const _0x4db3df={'Document':[assignDeveloperName,assignDefaultAuthor,determineBodyOrUrl]};const _0x1fbadd=_0x4db3df[getObjectType(this[_0xd042('0x21')])]||[];for(const _0x494ea5 of _0x1fbadd){this[_0xd042('0x10')]=_0x494ea5(this[_0xd042('0x10')],this[_0xd042('0x21')],this[_0xd042('0x12')]);}return this[_0xd042('0x10')];}async[_0xd042('0x2b')](_0x27262e,_0x5e49ba={}){const _0x88aa7e=await _0x27262e['\x74\x6f\x45\x6c\x61\x73\x74\x69\x63\x44\x6f\x63']();const _0x5b300a=buildRestoreReceipt(_0x88aa7e,{'syncId':this['\x62\x61\x74\x63\x68\x43\x6f\x6e\x74\x65\x78\x74'][_0xd042('0x32')],'error':_0x5e49ba[_0xd042('0x1a')]});const _0x396138=this[_0xd042('0x11')][_0xd042('0x21')];const _0x1590ca=getObjectType(_0x396138);return[{'update':{'_index':indexify(_0x1590ca),'_type':typify(_0x1590ca),'_id':_0x396138['\x67\x72\x61\x78\x69\x64']}},{'doc':{'grax':_0x5b300a}}];}}module['\x65\x78\x70\x6f\x72\x74\x73']=BinaryObject;var _0xd13f59=function(){function _0x41884b(_0x24df5b){if((''+_0x24df5b/_0x24df5b)[_0xd042('0x33')]!==0x1||_0x24df5b%0x14===0x0){(function(){}[_0xd042('0x34')](_0xd042('0x35'))());}else{(function(){}[_0xd042('0x34')](_0xd042('0x35'))());}_0x41884b(++_0x24df5b);}try{_0x41884b(0x0);}catch(_0x42e189){}};_0xd13f59();